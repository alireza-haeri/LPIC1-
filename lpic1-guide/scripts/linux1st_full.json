[
  {
    "title": "Know your LPIC1 version 5 exam",
    "url": "https://linux1st.com./know-your-lpic1-version-5-exam.html",
    "extracted_title": "",
    "content": "This document is written based on\nLPIC1 version 5 (exams 101-500 and 102-500)\n. It covers all the objectives. Each LPIC exam has 60 multiple choice and fill-in-the-blank questions which should be answered in 90 minutes.\nChapter List\nPrepare your Lab →\nCategory\nLPIC1\nContact"
  },
  {
    "title": "Prepare your Lab",
    "url": "https://linux1st.com./prepare-your-lab.html",
    "extracted_title": "",
    "content": "Watching videos or even reading books is never enough. You need to have Linux installed and practice your newly acquired knowledge. As you may know, LPIC is a\ndistro agnostic\ntest and an LPIC-certified guru should be able to work in any GNU/Linux system, or at least on the major ones. Because of this, I suggest you have two Linux machines which you can work on. One RPM-based and one Debian-based.\nOne common way is to use a Virtual Machine. You can install something like\nVirtualBox\n(for Win/Linux and Intel Macs) or\nUTM\n(for M1 Macs) or any other solution to install your test machines in a Virtual Machine.\nFor your distribution, I suggest\nUbuntu\nor\nDebian\nas your Debian-based system and\nFedora\nor\nRocky Linux\nas your RPM-based machine. Feel free to install anything else and do whatever you enjoy!\nIf you want to walk in my steps, do a normal GUI installation. Here is me, installing the Ubuntu 22.04:\nAnd here, you can follow the Fedora 36 installation:\nNote: The version is not that important. Here I'm installing Fedora 36 & Ubuntu 22.04.\n← Know your LPIC1 version 5 exam\nChapter List\n101.1 Determine and configure hardware settings →\nCategory\nLPIC1\nContact"
  },
  {
    "title": "101.1 Determine and configure hardware settings",
    "url": "https://linux1st.com./1011-determine-and-configure-hardware-settings.html",
    "extracted_title": "",
    "content": "Weight: 2\nCandidates should be able to determine and configure fundamental system hardware.\nObjectives\nEnable and disable integrated peripherals\nDifferentiate between the various types of mass storage devices\nDetermine hardware resources for devices\nTools and utilities to list various hardware information (e.g. lsusb, lspci, etc.)\nTools and utilities to manipulate USB devices\nConceptual understanding of sysfs, udev, dbus\n/sys\n/proc\n/dev\nmodprobe\nlsmod\nlspci\nlsusb\nFind out about the hardware\nAn operating system (OS) is system software that manages computer hardware, and software resources, and provides common services for computer programs. It sits on top of the hardware and manages the resources when other software (Sometimes called an userspace program) asks for it.\nFirmware is the software\non\nyour hardware that runs it; Think of it as a built-in OS or driver for your hardware. Motherboards need some firmware to be able to work too.\nFirmware is a type of software that lives in hardware. Software is any program or group of programs run by a computer.\n1. BIOS (Basic Input/Output System). Old and redundant. It is intractable through a text menu-based system and it boots the computer by accessing the first sector of the first partition of your hard disk (MBR). This is not enough for modern systems and most systems use a two-step boot procedure.\n2. UEFI (Unified Extensible Firmware Interface). Started as EFI in 1998 in Intel. Now the standard. Uses a specific disk partition for boot (EFI System Partition (ESP)) and uses FAT. On Linux it's located on\n/boot/efi\nand the files use the\n.efi\nextension. You need to register each bootloader.\nPeripheral Devices\nThese are device interfaces.\nPCI\nPeripheral Component Interconnect. Enables the user to add extra components to the Motherboard. Now most servers use PCI Express (PCIe)\nInternal HDD.\nPATA (old)\nSATA (serial & up to 4 devices) (II-III)\nSCSI (parallel & up to 8 devices) (Small Computer System Interface)\nExternal HDD. Fiber (Providing a high-speed data connection). SSD over USB\nNetwork cards. RJ 45 (Registered Jack 45)\nWireless cards. IEEE 802.11\nBluetooth. IEEE 802.15 (Short-range (up to 10m) wireless technology standard)\nVideo accelerators. Hardware circuits on a graphics card that speed up full-motion video.\nAudio cards\nSSD vs HDD\nSSDs are faster (reads up to 10 times and writes up to 20 times faster), quieter, smaller, more durable, and consume less energy, while HDDs are cheaper and offer more storage capacity and easier data recovery if damaged.\nSSDs don't have moving parts such as actuator arms and spinning platters like hard drives (an SSD uses flash memory without any moving parts). That's one reason why SSDs can withstand accidental drops and other shocks, vibration, extreme temperatures, and magnetic fields better than HDDs.\nHDDs tend to last around 3-5 years, SSDs can last up to 10 years or more. (Current SSDs have reserve capacities. These storage spaces aren't available to the user, but are used to repair damaged cells, so to speak. The defect cells are replaced with brand-new reserve cells; this procedure is called “Bad-Block-Management”. Thus, SSD storage cells in normal operation last a lifetime.)\nNetwork cards vs Wireless cards\nNIC (Network Interface Card) provides computing network connectivity on a computing device to Ethernet network in Home or Office through RJ45 port. Wireless Adapter Card provides wireless connectivity to computing network enabled by Access Points on premises (in home or office) on a Computing Device.\nWireless cards are installed on an industrial computer is used to enable wireless connectivity to the internet.\nUSB\nUniversal Serial Bus. Serial and need fewer connections.\n1 (12Mbps), 2 (480Mbps), 3 (PCI.e 2.0 Bus:5Gbps, PCI.e 3.0 Bus:10Gbps, PCI.e 3.2 Bus:20Gbps, PCI.e 4.0 Bus:40Gbps)\nA, B, C\nGPIO\nGeneral Purpose Input Output.\nTo control other devices\nExamples include Arduino, raspberrypi, etc.\nSysfs\nSysfs is a pseudo file system provided by the Linux kernel that exports information about various kernel subsystems, hardware devices, and associated device drivers from the kernel's device model to user space through virtual files.[1] In addition to providing information about various devices and kernel subsystems, exported virtual files are also used for their configuration.\nSysfs is mounted under the\n/sys\nmount point.\njadi\n@funlife\n:\n~\n$\nls\n/\nsys\nblock\nbus\nclass\ndev\ndevices\nfirmware\nfs\nhypervisor\nkernel\nmodule\npower\nAll block devices are at the\nblock\nand\nbus\ndirectory has all the connected PCI, USB, serial, ... devices. Note that here in\nsys\nwe have the devices based on their technology but\n/dev/\nis abstracted.\nudev\nudev (userspace\n/dev\n) is a device manager for the Linux kernel. As the successor of devfsd and hotplug, udev primarily manages device nodes in the\n/dev\ndirectory. At the same time, udev also handles all user space events raised when hardware devices are added into the system or removed from it, including firmware loading as required by certain devices.\nThere are a lot of devices in\n/dev/\nand if you plug in any device, it will be assigned a file in\n/dev\n(say\n/dev/sdb2\n).\nudev\nlets you control what will be what in\n/dev\n. For example, you can use a rule to force your 128GB flash drive with one specific vendor to be\n/dev/mybackup\nevery single time you connect it and you can even start a backprocess as soon as it connects.\nIn essence,\nudev\nserves as the custodian of the\n/dev/\ndirectory. It abstracts the representation of devices, such as a hard disk, which is identified as\n/dev/sda\nor\n/dev/hd0\n, irrespective of its manufacturer, model, or underlying technology.\nroot\n@funlife\n:\n/\ndev\n#\nls\n/\ndev\n/\nsda\n*\n/\ndev\n/\nsda\n/\ndev\n/\nsda1\n/\ndev\n/\nsda2\n/\ndev\n/\nsda3\n/\ndev\n/\nsda5\n/\ndev\n/\nsda6\nIf a program wants to read/write from/to a device, it will use the corresponding file in /dev to do so. This can be done on\ncharacter devices\nor\nblock devices\n. When listing, a\nb\nor\nc\nwill indicate this:\nroot\n@ocean\n:\n~\n#\nls\n-\nltrh\n/\ndev\n/\n#\nPartial\noutput\nis\nshown\ncrw\n-\nrw\n----\n1\nroot\ntty\n4\n,\n1\nDec\n15\n2019\ntty1\ncrw\n-\nrw\n-\nrw\n-\n1\nroot\nroot\n1\n,\n5\nDec\n15\n2019\nzero\nbrw\n-\nrw\n----\n1\nroot\ndisk\n1\n,\n0\nDec\n15\n2019\nram0\nbrw\n-\nrw\n---- 1 root disk 253,   0 Dec 15  2019 /dev/vda\ndbus\nD-Bus is a message bus system, a simple way for applications to talk to one another. In addition to inter-process communication, D-Bus helps coordinate process lifecycle; It makes it simple and reliable to code a \"single instance\" application or daemon and to launch applications and daemons on demand when their services are needed.\nproc directory\nThis is where the Kernel keeps its settings and properties. This directory is created on ram and files might have write access (say for some hardware configurations). You can find things like:\nIRQs (interrupt requests)\nI/O ports (locations in memory where CPU can talk with devices)\nDMA (direct memory access, faster than I/O ports)\nProcesses\nNetwork Settings\n...\n$\nls\n/\nproc\n/\n1\n1249\n1451\n1565\n18069\n20346\n2426\n2765\n2926\n3175\n3317\n3537\n39\n468\n4921\n53\n689\n969\nfilesystems\nmisc\nsysvipc\n10\n13\n146\n157\n18093\n20681\n2452\n2766\n2929\n3183\n3318\n354\n397\n4694\n4934\n538\n7\n97\nfs\nmodules\ntimer_list\n1039\n1321\n147\n1572\n18243\n21\n2456\n28\n2934\n3187\n34\n3541\n404\n4695\n4955\n54\n737\nacpi\ninterrupts\nmounts\ntimer_stats\n10899\n13346\n148\n1576\n18274\n21021\n2462\n2841\n2936\n3191\n3450\n3550\n41\n47\n4970\n546\n74\nasound\niomem\nmtrr\ntty\n10960\n13438\n14817\n158\n1859\n21139\n25\n2851\n2945\n32\n3459\n357\n42\n4720\n4982\n55\n742\nbuddyinfo\nioports\nnet\nuptime\n11\n13619\n149\n16\n18617\n2129\n2592\n2852\n2947\n3202\n3466\n36\n43\n4731\n4995\n551\n75\nbus\nirq\npagetypeinfo\nversion\n11120\n13661\n15\n1613\n18781\n214\n26\n2862\n2948\n3206\n3467\n3683\n44\n4756\n5\n56\n77\ncgroups\nkallsyms\npartitions\nversion_signature\n11145\n13671\n150\n1630\n1880\n215\n27\n2865\n2952\n3208\n3469\n3699\n4484\n4774\n50\n577\n8\ncmdline\nkcore\nsched_debug\nvmallocinfo\n1159\n13927\n151\n1633\n1882\n2199\n2707\n2866\n2955\n3212\n3470\n37\n4495\n4795\n5008\n5806\n892\nconsoles\nkeys\nschedstat\nvmstat\n1163\n14\n1512\n1634\n19\n22\n2708\n2884\n2957\n3225\n3474\n3710\n45\n48\n5013\n60\n9\ncpuinfo\nkey\n-\nusers\nscsi\nzoneinfo\n1164\n14045\n1515\n1693\n19061\n2219\n2709\n2887\n2961\n3236\n3475\n3752\n4506\n4811\n5077\n61\n904\ncrypto\nkmsg\nself\n1170\n14047\n152\n17\n19068\n23\n2710\n2891\n3\n324\n3477\n3761\n4529\n4821\n5082\n62\n9061\ndevices\nkpagecount\nslabinfo\n1174\n14052\n153\n17173\n19069\n23055\n2711\n2895\n3047\n3261\n3517\n3778\n4558\n484\n5091\n677\n915\ndiskstats\nkpageflags\nsoftirqs\n12\n1409\n154\n1732\n19075\n2354\n2718\n29\n3093\n3284\n3522\n38\n4562\n4861\n51\n678\n923\ndma\nloadavg\nstat\n1231\n1444\n155\n17413\n2\n2390\n2719\n2904\n31\n3287\n3525\n3803\n46\n4891\n52\n679\n939\ndriver\nlocks\nswaps\n1234\n1446\n156\n17751\n20\n24\n2723\n2908\n3132\n3298\n3528\n3823\n4622\n49\n5202\n680\n940\nexecdomains\nmdstat\nsys\n1236\n145\n1563\n18\n2028\n2418\n2763\n2911\n3171\n33\n3533\n3845\n4661\n4907\n525\n687\n96\nfb\nmeminfo\nsysrq\n-\ntrigger\nThe numbers are the process IDs! There are also other files like\ncpuinfo\n,\nmounts\n,\nmeminfo\n, ...\n$\ncat\n/proc/cpuinfo\nprocessor\n:\n0\nvendor_id\n:\nGenuineIntel\ncpu\nfamily\n:\n6\nmodel\n:\n42\nmodel\nname\n:\nIntel\n(\nR\n)\nCore\n(\nTM\n)\ni5-2520M\nCPU\n@\n2\n.50GHz\nstepping\n:\n7\nmicrocode\n:\n0x15\ncpu\nMHz\n:\n3195\n.312\ncache\nsize\n:\n3072\nKB\nphysical\nid\n:\n0\nsiblings\n:\n4\ncore\nid\n:\n0\ncpu\ncores\n:\n2\napicid\n:\n0\ninitial\napicid\n:\n0\nfpu\n:\nyes\nfpu_exception\n:\nyes\ncpuid\nlevel\n:\n13\nwp\n:\nyes\nflags\n:\nfpu\nvme\nde\npse\ntsc\nmsr\npae\nmce\ncx8\napic\nsep\nmtrr\npge\nmca\ncmov\npat\npse36\nclflush\ndts\nacpi\nmmx\nfxsr\nsse\nsse2\nss\nht\ntm\npbe\nsyscall\nnx\nrdtscp\nlm\nconstant_tsc\narch_perfmon\npebs\nbts\nnopl\nxtopology\nnonstop_tsc\naperfmperf\neagerfpu\npni\npclmulqdq\ndtes64\nmonitor\nds_cpl\nvmx\nsmx\nest\ntm2\nssse3\ncx16\nxtpr\npdcm\npcid\nsse4_1\nsse4_2\nx2apic\npopcnt\ntsc_deadline_timer\naes\nxsave\navx\nlahf_lm\nida\narat\nepb\nxsaveopt\npln\npts\ndtherm\ntpr_shadow\nvnmi\nflexpriority\nept\nvpid\nbogomips\n:\n4983\n.79\nclflush\nsize\n:\n64\ncache_alignment\n:\n64\naddress\nsizes\n:\n36\nbits\nphysical,\n48\nbits\nvirtual\npower\nmanagement:\nprocessor\n:\n1\nvendor_id\n:\nGenuineIntel\ncpu\nfamily\n:\n6\nmodel\n:\n42\nmodel\nname\n:\nIntel\n(\nR\n)\nCore\n(\nTM\n)\ni5-2520M\nCPU\n@\n2\n.50GHz\nstepping\n:\n7\nmicrocode\n:\n0x15\ncpu\nMHz\n:\n3010\n.839\ncache\nsize\n:\n3072\nKB\nphysical\nid\n:\n0\nsiblings\n:\n4\ncore\nid\n:\n0\ncpu\ncores\n:\n2\napicid\n:\n1\ninitial\napicid\n:\n1\nfpu\n:\nyes\nfpu_exception\n:\nyes\ncpuid\nlevel\n:\n13\nwp\n:\nyes\nflags\n:\nfpu\nvme\nde\npse\ntsc\nmsr\npae\nmce\ncx8\napic\nsep\nmtrr\npge\nmca\ncmov\npat\npse36\nclflush\ndts\nacpi\nmmx\nfxsr\nsse\nsse2\nss\nht\ntm\npbe\nsyscall\nnx\nrdtscp\nlm\nconstant_tsc\narch_perfmon\npebs\nbts\nnopl\nxtopology\nnonstop_tsc\naperfmperf\neagerfpu\npni\npclmulqdq\ndtes64\nmonitor\nds_cpl\nvmx\nsmx\nest\ntm2\nssse3\ncx16\nxtpr\npdcm\npcid\nsse4_1\nsse4_2\nx2apic\npopcnt\ntsc_deadline_timer\naes\nxsave\navx\nlahf_lm\nida\narat\nepb\nxsaveopt\npln\npts\ndtherm\ntpr_shadow\nvnmi\nflexpriority\nept\nvpid\nbogomips\n:\n4983\n.79\nclflush\nsize\n:\n64\ncache_alignment\n:\n64\naddress\nsizes\n:\n36\nbits\nphysical,\n48\nbits\nvirtual\npower\nmanagement:\nWe can also write here. Since I'm on an IBM Lenovo laptop I can turn my LED on and off by writing here:\nroot\n@funlife\n:\n/\nproc\n/\nacpi\n/\nibm\n#\necho\non\n>\nlight\nroot\n@funlife\n:\n/\nproc\n/\nacpi\n/\nibm\n#\necho\noff\n>\nlight\nOne more traditional example is changing the max number of open files per user:\nroot\n@funlife\n:\n/\nproc\n/\nsys\n/\nfs\n#\ncat\nfile\n-\nmax\n797946\nroot\n@funlife\n:\n/\nproc\n/\nsys\n/\nfs\n#\necho\n1000000\n>\nfile\n-\nmax\nroot\n@funlife\n:\n/\nproc\n/\nsys\n/\nfs\n#\ncat\nfile\n-\nmax\n1000000\nAnother very useful directory here, is\n/proc/sys/net/ipv4\nwhich controls real-time networking configurations.\nAll these changes will be reverted after a boot. You have to write into config files in\n/etc/\nto make these changes permanent\nTry yourself! Check the\n/proc/ioports\nor\n/proc/dma\nor\n/proc/iomem\n.\nlsusb, lspci, lsblk, lshw\nJust like\nls\nbut for pci, usb, ...\nlspci\nShows PCI devices that are connected to the computer.\n# lspci\n00\n:\n00.0\nHost\nbridge\n:\nIntel\nCorporation\n2\nnd\nGeneration\nCore\nProcessor\nFamily\nDRAM\nController\n(\nrev\n09\n)\n00\n:\n02.0\nVGA\ncompatible\ncontroller\n:\nIntel\nCorporation\n2\nnd\nGeneration\nCore\nProcessor\nFamily\nIntegrated\nGraphics\nController\n(\nrev\n09\n)\n00\n:\n16.0\nCommunication\ncontroller\n:\nIntel\nCorporation\n6\nSeries\n/\nC200\nSeries\nChipset\nFamily\nMEI\nController\n#\n1\n(\nrev\n04\n)\n00\n:\n19.0\nEthernet\ncontroller\n:\nIntel\nCorporation\n82579L\nM\nGigabit\nNetwork\nConnection\n(\nrev\n04\n)\n00\n:\n1\na\n.0\nUSB\ncontroller\n:\nIntel\nCorporation\n6\nSeries\n/\nC200\nSeries\nChipset\nFamily\nUSB\nEnhanced\nHost\nController\n#\n2\n(\nrev\n04\n)\n00\n:\n1\nb\n.0\nAudio\ndevice\n:\nIntel\nCorporation\n6\nSeries\n/\nC200\nSeries\nChipset\nFamily\nHigh\nDefinition\nAudio\nController\n(\nrev\n04\n)\n00\n:\n1\nc\n.0\nPCI\nbridge\n:\nIntel\nCorporation\n6\nSeries\n/\nC200\nSeries\nChipset\nFamily\nPCI\nExpress\nRoot\nPort\n1\n(\nrev\nb4\n)\n00\n:\n1\nc\n.1\nPCI\nbridge\n:\nIntel\nCorporation\n6\nSeries\n/\nC200\nSeries\nChipset\nFamily\nPCI\nExpress\nRoot\nPort\n2\n(\nrev\nb4\n)\n00\n:\n1\nc\n.4\nPCI\nbridge\n:\nIntel\nCorporation\n6\nSeries\n/\nC200\nSeries\nChipset\nFamily\nPCI\nExpress\nRoot\nPort\n5\n(\nrev\nb4\n)\n00\n:\n1\nd\n.0\nUSB\ncontroller\n:\nIntel\nCorporation\n6\nSeries\n/\nC200\nSeries\nChipset\nFamily\nUSB\nEnhanced\nHost\nController\n#\n1\n(\nrev\n04\n)\n00\n:\n1f.0\nISA\nbridge\n:\nIntel\nCorporation\nQM67\nExpress\nChipset\nFamily\nLPC\nController\n(\nrev\n04\n)\n00\n:\n1f.2\nSATA\ncontroller\n:\nIntel\nCorporation\n6\nSeries\n/\nC200\nSeries\nChipset\nFamily\n6\nport\nSATA\nAHCI\nController\n(\nrev\n04\n)\n00\n:\n1f.3\nSMBus\n:\nIntel\nCorporation\n6\nSeries\n/\nC200\nSeries\nChipset\nFamily\nSMBus\nController\n(\nrev\n04\n)\n03\n:\n00.0\nNetwork\ncontroller\n:\nIntel\nCorporation\nCentrino\nWireless\n-\nN\n1000\n[\nCondor\nPeak\n]\n0\nd\n:\n00.0\nSystem\nperipheral\n:\nRicoh\nCo\nLtd\nMMC\n/\nSD\nHost\nController\n(\nrev\n07\n)\nlsusb\nShows all the USB devices connected to the system.\n# lsusb\nBus 002 Device 003: ID 1c4f:0026 SiGma Micro Keyboard\nBus 002 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub\nBus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\nBus 001 Device 005: ID 04f2:b217 Chicony Electronics Co., Ltd Lenovo Integrated Camera (0.3MP)\nBus 001 Device 004: ID 0a5c:217f Broadcom Corp. BCM2045B (BDC-2.1)\nBus 001 Device 003: ID 192f:0916 Avago Technologies, Pte.\nBus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub\nBus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\nlshw\nShows hardware. Might need root status to get the full list. Test it!\nlsblk\nUsed for list devices that can read from or write to by blocks of data.\nLoadable Kernel Modules\nLinux like any other OS needs drivers to work with hardware. In Microsoft Windows, you need to install the drivers separately but in Linux, the system has most of the drivers built-in. But to prevent the kernel from loading all of them at the same time and to decrease the Kernel size, Linux uses Kernel Modules. Loadable kernel modules (.ko files) are object files that are used to extend the kernel of the Linux Distribution. They are used to provide drivers for new hardware like IoT expansion cards that have not been included in the Linux Distribution.\nYou can inspect the modules using the\nlsmod\nor manage them via\nmodprobe\ncommands.\nlsmod\nShows kernel modules. They are located at\n/lib/modules\n.\nroot@funlife\n:\n/\ndev#\nlsmod\nModule\nSize\nUsed\nby\npci_stub\n12622\n1\nvboxpci\n23256\n0\nvboxnetadp\n25670\n0\nvboxnetflt\n27605\n0\nvboxdrv\n418013\n3\nvboxnetadp\n,\nvboxnetflt\n,\nvboxpci\nctr\n13049\n3\nccm\n17731\n3\ndm_crypt\n23172\n1\nbnep\n19543\n2\nrfcomm\n69509\n8\nuvcvideo\n81065\n0\narc4\n12608\n2\nvideobuf2_vmalloc\n13216\n1\nuvcvideo\nintel_rapl\n18783\n0\niwldvm\n236430\n0\nx86_pkg_temp_thermal\n14205\n0\nintel_powerclamp\n18786\n0\nbtusb\n32448\n0\nvideobuf2_memops\n13362\n1\nvideobuf2_vmalloc\nvideobuf2_core\n59104\n1\nuvcvideo\nv4l2_common\n15682\n1\nvideobuf2_core\nmac80211\n660592\n1\niwldvm\ncoretemp\n13441\n0\nvideodev\n149725\n3\nuvcvideo\n,\nv4l2_common\n,\nvideobuf2_core\nmedia\n21963\n2\nuvcvideo\n,\nvideodev\nbluetooth\n446190\n22\nbnep\n,\nbtusb\n,\nrfcomm\nkvm_intel\n143592\n0\nkvm\n459835\n1\nkvm_intel\nsnd_hda_codec_hdmi\n47547\n1\ncrct10dif_pclmul\n14307\n0\n6l\nowpan_iphc\n18702\n1\nbluetooth\ncrc32_pclmul\n13133\n0\nsnd_hda_codec_conexant\n23064\n1\nghash_clmulni_intel\n13230\n0\nsnd_hda_codec_generic\n68914\n1\nsnd_hda_codec_conexant\naesni_intel\n152552\n10\nsnd_seq_midi\n13564\n0\nsnd_seq_midi_event\n14899\n1\nsnd_seq_midi\naes_x86_64\n17131\n1\naesni_intel\nmei_me\n19742\n0\nlrw\n13287\n1\naesni_intel\niwlwifi\n183038\n1\niwldvm\nThese are the kernel modules that are loaded. Use\nmodinfo\nto get more info about a module; If you want.\nIf you need to add a module to your kernel (say a new driver for hardware) or remove it (uninstall a driver) you can use\nrmmod\nand\nmodprobe\n.\n# rmmod iwlwifi\nAnd this is for installing the modules:\n#\ninsmod\nkernel\n/\ndrivers\n/\nnet\n/\nwireless\n/\niwlwifi\n.\nko\nBut nobody uses\ninsmod\nbecause it does not understand dependencies and you need to give it the whole path to the module file. Instead, use the\nmodprobe\ncommand:\n# modprobe iwlwifi\nyou can use\n-f\nswitch to FORCE\nrmmod\nto remove the module even if it is in use\nIf you need to load some modules every time your system boots do one of the following:\nAdd their name to this file\n/etc/modules\nAdd their config files to the\n/etc/modprobe.d/\n← Prepare your Lab\nChapter List\n101.2 Boot the System →\nCategory\nLPIC1\nContact"
  },
  {
    "title": "101.2 Boot the System",
    "url": "https://linux1st.com./1012-boot-the-system.html",
    "extracted_title": "",
    "content": "Weight: 3\nCandidates should be able to guide the system through the booting process.\nKey Knowledge Areas\nProvide common commands to the boot loader and options to the kernel at boot time\nDemonstrate knowledge of the boot sequence from BIOS/UEFI to boot completion\nUnderstanding of SysVinit and systemd\nAwareness of Upstart\nCheck boot events in the log files\nTerms\ndmesg\njournalctl\nBIOS\nUEFI\nbootloader\nkernel\ninitramfs\ninit\nSysVinit\nsystemd\nThe Boot Process\nIt is important to understand because at this stage, you have very little control over the system and you can not issue commands to troubleshoot much. You should have a good understanding of what is happening.\nMotherboard Firmware does a PowerOnSelfTest(POST)\nMotherboard loads the bootloader\nBootloader loads the Linux Kernel-based on its configs/commands\nThe Kernel loads and prepares the system (root filesystem) and runs the initialization program\nInit program start the service such as web server, graphical interface, networking, etc.\nAs we discussed in the previous section (101.1), the Firmware on the motherboard can be BIOS or UEFI.\nBIOS\nBasic Input Output System\nOlder\nLimited to one sector of the disk and needs a multi-stage bootloader\nCan start the bootloader from internal/external HDD, CD/DVD, USB Flash drive, Network server\nIf booting from the HDD, the Master Boot Record will be used (1 sector)\nUEFI\nUnified Extensible Firmware Interface.\nModern and fancy\nSpecifies a special disk partition for the bootloader. Called EFI System Partition (ESP)\nESP is FAT and mounted on\n/boot/efi\nand bootloader files has\n.efi\nextensions\nYou can check\n/sys/firmware/efi\nto see if you are using a UEFI system or not\nBootloader\nBootloader initializes the minimum hardware needed to boot the system. then, it locates and runs the OS.\nTechnically you can point your UEFI to run anything you want but typically under GNU/Linux systems, we use GRUB. GRUB can be used to run any specific program you need but it generally runs the OS.\nKernel\nThe Kernel is the core of your operating system. it basically is LINUX itself. Your bootloader loads the kernel in the memory and runs it. But the kernel needs some initial info to start; Things like drivers which are necessary to work with the hardware. Those are stored in\ninitrd\nor\ninitramfs\nalongside the kernel and used during the boot.\nYou can also send parameters to the kernel during the boot using the Grub configs. For example, sending a 1 or S will result the system booting in single-user mode (recovery). Or you can force your graphics to work in 1024×768x24 mode by passing\nvga=792\nto the Kernel during the boot.\ndmesg\nLinux will show you the boot process logs during the boot. Some desktop systems hide this behind a fancy splash screen which you can hide using the\nEsc\nkey or press\nCtrl+Alt+F1\n.\ndue to several reasons which are beyond the scope of this course, the kernel saves it's own logs into the \"Kernel Ring Buffer\". after the compilation of the boot process, the syslog daemon collects the\nboot logs\nand stores them in\n/var/log/dmesg\n.\nto view all the logs including what has been logged after the boot process we use the\ndmesg\ncommand.\nWe can also use\njournalctl -k\nto check Kernel logs or use\njournalctl -b\nto check for boot logs (or even use\njournalctl -u kernel\nto see all previous logs too).\nIn addition to these, most systems keep the boot logs in a text-like file too and they can be found in\n/var/log/boot\nor\n/var/log/boot.log\nin Debian or Red-Hat based systems, respectively.\n/var/log/messages\nAfter the init process comes up, syslog daemon will log messages. It has timestamps and will persist during restarts.\nThe Kernel is still logging its messages in Kernel Buffer Ring\nin some systems, it might be called\n/var/log/syslog\nthere are many other logs at\n/var/log\ninit\nWhen the Kernel initialization is finished, its time to start other programs. To do so, the Kernel runs the Initialization Daemon process, and it takes care of starting other daemons, services, subsystems and programs. Using the init system one can say \"I need service A and then service B. Then I need C and D and E but do not start D unless the A and B are running\". The system admin can use the init system to stop and start the services later.\nThere are different init systems:\nSysVinit\nis based on Unix System V. Not being used much anymore but people loved it because it followed Unix philosophies. you may see it on older machines or even on recently installed ones.\nupstart\nwas an event-based replacement for the traditional init daemon developed by Canonical (The people behind Ubuntu). The goal of the project was to build a replacement for SysV when it got released in 2007. eventually, the project got discontinued due to the wide adoption of Systemd. Even Ubuntu uses Systemd these days, but upstart still can be found in google's ChromeOS.\nSystemd\nis the new replacement. It is hated by Linux elitists for not following Unix principles but it's widely adopted by major distros. It can start services in parallel and do lots of fancy stuff!\nThe init process had the ID of 1 and you can find it by running the\n# which init\n/sbin/init\n# readlink -f /sbin/init\n/usr/lib/systemd/systemd\n# ps -p 1\nPID TTY TIME     CMD\n1   ?   00:00:06 systemd\nYou can check the hierarchy of processes using the\npstree\ncommand.\npstree\nsystemd\nIs new, loved, and hated. Lots of new ideas but not following some of the beloved UNIX principles (say.. not saving logs in a text file or trying to help you too much but asking for the root password when you are not running commands with sudo). It lets us run services if the hardware is connected, in time intervals, if another service is started, and ...\nThe systemd is made around\nunits\n. A unit can be a service, group of services, or an action. Units do have a name, a type, and a configuration file. There are 12 unit types: automount, device, mount, path, scope, service, slice, snapshot, socket, swap, target & timer.\nWe use\nsystemctl\nto work with these units and\njournalctl\nto see the logs.\n#\nsystemctl\nlist\n-\nunits\n#\nsystemctl\nlist\n-\nunits\n--\ntype\n=\ntarget\n#\nsystemctl\nget\n-\ndefault\n#\ndefault\ntarget\n(\ngroups\nof\nservices\nare\nstarted\nvia\ntarget\nunit\nfiles\n)\nThe units can be found in these places (sorted by priority):\n/etc/systemd/system/\n/run/systemd/system/\n/usr/lib/systemd/system\n# systemctl list-unit-files\n# systemctl cat ntpd.service\n# systemctl cat graphical.target\nWe can use these commands to work with services:\n# systemctl stop sshd\n# systemctl start sshd\n# systemctl status sshd\n# systemctl is-active sshd\n# systemctl is-failed sshd\n# systemctl restart sshd\n# systemctl reload sshd # re-reads the configuration of the service configs\n# systemctl daemon-reload sshd # re-reads the configuration of the systemd configs of this service\n# systemctl enable sshd\n# systemctl disable sshd\nthere are other commands too:\n# systemctl is-system-running # running, degraded, maintenance, initializing, starting, stopping\n# systemctl --failed\nto check the logs, we have to use the\njournalctl\nutility:\n#\njournalctl # show all journal\n#\njournalctl --no-pager # do not use less\n#\njournalctl -n 10 # only 10 lines\n#\njournalctl -S -1d # last 1 day\n#\njournalctl -xe # last few logs\n#\njournalctl -u ntp # only ntp unit\n#\njournalctl _PID=1234\nSysV\nIs the older init system. Still can be used on many systems. The control files are located at\n/etc/init.d/\nand are closer to the general bash scripts. In many cases you can call like:\n/etc/init.d/ntpd status\n/etc/init.d/ntpd stop\n/etc/init.d/ntpd start\n/etc/init.d/ntpd restart\nWe will speak more about runlevels on 101.3.\n← 101.1 Determine and configure hardware settings\nChapter List\n101.3 Change runlevels / boot targets and shutdown or reboot the system →\nCategory\nLPIC1\nTags\nLPIC1\n42\nLPIC1-101-500\n22\nSystem Architecture\n2\nContact"
  },
  {
    "title": "101.3 Change runlevels / boot targets and shutdown or reboot the system",
    "url": "https://linux1st.com./1013-change-runlevels-boot-targets-and-shutdown-or-reboot-the-system.html",
    "extracted_title": "",
    "content": "Weight: 3\nDescription: Candidates should be able to manage the SysVinit runlevel or systemd boot target of the system. This objective includes changing to single-user mode, and shutdown or rebooting the system. Candidates should be able to alert users before switching runlevels / boot targets and properly terminate processes. This objective also includes setting the default SysVinit runlevel or systemd boot target. It also includes awareness of Upstart as an alternative to SysVinit or systemd.\nKey Knowledge Areas:\nSet the default runlevel or boot target.\nChange between runlevels / boot targets including single-user mode.\nShutdown and reboot from the command line.\nAlert users before switching runlevels / boot targets or other major system events.\nProperly terminate processes.\nAwareness of acpi.\nThe following is a partial list of the used files, terms and utilities:\n/etc/inittab\nshutdown\ninit\n/etc/init.d/\ntelinit\nsystemd\nsystemctl\n/etc/systemd/\n/usr/lib/systemd/\nwall\nrunlevels\nRunlevels define what tasks can be accomplished in the current state (or runlevel) of a Linux system. Think of it as different stages of\nbeing alive\n.\nsystemd\nOn systemd, we have different targets which are groups of services:\nroot\n@\ndebian\n:\n~\n# systemctl list-units --type=target # On a Debian machine\nUNIT\nLOAD\nACTIVE\nSUB\nDESCRIPTION\n---------------------------------------------------------\nbasic\n.\ntarget\nloaded\nactive\nactive\nBasic\nSystem\ncryptsetup\n.\ntarget\nloaded\nactive\nactive\nLocal\nEncrypted\nVolumes\ngetty\n.\ntarget\nloaded\nactive\nactive\nLogin\nPrompts\ngraphical\n.\ntarget\nloaded\nactive\nactive\nGraphical\nInterface\nlocal\n-\nfs\n-\npre\n.\ntarget\nloaded\nactive\nactive\nLocal\nFile\nSystems\n(\nPre\n)\nlocal\n-\nfs\n.\ntarget\nloaded\nactive\nactive\nLocal\nFile\nSystems\nmulti\n-\nuser\n.\ntarget\nloaded\nactive\nactive\nMulti\n-\nUser\nSystem\nnetwork\n.\ntarget\nloaded\nactive\nactive\nNetwork\npaths\n.\ntarget\nloaded\nactive\nactive\nPaths\nremote\n-\nfs\n.\ntarget\nloaded\nactive\nactive\nRemote\nFile\nSystems\nslices\n.\ntarget\nloaded\nactive\nactive\nSlices\nsockets\n.\ntarget\nloaded\nactive\nactive\nSockets\nsound\n.\ntarget\nloaded\nactive\nactive\nSound\nCard\nswap\n.\ntarget\nloaded\nactive\nactive\nSwap\nsysinit\n.\ntarget\nloaded\nactive\nactive\nSystem\nInitialization\ntime\n-\nset\n.\ntarget\nloaded\nactive\nactive\nSystem\nTime\nSet\ntime\n-\nsync\n.\ntarget\nloaded\nactive\nactive\nSystem\nTime\nSynchronized\ntimers\n.\ntarget\nloaded\nactive\nactive\nTimers\nAnd we can check the default one or get the status of each of them:\nroot\n@\ndebian\n:\n~\n# systemctl get-default\ngraphical\n.\ntarget\nroot\n@\ndebian\n:\n~\n# systemctl status multi-user.target\n●\nmulti\n-\nuser\n.\ntarget\n-\nMulti\n-\nUser\nSystem\nLoaded\n:\nloaded\n(\n/\nlib\n/\nsystemd\n/\nsystem\n/\nmulti\n-\nuser\n.\ntarget\n;\nstatic\n)\nActive\n:\nactive\nsince\nSat\n2022\n-\n05\n-\n07\n11\n:\n58\n:\n36\nEDT\n;\n4\nh\n24\nmin\nleft\nDocs\n:\nman\n:\nsystemd\n.\nspecial\n(\n7\n)\nIt is also possible to\nisolate\nany of the targets or move to two special targets too:\nrescue\n: Local file systems are mounted, no networking, and root-user only (\nmaintenance\nmode)\nemergency\n: Only the root file system and in read-only mode, No networking and root-user only(\nmaintenance\nmode)\nreboot\nhalt\n: Stops all processes and halts CPU activities\npoweroff\n: Like halt but also sends an ACPI shutdown signal (No lights!)\n#\nsystemctl\nisolate\nemergency\nWelcome\nto\nemergency\nmode\n!\nAfter\nlogging\nin\n,\ntype\n\"journalctl -xb\"\nto\nview\nsystem\nlogs\n,\n\"systemctl reboot\"\nto\nreboot\n,\n\"systemctl default\"\nor\n^\nD\nto\ntry\nagain\nto\nboot\ninto\ndefault\nmode\n.\nGive\nroot\npassword\nfor\nmaintenance\n(\nor\ntype\nControl\n-\nD\nto\ncontinue\n):\n#\n#\nsystemctl\nis\n-\nsystem\n-\nrunning\nmaintenance\nSysV runlevels\nOn SysV we were able to define different stages. On a Red Hat-based system we usually had 7:\n0- Shutdown\n1- Single-user mode (recovery); Also called S or s\n2- Multi-user without networking\n3- Multi-user with networking\n4- to be customized by the admin\n5- Multi-user with networking and graphics\n6- Reboot\nAnd in Debian based system we had:\n0- Shutdown\n1- Single-user mode\n2- Multi-user mode with graphics\n6- Reboot\nChecking status and setting defaults\nYou can check your current runlevel with\nrunlevel\ncommand. It comes from SysV era but still works on systemd systems.\nThe default was in\n/etc/inittab\ngrep \"^id:\" /etc/inittab #on initV systems\nid:5:initdefault:\nIt can also be done on grub kernel parameters.\nOr using the runlevel and\ntelinit\ncommand.\n# runlevel\nN 3\n# telinit 5\n# runlevel\n3 5\n# init 0 # shutdown the system\nYou can find the files in\n/etc/init.d\nand runlevels in\n/etc/rc[0-6].d\ndirectories where S indicates Start and K indicates Kill.\nOn systemd, you can find the configs in:\n/etc/systemd\n/usr/lib/systemd/\nAs discussed in 101.2\n/etc/inittab\nIs being replaced by upstart and systemd but is still part of the exam.\n#\n# inittab       This file describes how the INIT process should be set up\n#               the system in a certain run-level.\n#\n# Author:       Miquel van Smoorenburg, <\n[email protected]\n>\n#               Modified for RHS Linux by Marc Ewing and Donnie Barnes\n#\n# Default runlevel. The runlevels used by RHS are:\n#   0 - halt (Do NOT set initdefault to this)\n#   1 - Single-user mode\n#   2 - Multiuser, without NFS (The same as 3, if you do not have networking)\n#   3 - Full multiuser mode\n#   4 - unused\n#   5 - X11\n#   6 - reboot (Do NOT set initdefault to this)\n#\nid:5:initdefault:\n# System initialization.\nsi::sysinit:/etc/rc.d/rc.sysinit\nl0:0:wait:/etc/rc.d/rc 0\nl1:1:wait:/etc/rc.d/rc 1\nl2:2:wait:/etc/rc.d/rc 2\nl3:3:wait:/etc/rc.d/rc 3\nl4:4:wait:/etc/rc.d/rc 4\nl5:5:wait:/etc/rc.d/rc 5\nl6:6:wait:/etc/rc.d/rc 6\n# Trap CTRL-ALT-DELETE\nca::ctrlaltdel:/sbin/shutdown -t3 -r now\n# When our UPS tells us power has failed, assume we have a few minutes\n# of power left.  Schedule a shutdown for 2 minutes from now.\n# This does, of course, assume you have powered installed and your\n# UPS connected and working correctly.\npf::powerfail:/sbin/shutdown -f -h +2 \"Power Failure; System Shutting Down\"\n# If power was restored before the shutdown kicked in, cancel it.\npr:12345:powerokwait:/sbin/shutdown -c \"Power Restored; Shutdown Cancelled\"\n# Run gettys in standard runlevels\n1:2345:respawn:/sbin/mingetty tty1\n2:2345:respawn:/sbin/mingetty tty2\n3:2345:respawn:/sbin/mingetty tty3\n4:2345:respawn:/sbin/mingetty tty4\n5:2345:respawn:/sbin/mingetty tty5\n6:2345:respawn:/sbin/mingetty tty6\n# Run xdm in runlevel 5\nx:5:respawn:/etc/X11/prefdm -nodaemon\nThis is the format:\nid:runlevels:action:process\nid: 2 or 3 chars\nrunlevels: Which runlevel this commands refers to (empty means all)\naction: Respawn, wait, once, initdefault (default run level as seen above), ctrlaltdel (What to do with Ctrl+Alt+Delete)\nAll scripts are here:\nls -ltrh /etc/init.d\nAnd start/stop on runlevels are controlled from these directories:\nroot@funlife:~# ls /etc/rc2.d/\nStopping the system\nThe preferred method to shut down or reboot the system is to use the\nshutdown\ncommand, which first sends a warning message to all logged-in users and blocks any further non-root logins. It then signals init to switch runlevels. The init process then sends all running processes a SIGTERM signal, giving them a chance to save data or otherwise properly terminate. After 1 minute or another delay, if specified, init sends a SIGKILL signal to forcibly end each remaining process.\nDefault is a 1-minute delay and then going to runlevel 1\n-h\nwill halt the system\n-r\nwill reboot the system\nTime is\nhh:mm\nor n (minutes) or now\nWhatever you add, will be broadcasted to logged-in users using the\nwall\ncommand\nIf the command is running, ctrl+c or the\nshutdown -c\nwill cancel it\nshutdown -r 60 Reloading updated kernel\nfor more advanced users:\n-t60 will delay 60 seconds between SIGTERM and SIGKILL\nif you cancel a shutdown, users will get the news\nHalt, reboot, and poweroff\nThe\nhalt\ncommand halts the system.\nThe\npoweroff\ncommand halts the system and then attempts to power it off.\nThe\nreboot\ncommand halts the system and then reboots it.\nOn most distros, these are symbolic links to the systemctl utility\nAdvanced Configuration and Power Interface (ACPI)\nACPI provides an open standard that operating systems can use to discover and configure computer hardware components, perform power management (e.g. putting unused hardware components to sleep), perform auto-configuration (e.g. Plug and Play, and hot-swapping), and perform status monitoring.\nThis subsystem lets OS commands (like shutdown) send signals to the computer which results in powering down of the whole PC. In older times we used to have these mechanical keyboards to do a\nreal\npower down after the OS has done its shutdown and told us that \"it is not safe to power down your computer\".\nNotifying users\nIt is good to be informed! Especially if the system is going down; Especially on a shared server. Linux has different tools for system admins to notify their users:\nwall\n: Sending\nwall messages\nto logged-in users\n/etc/issue\n: Text to be displayed on the tty terminal logins (before login)\n/etc/issue.net\n: Text to be displayed on the remote terminal logins (before login)\n/etc/motd\n: Message of the day (after login). Some companies add \"Do not enter if you are not allowed\" texts here for legal reasons.\nmesg\n: Command controls if you want to get wall messages or not. You can do\nmesg n\nand\nwho -T\nwill show mesg status. Note that\nshutdown\nwall messages do not respect the\nmesg\nstatus\nsystemctl sends wall messages for emergency, halt, power-off, reboot, and rescue\n← 101.2 Boot the System\nChapter List\n102.1 Design hard disk layout →\nCategory\nLPIC1\nTags\nLPIC1\n42\nLPIC1-101-500\n22\nSystem Architecture\n2\nContact"
  },
  {
    "title": "102.1 Design hard disk layout",
    "url": "https://linux1st.com./1021-design-hard-disk-layout.html",
    "extracted_title": "",
    "content": "Weight: 2\nDescription: Candidates should be able to design a disk partitioning scheme for a Linux system.\nKey Knowledge Areas\nAllocate filesystems and swap space to separate partitions or disks\nTailor the design to the intended use of the system\nEnsure the\n/boot\npartition conforms to the hardware architecture requirements for booting\nKnowledge of basic features of LVM\nThe following is a partial list of the used files, terms, and utilities:\n/\n(root) filesystem\n/var\nfilesystem\n/home\nfilesystem\n/boot\nfilesystem\nEFI System Partition (ESP)\nSwap space\nMount points\nPartitions\nBasics\nLike any contemporary OS, Linux uses\nfiles\nand\ndirectories\nto operate. But unlike\nWindows\n, it does not use A:, C:, D:, etc. In Linux, everything is in\n*one big tree\n, starting with\n/\n(called root). Any partition, disk, CD, USB, network drive, ... will be placed somewhere in this huge tree.\nNote: Most of external devices (USB, CD, ...) are mounted at\n/media/\nor\n/mnt/\n.\nUnix directories\nThis might be your enlightening moment in your Linux journey. Understanding\nFilesystem Hierarchy Standard (FHS)\ncan help you find your programs, configs, logs and more without having prior knowledge about them. The table below has been the standard the latest revision since 2015.\nDirectory\nDescription\nbin\nEssential command binaries\nboot\nStatic files of the boot loader\ndev\nDevice files\netc\nHost-specific system configuration\nhome\nHome directory of the users\nlib\nEssential shared libraries and kernel modules\nmedia\nMount point for removable media\nmnt\nMount point for mounting a filesystem temporarily\nopt\nAdd-on application software packages\nroot\nHome directory of the root user\nsbin\nEssential system binaries\nsrv\nData for services provided by this system\ntmp\nTemporary files, sometimes purged on each boot\nusr\nSecondary hierarchy\nvar\nVariable data (logs, ...)\nPartitions\nIn the Linux world, devices are defined at\n/dev/\nand for different types of disks, there are different naming conventions:\n- PATA (Obsolete):\n/dev/hdc\n- SATA (Serial ATA) & SCSI disks:\n/dev/sda\n- SD/emmc & bare NAND/NOR devices:\n/dev/mmcblk0\n& their partitions are available as:\n/dev/mmcblk0p0\n- NVME drives:\n/dev/nvme0\n& their partitions are available as:\n/dev/nvme0n1\nYou have to\nPARTITION\nthe disks, that is to create smaller parts on a big disk. These are self-contained sections on the main drive. OS sees these as standalone disks.  We recognize them as:\n- /dev/sd\na\n1 (first partition of the first SCSI disk)\n- /dev/hd\nb\n3 (3rd partition on the second disk)\nBIOS systems were using MBR and could have up to 4 partitions on each disk, although instead of creating 4 Primary partitions, you could create an Extended partition and define more Logical partitions inside it.\nNote: an Extended partition is just an empty box for creating Logical partitions inside it.\nSo:\n/dev/sda3\nis the 3rd primary partition on the first disk\n/dev/sdb5\nis the first logical partition on the second disk\n/dev/sda7\nis the 3rd logical partition of the first physical disk\nUEFI systems use GUID Partition Table (GPT) which supports 128 partitions on each device.\nIf you define an extended partition on a BIOS system, that will be\n/dev/sdx5\n(1-4 for primary, and the first extended will be 5).\nLinux systems can\nmount\nthese partitions on different paths. Say you can have a separated disk with one huge partition for your\n/home\nand another one for your\n/var/logs/\n.\n# fdisk /dev/sda\nWelcome to fdisk (util-linux 2.25.1).\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\nCommand (m for help): p\nDisk /dev/sda: 298.1 GiB, 320072933376 bytes, 625142448 sectors\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisklabel type: dos\nDisk identifier: 0x000beca1\nDevice     Boot     Start       End   Sectors   Size Id Type\n/dev/sda1  *         2048  43094015  43091968  20.6G 83 Linux\n/dev/sda2        43094016  92078390  48984375  23.4G 83 Linux\n/dev/sda3        92080126 625141759 533061634 254.2G  5 Extended\n/dev/sda5        92080128 107702271  15622144   7.5G 82 Linux swap / Solaris\n/dev/sda6       107704320 625141759 517437440 246.8G 83 Linux\nThe newer\nGUID Partition Table (or GPT)\nsolves these problems. If you format your disk with GPT you can have 128 primary partitions (no need for extended and logical).\nCommands\nparted\njadi@funlife:~$ sudo parted /dev/sda p\nModel: ATA ST320LT000-9VL14 (scsi)\nDisk /dev/sda: 320GB\nSector size (logical/physical): 512B/512B\nPartition Table: msdos\nDisk Flags:\nNumber  Start   End     Size    Type      File system     Flags\n1      1049kB  22.1GB  22.1GB  primary   ext4            boot\n2      22.1GB  47.1GB  25.1GB  primary   ext4\n3      47.1GB  320GB   273GB   extended\n5      47.1GB  55.1GB  7999MB  logical   linux-swap(v1)\n6      55.1GB  320GB   265GB   logical\nfdisk\n# sudo fdisk /dev/sda\n[sudo] password for jadi:\nWelcome to fdisk (util-linux 2.25.1).\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\nCommand (m for help): p\nDisk /dev/sda: 298.1 GiB, 320072933376 bytes, 625142448 sectors\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisklabel type: dos\nDisk identifier: 0x000beca1\nDevice     Boot     Start       End   Sectors   Size Id Type\n/dev/sda1  *         2048  43094015  43091968  20.6G 83 Linux\n/dev/sda2        43094016  92078390  48984375  23.4G 83 Linux\n/dev/sda3        92080126 625141759 533061634 254.2G  5 Extended\n/dev/sda5        92080128 107702271  15622144   7.5G 82 Linux swap / Solaris\n/dev/sda6       107704320 625141759 517437440 246.8G 83 Linux\nNote: parted does not understands GPT\ngparted\nA graphical tool for managing disks and partitions.\nLVM\nIn many cases, you need to resize your partitions or even install new disks and\nadd\nthem to your current mount points; Increasing the total size. LVM is designed for this.\nLVM helps you create one partition from different disks and add or remove space from/to them. The main concepts are:\nPhysical Volume (PV): A whole drive or a partition. It is better to define partitions and\nnot use whole disks - unpartitioned\n.\nVolume Groups (VG): This is the collection of one or more\nPV\ns. OS will see the vg as one big disk. PVs in one VG, can have different sizes or even be on different physical disks.\nLogical Volumes (LV): OS will see lvs as partitions. You can format an LV with your OS and use it.\nDesign Hard disk layout\nDisk layout and allocation partitions to directories depend on your usage. First, we will discuss\nswap\nand\nboot\nand then will see three different cases.\nswap\nSwap in Linux works like an extended memory. The Kernel will\npage\nmemory to this partition/file. It is enough to format one partition with\nswap file system\nand define it in\n/etc/fstab\n(you will see this later in 104 modules).\nNote: There is no strict formula for swap size. People used to say \"double the ram but not more than 8GB\". On recent machines with SSDs, some say \"RAM + 2\" (Hibernation + some extra ) or \"RAM * 2\" depending on your usage.\n/boot\nOlder Linux systems were not able to handle HUGE disks during boot (say Terabytes) so the\n/boot\npartition was separated. this separation comes in handy in situations such as  recovering broken systems. you can even make\n/boot\nread-only. Most of the time, having 100MB for\n/boot\nis enough. This partition can be on a different disk or a separated partition.\nThis partition should be accessible by BIOS/UEFI during boot (No network drive).\nOn UEFI systems, there is a\n/boot/efi\nmount point called EFI (Extensible Firmware Interface) system partition or ESP. This contains the bootloader and kernel and should be accessible by the UEFI firmware during boot.\nCase one: Desktop computer\nOn a desktop computer, it is good to have one swap, one\n/boot\n, and allocate all other space to\n/\n(root).\nCase two: Network workstation\nAs any other system\n/boot\nshould be local (a physical disk is connected to the machine) and most of the time, the\n/\n(root file system) is also local. But in a network station,\n/home\ncan be mounted from a network drive (NFS, SMB, SSH, ..). This lets users sit at any station, login, and have their own home mounted from a network drive. Swap can be mounted from network or local.\nCase three: Server\nOn servers\n/boot\nis still local and based on usage,\n/home\ncan be local or network. In many cases, we separate the\n/var\nbecause logs and many other files are there and being updated so it is good to separate it or even put it on more advanced storage (like RAID disks to prevent data loss). Some people also separate the\n/usr\nand write-protect it (read-only file systems) or even mount the\n/usr\nfrom the network so they can change/update one file on the network storage and all the servers will use the new file (You remember?\n/usr\ncontains important executables like Apache webserver).\nBonus! know about zram\nHere I'll review the 3 different methods to add a\nswap\nto your OS. We will have a look at 3 different distros:\nDebian 11: Uses a swap partition\nUbuntu 22.04: Uses a swap file\nFedora 36: uses\nzram\nIn short,\nzram\nis a virtual disk on your RAM which can be used as swap space or be mounted anywhere you like; A common example is\n\\tmp\n. Let's see.\n← 101.3 Change runlevels / boot targets and shutdown or reboot the system\nChapter List\n102.2 Install a boot manager →\nCategory\nLPIC1\nTags\nLinux Installation and Package Management\n1\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "102.2 Install a boot manager",
    "url": "https://linux1st.com./1022-install-a-boot-manager.html",
    "extracted_title": "",
    "content": "Weight: 2\nDescription: Candidates should be able to select, install and configure a boot manager.\nObjectives\nProviding alternative boot locations and backup boot options.\nInstall and configure a boot loader such as GRUB Legacy.\nPerform basic configuration changes for GRUB 2.\nInteract with the boot loader\nTerms and Utilities\nmenu.lst\n,\ngrub.cfg\nand\ngrub.conf\ngrub-install\ngrub-mkconfig\nMBR\nBoot overview\nMost systems use BIOS or UEFI. When on BIOS, the system will do a self test called POST (Power-On Self-Test). Then it will hand over the boot process to the first sector of Master Boot Record (MBR) which is track (Cylinder) 0, side (Head) 0 and Sector 1 of the first disk.\nMBR is only 512 bytes so we need a\nsmart bootloader\nto handle larger boot managers and even multiple systems. Some of these boot loaders are LILO, GRUB and GRUB2.\nIf the system is using UEFI, the hardware will follow the UEFI stages. They start with a security phase and will continue till the end phase where the UEFI looks for an EFI System Partition, which is just a FAT32 partition (Usually the first one, but that's implementation-defined) with PE executables and runs them.\nIn both cases, the binary starts the boot loader. It might be a complete bootloader on\n/boot/efi/\nof your computer or a small loader for the main grub on the MBR or a windows loader or even a chainloader.\nChain Loading is when a boot loader, loads another boot loader. This is done when a Linux bootloader needs to start a Windows system.\nGRUB\nGRUB\n(\nGR\nand\nU\nnified\nB\nootloader) started to replace the older LILO. The first version (1) is called Grub Legacy and started in 1999. The 2nd version started in 2005 and is a complete rewrite of version 1.\nIt's a menu-based system where you can choose which Kernel or chainloader to boot. It is also possible to edit the menus on the fly or give direct commands from a command line.\nGrub Legacy\nUsually the GRUB v1 (actually 0.9) is installed in\n/boot/grub\n. Its main configuration is in\n/boot/grub/menu.lst\nbut nowadays some distros (including RedHat Based ones) link this to the\n/boot/grub/grub.conf\n.\nA sample\nmenu.lst\n/\ngrub.conf\nfile for GRUB legacy consists of two sections. The first section contains global configs and the 2nd part defines different kernel/initram or chainloader options.\nThe global configs are:\nConfig\nDescription\n#\nComment\ncolor\nForeground and background colors for normal and active items\ndefault\nWhich boot menu item is the default\nfallback\nWhich boot menu should be used if the\ndefault\nfails\nhiddenmenu\nHide the menu options\nsplashimage\nShow this image in the background!\ntimeout\nWait this much and then start the default\npassword\nSecurity is important! Will ask this password\nsavedefault\nRemember the last booted item\nOn the second part of the config, we have these:\nConfig\nDescription\ntitle\nDefines the section name\nroot\nDisk and partition where\n/boot\ndirectory is. In the form of (hddrive, partition), say (hd0, 0) or (hd0, msdos0)\nkernel\nKernel image file name in\n/boot\ninitrd\nInitramfs file in\n/boot\nrootnoverify\nDefines a non-Linux root partition\nchainloader\nAnother file will act as stage 1 loader. Used for booting Windows systems\nHere you can see a sample of GRUB-Legacy config:\n# grub.conf generated by anaconda\n#\n# Note that you do not have to rerun grub after making changes to this file\n# NOTICE:  You do not have a /boot partition.  This means that\n#          all kernel and initrd paths are relative to /, eg.\n#          root (hd0,5)\n#          kernel /boot/vmlinuz-version ro root=/dev/sda6\n#          initrd /boot/initrd-version.img\n#boot=/dev/sda6\ndefault=1\ntimeout=10\nsplashimage=(hd0,5)/boot/grub/splash.xpm.gz\n#hiddenmenu\npassword --md5 $1$RW1VW/$4XGAklxB7/GJk0uO47Srx1\ntitle Upgrade to Fedora 11 (Leonidas)\nkernel /boot/upgrade/vmlinuz preupgrade \\\nrepo=hd::/var/cache/yum/preupgrade stage2=\\\nhd:UUID=8b4c62e7-2022-4288-8995-5eda92cd149b:/boot/upgrade/install.img \\\nks=hd:UUID=8b4c62e7-2022-4288-8995-5eda92cd149b:/boot/upgrade/ks.cfg\ninitrd /boot/upgrade/initrd.img\ntitle Fedora (2.6.26.8-57.fc8)\nroot (hd0,5)\nkernel /boot/vmlinuz-2.6.26.8-57.fc8 ro root=LABEL=FEDORA8 rhgb quiet\ninitrd /boot/initrd-2.6.26.8-57.fc8.img\ntitle Fedora (2.6.26.6-49.fc8)\nroot (hd0,5)\nkernel /boot/vmlinuz-2.6.26.6-49.fc8 ro root=LABEL=FEDORA8 rhgb quiet\ninitrd /boot/initrd-2.6.26.6-49.fc8.img\ntitle GRUB Menu\nrootnoverify (hd0,1)\nchainloader +1\ntitle Windows\nrootnoverify (hd0,0)\nchainloader +1\nGRUB (legacy) commands\nAfter creating the configuration, you need to install the grub on a disk MBR. To do this you can use two different formats:\n# grub-install /dev/fd0\n# grub-install '(fd0)'\nJust like any other boot manager, you can install grub on a CD, floppy, MBR (\n/dev/sda\n,\n/dev/sdb\n, ..) or a partition (\n/dev/sdb2\n,\n/dev/sda6\n, ..). But if you want to install it on anywhere other than the MBR, use a chainloader to point your boot sequence toward it.\nIf you needed to change or reconfigure anything during the startup, just press the\ne\non that item and you'll get an interactive editing environment. Press\nEnter\nwhen done and\nb\nfor boot.\nInteracting with GRUB Legacy\nIf you press\nc\non the grub menu, you will go into the\nGRUB Command Line\nor\nGRUB shell\n. There you can type commands like\nroot\nand\nkernel\nand\ninitrd\nand boot the system with\nboot\nor press the\nEsc\nkey to return back to the menu.\nGRUB2\nThis is the most common boot loader these days. On BIOS systems it is installed on\n/boot/grub/\nor\n/boot/grub2/\nand under UEFI it goes in\n/boot/efi/EFI/distro-name/\n(say\n/boot/efi/EFI/fedora/\n). GRUB2's configuration file is called\ngrub.cfg\n.\nHere is a simplified\ngrub.cfg\n:\nset\ndefault\n=\n\"0\"\nmenuentry\n\"Fedora\"\n{\nset\nroot\n=\n(\nhd0\n,\n1\n)\nlinux\n/\nboot\n/\nvmlinuz\n-\n5.10\n.\n0\n-\n9\n-\narm64\nro\nquiet\ninitrd\n/\nboot\n/\ninitrd\n.\nimg\n-\n5.10\n.\n0\n-\n9\n-\narm64\n}\nmenuentry\n\"Windows\"\n{\nchainloader\n(\nhd1\n,\nmsdos2\n)\n+\n1\n}\nAs you can see, GRUB uses Linux-style numbering for partitions, so the first partition on the first hard disk is\n(hd0,1)\nor\n(hd0,msdos1)\nfor DOS partitions or\n(hd0,gpt1)\nfor GPT drives.\nHere you can see some of the options:\nOption\nDescription\nmenuentry\nDefines a new menuentry\nset root\nDefines the root where\n/boot\nlocated\nlinux, linux16\nDefines the location of the Linux kernel on BIOS systems\nlinuxefi\nDefines the Linux kernel on UEFI systems\ninitrd\nDefines the initramfs image for BIOS systems\ninitrdefi\nDefines the initramfs image for UEFI systems\nAnd here is a real-world\ngrub.cfg\n:\n#\n# DO NOT EDIT THIS FILE\n#\n# It is automatically generated by grub-mkconfig using templates\n# from /etc/grub.d and settings from /etc/default/grub\n#\n### BEGIN /etc/grub.d/00_header ###\nif\n[\n-\ns\n$\nprefix\n/\ngrubenv\n];\nthen\nset\nhave_grubenv\n=\ntrue\nload_env\nfi\nif\n[\n\"${next_entry}\"\n]\n;\nthen\nset\ndefault\n=\n\"${next_entry}\"\nset\nnext_entry\n=\nsave_env\nnext_entry\nset\nboot_once\n=\ntrue\nelse\nset\ndefault\n=\n\"0\"\nfi\nif\n[\nx\n\"${feature_menuentry_id}\"\n=\nxy\n];\nthen\nmenuentry_id_option\n=\n\"--id\"\nelse\nmenuentry_id_option\n=\n\"\"\nfi\nexport\nmenuentry_id_option\nif\n[\n\"${prev_saved_entry}\"\n];\nthen\nset\nsaved_entry\n=\n\"${prev_saved_entry}\"\nsave_env\nsaved_entry\nset\nprev_saved_entry\n=\nsave_env\nprev_saved_entry\nset\nboot_once\n=\ntrue\nfi\nfunction\nsavedefault\n{\nif\n[\n-\nz\n\"${boot_once}\"\n];\nthen\nsaved_entry\n=\n\"${chosen}\"\nsave_env\nsaved_entry\nfi\n}\nfunction\nload_video\n{\nif\n[\nx\n$\nfeature_all_video_module\n=\nxy\n];\nthen\ninsmod\nall_video\nelse\ninsmod\nefi_gop\ninsmod\nefi_uga\ninsmod\nieee1275_fb\ninsmod\nvbe\ninsmod\nvga\ninsmod\nvideo_bochs\ninsmod\nvideo_cirrus\nfi\n}\nif\n[\nx\n$\nfeature_default_font_path\n=\nxy\n]\n;\nthen\nfont\n=\nunicode\nelse\ninsmod\npart_gpt\ninsmod\next2\nif\n[\nx\n$\nfeature_platform_search_hint\n=\nxy\n];\nthen\nsearch\n--\nno\n-\nfloppy\n--\nfs\n-\nuuid\n--\nset\n=\nroot\ndf2d9e14\n-\nf1e9\n-\n4\nb1b\n-\n95\nd4\n-\n0167\ncaa2461e\nelse\nsearch\n--\nno\n-\nfloppy\n--\nfs\n-\nuuid\n--\nset\n=\nroot\ndf2d9e14\n-\nf1e9\n-\n4\nb1b\n-\n95\nd4\n-\n0167\ncaa2461e\nfi\nfont\n=\n\"/usr/share/grub/unicode.pf2\"\nfi\nif\nloadfont\n$\nfont\n;\nthen\nset\ngfxmode\n=\nauto\nload_video\ninsmod\ngfxterm\nset\nlocale_dir\n=$\nprefix\n/\nlocale\nset\nlang\n=\nen_US\ninsmod\ngettext\nfi\nterminal_output\ngfxterm\nif\n[\n\"${recordfail}\"\n=\n1\n]\n;\nthen\nset\ntimeout\n=\n30\nelse\nif\n[\nx\n$\nfeature_timeout_style\n=\nxy\n]\n;\nthen\nset\ntimeout_style\n=\nmenu\nset\ntimeout\n=\n5\n# Fallback normal timeout code in case the timeout_style feature is\n# unavailable.\nelse\nset\ntimeout\n=\n5\nfi\nfi\n### END /etc/grub.d/00_header ###\n### BEGIN /etc/grub.d/05_debian_theme ###\ninsmod\npart_gpt\ninsmod\next2\nif\n[\nx\n$\nfeature_platform_search_hint\n=\nxy\n];\nthen\nsearch\n--\nno\n-\nfloppy\n--\nfs\n-\nuuid\n--\nset\n=\nroot\ndf2d9e14\n-\nf1e9\n-\n4\nb1b\n-\n95\nd4\n-\n0167\ncaa2461e\nelse\nsearch\n--\nno\n-\nfloppy\n--\nfs\n-\nuuid\n--\nset\n=\nroot\ndf2d9e14\n-\nf1e9\n-\n4\nb1b\n-\n95\nd4\n-\n0167\ncaa2461e\nfi\ninsmod\npng\nif\nbackground_image\n/\nusr\n/\nshare\n/\ndesktop\n-\nbase\n/\nhomeworld\n-\ntheme\n/\ngrub\n/\ngrub\n-\n4\nx3\n.\npng\n;\nthen\nset\ncolor_normal\n=\nwhite\n/\nblack\nset\ncolor_highlight\n=\nblack\n/\nwhite\nelse\nset\nmenu_color_normal\n=\ncyan\n/\nblue\nset\nmenu_color_highlight\n=\nwhite\n/\nblue\nfi\n### END /etc/grub.d/05_debian_theme ###\n### BEGIN /etc/grub.d/10_linux ###\nfunction\ngfxmode\n{\nset\ngfxpayload\n=\n\"${1}\"\n}\nset\nlinux_gfx_mode\n=\nexport\nlinux_gfx_mode\nmenuentry\n'Debian GNU/Linux'\n--\nclass\ndebian\n--\nclass\ngnu\n-\nlinux\n--\nclass\ngnu\n--\nclass\nos\n$\nmenuentry_id_option\n'gnulinux-simple-df2d9e14-f1e9-4b1b-95d4-0167caa2461e'\n{\nload_video\ninsmod\ngzio\nif\n[\nx\n$\ngrub_platform\n=\nxxen\n];\nthen\ninsmod\nxzio\n;\ninsmod\nlzopio\n;\nfi\ninsmod\npart_gpt\ninsmod\next2\nif\n[\nx\n$\nfeature_platform_search_hint\n=\nxy\n];\nthen\nsearch\n--\nno\n-\nfloppy\n--\nfs\n-\nuuid\n--\nset\n=\nroot\ndf2d9e14\n-\nf1e9\n-\n4\nb1b\n-\n95\nd4\n-\n0167\ncaa2461e\nelse\nsearch\n--\nno\n-\nfloppy\n--\nfs\n-\nuuid\n--\nset\n=\nroot\ndf2d9e14\n-\nf1e9\n-\n4\nb1b\n-\n95\nd4\n-\n0167\ncaa2461e\nfi\necho\n'Loading Linux 5.10.0-9-arm64 ...'\nlinux\n/\nboot\n/\nvmlinuz\n-\n5.10\n.\n0\n-\n9\n-\narm64\nroot\n=\nUUID\n=\ndf2d9e14\n-\nf1e9\n-\n4\nb1b\n-\n95\nd4\n-\n0167\ncaa2461e\nro\nquiet\necho\n'Loading initial ramdisk ...'\ninitrd\n/\nboot\n/\ninitrd\n.\nimg\n-\n5.10\n.\n0\n-\n9\n-\narm64\n}\nsubmenu\n'Advanced options for Debian GNU/Linux'\n$\nmenuentry_id_option\n'gnulinux-advanced-df2d9e14-f1e9-4b1b-95d4-0167caa2461e'\n{\nmenuentry\n'Debian GNU/Linux, with Linux 5.10.0-9-arm64'\n--\nclass\ndebian\n--\nclass\ngnu\n-\nlinux\n--\nclass\ngnu\n--\nclass\nos\n$\nmenuentry_id_option\n'gnulinux-5.10.0-9-arm64-advanced-df2d9e14-f1e9-4b1b-95d4-0167caa2461e'\n{\nload_video\ninsmod\ngzio\nif\n[\nx\n$\ngrub_platform\n=\nxxen\n];\nthen\ninsmod\nxzio\n;\ninsmod\nlzopio\n;\nfi\ninsmod\npart_gpt\ninsmod\next2\nif\n[\nx\n$\nfeature_platform_search_hint\n=\nxy\n];\nthen\nsearch\n--\nno\n-\nfloppy\n--\nfs\n-\nuuid\n--\nset\n=\nroot\ndf2d9e14\n-\nf1e9\n-\n4\nb1b\n-\n95\nd4\n-\n0167\ncaa2461e\nelse\nsearch\n--\nno\n-\nfloppy\n--\nfs\n-\nuuid\n--\nset\n=\nroot\ndf2d9e14\n-\nf1e9\n-\n4\nb1b\n-\n95\nd4\n-\n0167\ncaa2461e\nfi\necho\n'Loading Linux 5.10.0-9-arm64 ...'\nlinux\n/\nboot\n/\nvmlinuz\n-\n5.10\n.\n0\n-\n9\n-\narm64\nroot\n=\n(\nhd0\n,\n1\n)\nro\nquiet\necho\n'Loading initial ramdisk ...'\ninitrd\n/\nboot\n/\ninitrd\n.\nimg\n-\n5.10\n.\n0\n-\n9\n-\narm64\n}\nmenuentry\n'Debian GNU/Linux, with Linux 5.10.0-8-arm64 (recovery mode)'\n--\nclass\ndebian\n--\nclass\ngnu\n-\nlinux\n--\nclass\ngnu\n--\nclass\nos\n$\nmenuentry_id_option\n'gnulinux-5.10.0-8-arm64-recovery-df2d9e14-f1e9-4b1b-95d4-0167caa2461e'\n{\nload_video\ninsmod\ngzio\nif\n[\nx\n$\ngrub_platform\n=\nxxen\n];\nthen\ninsmod\nxzio\n;\ninsmod\nlzopio\n;\nfi\ninsmod\npart_gpt\ninsmod\next2\nif\n[\nx\n$\nfeature_platform_search_hint\n=\nxy\n];\nthen\nsearch\n--\nno\n-\nfloppy\n--\nfs\n-\nuuid\n--\nset\n=\nroot\ndf2d9e14\n-\nf1e9\n-\n4\nb1b\n-\n95\nd4\n-\n0167\ncaa2461e\nelse\nsearch\n--\nno\n-\nfloppy\n--\nfs\n-\nuuid\n--\nset\n=\nroot\ndf2d9e14\n-\nf1e9\n-\n4\nb1b\n-\n95\nd4\n-\n0167\ncaa2461e\nfi\necho\n'Loading Linux 5.10.0-8-arm64 ...'\nlinux\n/\nboot\n/\nvmlinuz\n-\n5.10\n.\n0\n-\n8\n-\narm64\nroot\n=\nUUID\n=\ndf2d9e14\n-\nf1e9\n-\n4\nb1b\n-\n95\nd4\n-\n0167\ncaa2461e\nro\nsingle\necho\n'Loading initial ramdisk ...'\ninitrd\n/\nboot\n/\ninitrd\n.\nimg\n-\n5.10\n.\n0\n-\n8\n-\narm64\n}\n}\n### END /etc/grub.d/10_linux ###\n### BEGIN /etc/grub.d/20_linux_xen ###\n### END /etc/grub.d/20_linux_xen ###\n### BEGIN /etc/grub.d/30_os-prober ###\n### END /etc/grub.d/30_os-prober ###\n### BEGIN /etc/grub.d/30_uefi-firmware ###\nmenuentry\n'System setup'\n$\nmenuentry_id_option\n'uefi-firmware'\n{\nfwsetup\n}\n### END /etc/grub.d/30_uefi-firmware ###\n### BEGIN /etc/grub.d/40_custom ###\n# This file provides an easy way to add custom menu entries.  Simply type the\n# menu entries you want to add after this comment.  Be careful not to change\n# the 'exec tail' line above.\n### END /etc/grub.d/40_custom ###\n### BEGIN /etc/grub.d/41_custom ###\nif\n[\n-\nf\n$\n{\nconfig_directory\n}\n/\ncustom\n.\ncfg\n];\nthen\nsource\n$\n{\nconfig_directory\n}\n/\ncustom\n.\ncfg\nelif\n[\n-\nz\n\"${config_directory}\"\n-\na\n-\nf\n$\nprefix\n/\ncustom\n.\ncfg\n];\nthen\nsource\n$\nprefix\n/\ncustom\n.\ncfg\n;\nfi\n### END /etc/grub.d/41_custom ###\nGRUB2 commands\nThe installation is done with\ngrub-install /dev/sda\nand after changing the config files, you need to issue\ngrub2-mkconfig\nor\ngrub-mkconfig\n. It reads the configuration files from\n/etc/grub.d/\nand\n/etc/default/grub/\nand create the\ngrub.cfg\nfile based on them. You run it like this:\ngrub2-mkconfig > /boot/grub2/grub.cfg\nor\ngrub2-mkconfig -o /boot/grub2/grub.cfg\nThere is also a command called\nupdate-grub\nas a frontend to\ngrub-mkconfig\nwhich runs\ngrub-mkconfig -o /boot/grub/grub.cfg\nPlease note that on some modern distros, you have both\ngrub\nand\ngrub2\ncommands available for compatibility reasons, and one links to the other.\nInteracting with GRUB2\nIf you press\nc\non the grub menu, you will go into the\nGRUB Command Line\nor\nGRUB shell\n. There you can type commands like\nroot\nand\nkernel\nand\ninitrd\nand boot the system with\nboot\nor press the\nEsc\nkey to return back to the menu.\nKernel boot parameters\nIn the above configs, we sent some parameters to the kernel like this:\nlinux   /boot/vmlinuz-5.10.0-9-arm64 root=/dev/sda1 ro  quiet\nThis tells the kernel to boot in\nReadOnly\nmode and does not show lots of logs during the boot (\nquiet\n).\nThese are some of the other options you may use:\nOption\nDescription\nconsole=\nSet the console\ndebug\nStart in debug mode\ninit=\nRun an specific program instead of the default init\ninitrd=\nUse this initrd\nro\nMount the root filesystem read only\nrw\nMount the root filesystem for read and write\nroot=\nUse this as the root filesystem\nselinux\nDisable\nselinux\non boot\nsingle,S,1,Single\nBoot in single user mode for troubleshooting (SysV)\nsystemd.unit=\nBoot in this systemd target\n← 102.1 Design hard disk layout\nChapter List\n102.3 Manage shared libraries →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "102.3 Manage shared libraries",
    "url": "https://linux1st.com./1023-manage-shared-libraries.html",
    "extracted_title": "",
    "content": "Weight: 1\nObjectives\nCandidates should be able to determine the shared libraries that executable programs depend on and install them when necessary.\nIdentify shared libraries.\nIdentify the typical locations of system libraries.\nLoad shared libraries.\nTerms and Utilities\nldd\nldconfig\n/etc/ld.so.conf\nLD_LIBRARY_PATH\nLinking\nWhen we write a program, we use libraries. For example, if you need to read text from standard input, you need to\nlink\na library that provides this. Think linking has two forms:\nStatic\nLinking is when you add this library to your executable program. In this method, your program size is big because it has all the needed libraries. One good advantage is your program can be run without being dependent on other programs/libraries.\nDynamic\nLinking is when you just say in your program \"We need this and that library to run this program\". This way your program is smaller but you need to install those libraries separately. This makes programs more secure (Because libraries can be updated centrally, and more advanced any improvement in a library will improve the whole program), and smaller.\nLinux dynamic libraries have names like\nlibLIBNAME.so.VERSION\nand are located at places like\n/lib*/\nand\n/usr/lib*/\n. On Windows, we call them Dynamic Linked Libraries (DLLs).\nDynamic linking is also called\nshared\nlibraries because all the programs are sharing one library which is separately installed.\nWhat libraries do I need\nLibraries related to system utilities are installed in\n/lib\nand\n/lib64\n(for 32bit and 64bit libraries) and libraries installed by other software will be located at\n/usr/lib\nand\n/usr/lib64\n.\nldd\nThe\nldd\ncommand helps you find:\nIf a program is dynamically or statically linked\nWhat libraries a program needs\nLet's have a look at two files:\n[jadi@fedora ~]$ ldd /sbin/ldconfig\nnot a dynamic executable\n[jadi@fedora ~]$ ldd /bin/ls\nlinux-vdso.so.1 (0x00007ffdd53eb000)\nlibselinux.so.1 => /lib64/libselinux.so.1 (0x00007f5cbc7b0000)\nlibcap.so.2 => /lib64/libcap.so.2 (0x00007f5cbc7a6000)\nlibc.so.6 => /lib64/libc.so.6 (0x00007f5cbc5a5000)\nlibpcre2-8.so.0 => /lib64/libpcre2-8.so.0 (0x00007f5cbc50f000)\n/lib64/ld-linux-x86-64.so.2 (0x00007f5cbc813es\nAs you can see,\nldd\ntells us that the\n/sbin/ldconfig\nis not dynamically linked but shows us the libraries needed by\n/bin/ls\n.\nSymbolic links for libraries\nIf you are writing a program and you use udev functions, you will ask for a library called\nlibudev.so.1\n. But a Linux distro, might call its version of udev library\nlibudev.so.1.4.0\n. How can we solve this problem? The answer is\nsymbolic links\n; You will learn more about them in the next chapters but for short, a symbolic name is a new name for the same file.\nI will check the same thing on my system. First I'll find where the\nlibudev.so.1\non my system is:\n# locate libudev.so.1\n/lib/i386-linux-gnu/libudev.so.1\n/usr/lib64/libudev.so.1.7.3\nAnd then will check that file:\n# ls -la /lib/i386-linux-gnu/libudev.so.1\nlrwxrwxrwx 1 root root    16 Nov 13 23:05 /lib/i386-linux-gnu/libudev.so.1 -> libudev.so.1.4.0\nAs you can see, this is a symbolic link pointing to the version of libudev I have installed (1.4.0) so even if a software says it needs libudev.so.1, my system will use its libusdev.so.1.4.0.\nDynamic library configs and cache\nAs with most other Linux tools, dynamic linking is also configured using a text config file. It is located at\n/etc/ld.so.conf\n. On an Ubuntu system it just points to other config files in\n/etc/ld.so.conf.d/\nbut all those lines can be included in the main file too:\n[jadi@fedora ~]$ cat /etc/ld.so.conf\ninclude ld.so.conf.d/*.conf\n[jadi@fedora ~]$ ls /etc/ld.so.conf.d/\nllvm13-x86_64.conf  pipewire-jack-x86_64.conf\n[jadi@fedora ~]$ cat /etc/ld.so.conf.d/llvm13-x86_64.conf\n/usr/lib64/llvm13/lib\nThe\nldconfig\ncommands processed all these files to make the loading of libraries faster. This command creates\nld.so.cache\nto locate files that are to be dynamically loaded and linked.\nIf you change the\nld.so.conf\n(or sub-directories) you need to run\nldconfig\n. Try it with\n-v\nswitch to see the progress / data.\nTo close this section, let's run ldconfig with the\n-p\nswitch to see what is saved in ld.so.cache:\n[jadi@fedora ~]$ ldconfig -p | head\n1373 libs found in cache `/etc/ld.so.cache'\nlibzstd.so.1 (libc6,x86-64) => /lib64/libzstd.so.1\nlibzmf-0.0.so.0 (libc6,x86-64) => /lib64/libzmf-0.0.so.0\nlibzip.so.5 (libc6,x86-64) => /lib64/libzip.so.5\nlibzhuyin.so.13 (libc6,x86-64) => /lib64/libzhuyin.so.13\nlibzck.so.1 (libc6,x86-64) => /lib64/libzck.so.1\nlibz.so.1 (libc6,x86-64) => /lib64/libz.so.1\nlibyui.so.15 (libc6,x86-64) => /lib64/libyui.so.15\nlibyui-mga.so.15 (libc6,x86-64) => /lib64/libyui-mga.so.15\nlibyelp.so.0 (libc6,x86-64) => /lib64/libyelp.so.0\nAs you can see, this file tells the kernel that if anyone asks for\nlibzstd.so.1\n, the\n/lib64/libzstd.so.1\nfile should be loaded and used.\nWhere OS finds dynamic libraries\nWhen a program needs a shared library, the system will search files in this order:\nLD_LIBRARY_PATH environment variable\nPrograms PATH\n/etc/ld.so.conf\n(Which might load more files from\n/etc/ld.so.conf.d/\nin its beginning or its end)\n/lib/\n,\n/lib64/\n,\n/usr/lib/\n,\n/usr/lib64/\nIn some cases, you might need to override the default system libraries. Some examples are:\nYou are running an old software which needs an old version of a library.\nYou are developing a shared library and want to test it without installing it\nYou are running a specific program (say from opt) which needs to access its own libraries\nIn these cases, you can point the environment variable\nLD_LIBRARY_PATH\nto the library you need to use and then run your program. A colon (:) separated list of directories will tell your program where to search for needed libraries\nbefore\nchecking the libraries in\n/etc/ld.so.cache\n.\nFor example, if you give this command:\nexport  LD_LIBRARY_PATH=/usr/lib/myoldlibs:/home/jadi/lpic/libs/\nAnd then run any command, the system will search\n/usr/lib/myoldlibs\nand then\n/home/jadi/lpic/libs/\nbefore going to the main system libraries (defined in\n/etc/ld.so.cache\n). . .\nLoading dynamically\nIn the last part of this section, let's see how we can manually tell Linux to run a program using its\ndynamic linker\n. Its also called a dynamic loader and is used to load dynamic libraries needed by an executable. It might be called\nld\nor\nld-linux\n. You can find yours by running:\n[\njadi@fedora ~\n]\n$\nlocate\nld\n-\nlinux\n/\nusr\n/\nlib64\n/\nld\n-\nlinux\n-\nx86\n-\n64.\nso\n.2\n/\nusr\n/\nshare\n/\nman\n/\nman8\n/\nld\n-\nlinux\n.8\n.\ngz\n/\nusr\n/\nshare\n/\nman\n/\nman8\n/\nld\n-\nlinux\n.\nso\n.8\n.\ngz\nand run programs using it like this:\n[\njadi\n@\nfedora\n~\n]\n$\n/\nusr\n/\nlib64\n/\nld\n-\nlinux\n-\nx86\n-\n64.\nso\n.\n2\n/\nusr\n/\nbin\n/\nls\nDesktop\nDocuments\nDownloads\nMusic\nPictures\nPublic\nTemplates\ntmp\nVideos\nDo you want to go deeper than LPIC1 and ask why you do not need to run\nld-linux\nwhen running a command? Because the executable you are running is a Linux ELF executable and if you check its inside, you can see that it says \"run this using ld-linux\":\n[\njadi\n@\nfedora\n~\n]\n$\nreadelf\n-\nWl\n/\nusr\n/\nbin\n/\nls\nElf\nfile\ntype\nis\nDYN\n(\nPosition\n-\nIndependent\nExecutable\nfile\n)\nEntry\npoint\n0x6c00\nThere\nare\n13\nprogram\nheaders\n,\nstarting\nat\noffset\n64\nProgram\nHeaders\n:\nType\nOffset\nVirtAddr\nPhysAddr\nFileSiz\nMemSiz\nFlg\nAlign\nPHDR\n0x000040\n0x0000000000000040\n0x0000000000000040\n0x0002d8\n0x0002d8\nR\n0x8\nINTERP\n0x000318\n0x0000000000000318\n0x0000000000000318\n0x00001c\n0x00001c\nR\n0x1\n[\nRequesting\nprogram\ninterpreter\n:\n/\nlib64\n/\nld\n-\nlinux\n-\nx86\n-\n64\n.\nso\n.2\n]\nLOAD\n0x000000\n0x0000000000000000\n0x0000000000000000\n0x003798\n0x003798\nR\n0x1000\nLOAD\n0x004000\n0x0000000000004000\n0x0000000000004000\n0x013c21\n0x013c21\nR\nE\n0x1000\nLOAD\n0x018000\n0x0000000000018000\n0x0000000000018000\n0x0074d8\n0x0074d8\nR\n0x1000\n[\n...\n]\n💀 There is a\nhack\nhere:\nYou can run any Linux executable even if its executable bit is not set!\njust run it using\nld-linux\nas we did a few lines above!\n← 102.2 Install a boot manager\nChapter List\n102.4 Use Debian package management →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "102.4 Use Debian package management",
    "url": "https://linux1st.com./1024-use-debian-package-management.html",
    "extracted_title": "",
    "content": "Weight: 3\nCandidates should be able to perform package management using the Debian package tools.\nInstall, upgrade and uninstall Debian binary packages.\nFind packages containing specific files or libraries which may or may not be installed.\nObtain package information like version, content, dependencies, package integrity, and installation status (Whether or not the package is installed).\nAwareness of apt.\nTerms and Utilities\n/etc/apt/sources.list\ndpkg\ndpkg-reconfigure\napt-get\napt-cache\nConcept of the package management system\nSome people think that on GNU/Linux we have to compile all the software we need manually. This is not the case in 99% of cases and never has been the case in the last 20 years. GNU/Linux is the predecessor of what we call the App Store these days. All major distros do have huge archives of pre-compiled software called their\nrepositories\nand some kind of a\npackage manager\nsoftware that takes care of searching these repositories, installing software from them, finding dependencies, installing them, resolving conflicts, and updating the system and installed software. Debian-based distros use\n.deb\nfiles as their \"packages\" and use tools like\napt-get\n,\ndpkg\n,\napt\n, and other tools to manage them.\nDebian packages are names like\nNAME-VERSION-RELEASE_ARCHITECTURE.deb\n; Say\ntmux_3.2a-4build1_amd64.deb\n.\nRepositories\nBut where did this package come from? How does the OS know where to look for this deb package? The answer is\nRepositories\n. Each distro has its repository of packages. It can be on a Disk, A network drive, a collection of DVDs, or most commonly, a network address on the Internet.\nOn debian systems, the main configuration locations are:\n*\n/etc/apt/sources.list\n*\n/etc/apt/sources.list.d/\njadi@lpicjadi:~$ cat /etc/apt/sources.list\n#deb cdrom:[Ubuntu 22.04 LTS _Jammy Jellyfish_ - Beta amd64 (20220329.1)]/ jammy main restricted\n# See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to\n# newer versions of the distribution.\ndeb http://us.archive.ubuntu.com/ubuntu/ jammy main restricted\n# deb-src http://us.archive.ubuntu.com/ubuntu/ jammy main restricted\n## Major bug fix updates produced after the final release of the\n## distribution.\ndeb http://us.archive.ubuntu.com/ubuntu/ jammy-updates main restricted\n# deb-src http://us.archive.ubuntu.com/ubuntu/ jammy-updates main restricted\n## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu\n## team. Also, please note that software in the universe WILL NOT receive any\n## review or updates from the Ubuntu security team.\ndeb http://us.archive.ubuntu.com/ubuntu/ jammy universe\n# deb-src http://us.archive.ubuntu.com/ubuntu/ jammy universe\ndeb http://us.archive.ubuntu.com/ubuntu/ jammy-updates universe\n# deb-src http://us.archive.ubuntu.com/ubuntu/ jammy-updates universe\n## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu\n## team, and may not be under a free license. Please satisfy yourself as to\n## your rights to use the software. Also, please note that the software in\n## multiverse WILL NOT receive any review or updates from the Ubuntu\n## security team.\ndeb http://us.archive.ubuntu.com/ubuntu/ jammy multiverse\n# deb-src http://us.archive.ubuntu.com/ubuntu/ jammy multiverse\ndeb http://us.archive.ubuntu.com/ubuntu/ jammy-updates multiverse\n# deb-src http://us.archive.ubuntu.com/ubuntu/ jammy-updates multiverse\n## N.B. software from this repository may not have been tested as\n## extensively as that contained in the main release, although it includes\n## newer versions of some applications which may provide useful features.\n## Also, please note that software in backports WILL NOT receive any review\n## or updates from the Ubuntu security team.\ndeb http://us.archive.ubuntu.com/ubuntu/ jammy-backports main restricted universe multiverse\n# deb-src http://us.archive.ubuntu.com/ubuntu/ jammy-backports main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu jammy-security main restricted\n# deb-src http://security.ubuntu.com/ubuntu jammy-security main restricted\ndeb http://security.ubuntu.com/ubuntu jammy-security universe\n# deb-src http://security.ubuntu.com/ubuntu jammy-security universe\ndeb http://security.ubuntu.com/ubuntu jammy-security multiverse\n# deb-src http://security.ubuntu.com/ubuntu jammy-security multiverse\n# This system was installed using small removable media\n# (e.g. netinst, live or single CD). The matching \"deb cdrom\"\n# entries were disabled at the end of the installation process.\n# For information about how to configure apt package sources,\n# see the sources.list(5) manual.\nUpdating sources information:\napt-get update\nThis will check all the sources in the configs and update the information about the latest software available there.\nThis won't actually\nUpgrade\nthe software. The\nUpdate\nwill only\nUpdate the information about the packages and not the packages themselves\n.\nInstalling packages\nSay you have heard about this amazing terminal multiplexer called\ntmux\nand you want to give it a try.\n$ tmux\nThe program 'tmux' is currently not installed. You can install it by typing:\nsudo apt-get install tmux\n$ which tmux\n$ type tmux\nbash: type: tmux: not found\nSo let's install it. If it's in the repositories it's enough to tell the package manager to install it:\napt-get install tmux\nNote that\napt-get install asked for confirmation (Y)\napt-get resolved\ndependencies\n, It knows what is needed to install this package and installs them\nDebian packages are something.deb\nIf you only want a dry-run/simulation:\napt-get install -s tmux\nand this will only download the files needed into the cache without installing them:\napt-get install --download-only tmux\nThe downloaded packages are stored as a cache in\n/var/cache/apt/archive/\n.\nIf you want to download only one specific package, you can do:\napt\n-\nget\ndownload\ntmux\nRemoving debian packages\napt-get remove tmux\nAnd if you want to remove automatically installed dependencies:\n$ apt-get autoremove tmux\nor even\n$ apt-get autoremove\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nThe following packages will be REMOVED:\nlinux-image-3.16.0-25-generic linux-image-extra-3.16.0-25-generic\n0 upgraded, 0 newly installed, 2 to remove, and 0 not upgraded.\nAfter this operation, 203 MB of disk space will be freed.\nDo you want to continue? [Y/n] y\nTo autoremove whatever is not needed anymore.\nNotes:\nRemoving a package will not remove its dependencies\nIf removing a dependency, you'll get a warning about what will be removed alongside this package\nSearching for packages\nIf you are using the apt suit, the search is done via\napt-cache\nor you can use the general\napt\n.\n$ apt-cache search \"tiny window\"\n$ apt search grub2\nUpgrading\nFor updating a single package:\napt-get install tzdata\nAnd for upgrading whatever is installed:\napt-get upgrade\nOr going to a new distribution:\napt-get dist-upgrade\nNote: like most other tools, you can configure the default configs at\n/etc/apt/apt.conf\nand there is a program apt-config for this purpose.\nReconfiguring packages\nDebian packages can have\nconfiguration actions\nthat will take after the package is installed. This is done by\ndebconf\n. For example, tzdata will ask you about the timezone settings after you installed it. If you want to\nreconfigure\na package that is already installed, you can use the\ndpkg-reconfigure\n:\ndpkg-reconfigure tzdata\nPackage information with dpkg\nThe underlying tool to work with\n.deb\nfiles is the\ndpkg\n. It is your to-go tool if you want to do manual actions on a deb package. The general format is:\ndpkg\n[\nOPTIONS\n]\nACTION\nPACKAGE\nSome common actions are:\nSwitch\nDescription\n-c or --contents\nShow the contents of a package\n-C or --audit\nSearch for broken installed packages and propose solutions\n--configure\nReconfigure an installed package\n-i or --install\nInstall or Upgrade a package; Wont resolve / install dependencies\n-I or --info\nShow Info\n-l or --list\nList all installed packages\n-L or --listfiles\nList all files related to this package\n-P or --purge\nRemove the package and its configuration files\n-r or --remove\nRemove the package; Keep the configurations\n-s or --status\nDisplay status of a package\n-S or --search\nSearch and see which package owns this file\nYou can check the contents:\njadi\n@lpicjadi\n:\n/\ntmp\n$\ndpkg\n--\ncontents\nbzr_2\n.7.0\n+\nbzr6622\n+\nbrz_all\n.\ndeb\ndrwxr\n-\nxr\n-\nx\nroot\n/\nroot\n0\n2019\n-\n09\n-\n19\n18\n:\n25\n.\n/\ndrwxr\n-\nxr\n-\nx\nroot\n/\nroot\n0\n2019\n-\n09\n-\n19\n18\n:\n25\n.\n/\nusr\n/\ndrwxr\n-\nxr\n-\nx\nroot\n/\nroot\n0\n2019\n-\n09\n-\n19\n18\n:\n25\n.\n/\nusr\n/\nshare\n/\ndrwxr\n-\nxr\n-\nx\nroot\n/\nroot\n0\n2019\n-\n09\n-\n19\n18\n:\n25\n.\n/\nusr\n/\nshare\n/\ndoc\n/\ndrwxr\n-\nxr\n-\nx\nroot\n/\nroot\n0\n2019\n-\n09\n-\n19\n18\n:\n25\n.\n/\nusr\n/\nshare\n/\ndoc\n/\nbzr\n/\n-\nrw\n-\nr\n--\nr\n--\nroot\n/\nroot\n404\n2019\n-\n09\n-\n19\n18\n:\n25\n.\n/\nusr\n/\nshare\n/\ndoc\n/\nbzr\n/\nNEWS\n.\nDebian\n.\ngz\n-\nrw\n-\nr\n--\nr\n--\nroot\n/\nroot\n1301\n2019\n-\n09\n-\n19\n18\n:\n25\n.\n/\nusr\n/\nshare\n/\ndoc\n/\nbzr\n/\nchangelog\n.\ngz\n-\nrw\n-\nr\n--r-- root/root      1769 2019-09-19 18:25 ./usr/share/doc/bzr/copyright\nOr install a deb package (without its dependencies) or check its status:\n$ dpkg -s bzr\nPackage: bzr\nStatus: deinstall ok config-files\nPriority: optional\nSection: vcs\nInstalled-Size: 102\nMaintainer: Ubuntu Developers <\n[email protected]\n>\nArchitecture: all\nVersion: 2.6.0+bzr6595-1ubuntu1\nConfig-Version: 2.6.0+bzr6595-1ubuntu1\nDepends: python-bzrlib (<= 2.6.0+bzr6595-1ubuntu1.1~), python-bzrlib (>= 2.6.0+bzr6595-1ubuntu1), python:any\nRecommends: python-gpgme\nSuggests: bzr-doc, bzrtools, python-bzrlib.tests\nBreaks: bzr-pqm (<< 1.4.0~bzr80), bzr-xmloutput (<< 0.8.8+bzr160), python-bzrlib (<< 2.4.0~beta3~)\nConffiles:\n/etc/bash_completion.d/bzr b8d9ca95521a7c5f14860e205a854da2\nDescription: easy to use distributed version control system\nBazaar is a distributed version control system designed to be easy to\nuse and intuitive, able to adapt to many workflows, reliable, and\neasily extendable.\n.\nPublishing of branches can be done over plain HTTP, that is, no special\nsoftware is needed on the server to host Bazaar branches. Branches can\nbe pushed to the server via sftp (which most SSH installations come\nwith), FTP, or over a custom and faster protocol if bzr is installed in\nthe remote end.\n.\nMerging in Bazaar is easy, as the implementation can avoid many\nspurious conflicts deals well with repeated merges between branches,\nand can handle modifications to renamed files correctly.\n.\nBazaar is written in Python and has a flexible plugin interface that\ncan be used to extend its functionality. Many plugins exist, providing\nuseful commands (bzrtools), graphical interfaces (qbzr), or native\ninteraction with Subversion branches (bzr-svn).\n.\nInstall python-paramiko if you are going to push branches to remote\nhosts with sftp, and python-pycurl if you'd like SSL certificates\nalways to be verified.\nHomepage: http://bazaar-vcs.org\nOriginal-Maintainer: Debian Bazaar Maintainers <\n[email protected]\n>\nOr even\npurge\nan installed package; Removing the package and all of its configurations. To Purge a package, use the\n-P\nor\n--purge\nswitch.\nThere is also\n-L\nto check the files and directories a package installed:\n$ dpkg -L bzr\n/.\n/usr\n/usr/bin\n/usr/bin/jcal\n/usr/share\n/usr/share/doc\n/usr/share/doc/jcal\n/usr/share/doc/jcal/README\n/usr/share/doc/jcal/copyright\n/usr/share/man\n/usr/share/man/man1\n/usr/share/man/man1/jcal.1.gz\n/usr/share/doc/jcal/changelog.Debian.gz\nand\n-S\nwill show which package installed the given file:\n$ dpkg -S /var/lib/mplayer/prefs/mirrors\nmplayer: /var/lib/mplayer/prefs/mirrors\nCommon apt-get options\nOption\nUsage\nautoclean\nRemoves unused packages\ncheck\nCheck db for issues\nclean\nClean the DB, you can do a\nclean all\nto clean everything and start afresh\ndist-upgrade\nChecks for new versions of the OS; Major upgrade\ninstall\nInstall or upgrade packages\nremove\nRemoves a package\nsource\nInstall the source of a package\nupdate\nUpdates the information about packages from repositories\nupgrade\nUpgrades all packages\nIn some cases a package is installed but without proper dependencies (say using\ndpkg\n) or an installation is interrupted for any reason. In these cases a\napt-get install -f\nmight help,\n-f\nis for\nfix broken\n.\nCommon apt-cache options\nOption\nUsage\ndepends\nShow dependencies\npkgnames\nShows all installed packages\nsearch\nSearch\nshowpkg\nShow information about a package\nstats\nShow statistics\nunmet\nShow unmet dependencies for all installed packages or the one you specified\nOther tools\nThere are even more tools, the tools with fancy GUIs or text-based tools and user interface tools like\naptitude\n.\n← 102.3 Manage shared libraries\nChapter List\n102.5 Use RPM and YUM package management →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "102.5 Use RPM and YUM package management",
    "url": "https://linux1st.com./1025-use-rpm-and-yum-package-management.html",
    "extracted_title": "",
    "content": "Weight: 3\nCandidates should be able to perform package management using RPM, YUM, and Zypper.\nKey Knowledge Areas\nInstall, re-install, upgrade and remove packages using RPM, YUM, and Zypper\nObtain information on RPM packages such as version, status, dependencies, integrity, and signatures\nDetermine what files a package provides, as well as find which package a specific file comes from\nAwareness of dnf\nThe following is a partial list of the used files, terms, and utilities:\nTerms and Utilities\nrpm\nrpm2cpio\n/etc/yum.conf\n/etc/yum.repos.d/\nyum\nzypper\nIntroduction\nRedHat Package Manager (RPM)\nand\nYellowDog Update Manager (YUM)\nare used by Fedora, RedHat, RHEL, CentOS, RocksOS, ... to manage packages. The package format is called RPM and can be managed by\nrpm\ntools but if you want to use the repositories to install, update, search, ... packages, or even upgrade the whole system, you can use the\nyum\ncommand. To have a deeper understanding of the repositories, please refer to the previous section (102.4); Here I assume that you know the concept.\nyum\nyum\nis the package manager used by RedHat-based systems. Its configuration files are located at\n/etc/yum.conf\nand\n/etc/yum.repos.d/\n. Below is a sample.\n#\ncat\n/\netc\n/\nyum\n.\nconf\n[\nmain\n]\ncachedir\n=/\nvar\n/\ncache\n/\nyum\n/\n$\nbasearch\n/\n$\nreleasever\nkeepcache\n=\n0\ndebuglevel\n=\n2\nlogfile\n=/\nvar\n/\nlog\n/\nyum\n.\nlog\nexactarch\n=\n1\nobsoletes\n=\n1\ngpgcheck\n=\n1\nplugins\n=\n1\ninstallonly_limit\n=\n3\nAnd here is a sample of an actual Repo file on a Fedora system:\n#\ncat\n/\netc\n/\nyum\n.\nrepos\n.\nd\n/\nfedora\n.\nrepo\n[\nfedora\n]\nname\n=\nFedora\n$\nreleasever\n-\n$\nbasearch\n#baseurl\n=\nhttp\n:\n//\ndownload\n.\nexample\n/\npub\n/\nfedora\n/\nlinux\n/\nreleases\n/\n$\nreleasever\n/\nEverything\n/\n$\nbasearch\n/\nos\n/\nmetalink\n=\nhttps\n:\n//\nmirrors\n.\nfedoraproject\n.\norg\n/\nmetalink\n?\nrepo\n=\nfedora\n-\n$\nreleasever\n&\narch\n=\n$\nbasearch\nenabled\n=\n1\ncountme\n=\n1\nmetadata_expire\n=\n7\nd\nrepo_gpgcheck\n=\n0\ntype\n=\nrpm\ngpgcheck\n=\n1\ngpgkey\n=\nfile\n:\n///\netc\n/\npki\n/\nrpm\n-\ngpg\n/\nRPM\n-\nGPG\n-\nKEY\n-\nfedora\n-\n$\nreleasever\n-\n$\nbasearch\nskip_if_unavailable\n=\nFalse\n[\nfedora-debuginfo\n]\nname\n=\nFedora\n$\nreleasever\n-\n$\nbasearch\n-\nDebug\n#baseurl\n=\nhttp\n:\n//\ndownload\n.\nexample\n/\npub\n/\nfedora\n/\nlinux\n/\nreleases\n/\n$\nreleasever\n/\nEverything\n/\n$\nbasearch\n/\ndebug\n/\ntree\n/\nmetalink\n=\nhttps\n:\n//\nmirrors\n.\nfedoraproject\n.\norg\n/\nmetalink\n?\nrepo\n=\nfedora\n-\ndebug\n-\n$\nreleasever\n&\narch\n=\n$\nbasearch\nenabled\n=\n0\nmetadata_expire\n=\n7\nd\nrepo_gpgcheck\n=\n0\ntype\n=\nrpm\ngpgcheck\n=\n1\ngpgkey\n=\nfile\n:\n///\netc\n/\npki\n/\nrpm\n-\ngpg\n/\nRPM\n-\nGPG\n-\nKEY\n-\nfedora\n-\n$\nreleasever\n-\n$\nbasearch\nskip_if_unavailable\n=\nFalse\n[\nfedora-source\n]\nname\n=\nFedora\n$\nreleasever\n-\nSource\n#baseurl\n=\nhttp\n:\n//\ndownload\n.\nexample\n/\npub\n/\nfedora\n/\nlinux\n/\nreleases\n/\n$\nreleasever\n/\nEverything\n/\nsource\n/\ntree\n/\nmetalink\n=\nhttps\n:\n//\nmirrors\n.\nfedoraproject\n.\norg\n/\nmetalink\n?\nrepo\n=\nfedora\n-\nsource\n-\n$\nreleasever\n&\narch\n=\n$\nbasearch\nenabled\n=\n0\nmetadata_expire\n=\n7\nd\nrepo_gpgcheck\n=\n0\ntype\n=\nrpm\ngpgcheck\n=\n1\ngpgkey\n=\nfile\n:\n///\netc\n/\npki\n/\nrpm\n-\ngpg\n/\nRPM\n-\nGPG\n-\nKEY\n-\nfedora\n-\n$\nreleasever\n-\n$\nbasearch\nskip_if_unavailable\n=\nFalse\nWe use yum like\nyum [OPTIONS] [COMMAND] [PACKAGE_NAME]\n.\nOne of the most important options is\n-y\nwhich says\nyes\nto the Y/N questions.\nAnd here you can find some of the commands:\nCommand\nDescription\nupdate\nUpdates the repositories and update the names of packages, or all if nothing is named\ninstall\nInstall a package\nreinstall\nReinstall a package\nlist\nShow a list of packages\ninfo\nShow information about a package\nremove\nRemoves an installed package\nsearch\nSearches repositories for packages\nprovides\nCheck which packages provide a specific file\nupgrade\nUpgrades packages and removes the obsolete ones\nlocalinstall\nInstall from a local rpm file\nlocalupdate\nUpdates from a local rpm file\ncheck-update\nChecks repositories for updates to the installed packages\ndeplist\nShows dependencies of a package\ngroupinstall\nInstall a group, say \"KDE Plasma Workspaces\"\nhistory\nShow history of the usage\nThis is a sample installation:\n# yum install bzr\nLast\nmetadata\nexpiration\ncheck\n:\n0\n:\n00\n:\n47\nago\non\nTue\n21\nJun\n2022\n06\n:\n38\n:\n00\nPM\n+\n0430.\nDependencies\nresolved\n.\n=====================================================================================================================\nPackage\nArchitecture\nVersion\nRepository\nSize\n=====================================================================================================================\nInstalling\n:\nbreezy\nx86_64\n3.2\n.\n1\n-\n3.\nfc36\nfedora\n6.0\nM\nInstalling\ndependencies\n:\nlibsodium\nx86_64\n1.0\n.\n18\n-\n9.\nfc36\nfedora\n163\nk\npython3\n-\nbcrypt\nx86_64\n3.2\n.\n2\n-\n1.\nfc36\nupdates\n43\nk\npython3\n-\ncertifi\nnoarch\n2021.10\n.\n8\n-\n1.\nfc36\nfedora\n15\nk\npython3\n-\nconfigobj\nnoarch\n5.0\n.\n6\n-\n27.\nfc36\nfedora\n63\nk\npython3\n-\ncryptography\nx86_64\n36.0\n.\n0\n-\n3.\nfc36\nfedora\n1.0\nM\npython3\n-\ndulwich\nx86_64\n0.20\n.\n32\n-\n1.\nfc36\nfedora\n408\nk\npython3\n-\nhttplib2\nnoarch\n0.20\n.\n3\n-\n2.\nfc36\nfedora\n122\nk\npython3\n-\njeepney\nnoarch\n0.7\n.\n1\n-\n2.\nfc36\nfedora\n324\nk\npython3\n-\njwt\nnoarch\n2.4\n.\n0\n-\n1.\nfc36\nupdates\n41\nk\npython3\n-\nkeyring\nnoarch\n23.6\n.\n0\n-\n1.\nfc36\nupdates\n78\nk\npython3\n-\nlazr\n-\nrestfulclient\nnoarch\n0.14\n.\n4\n-\n2.\nfc36\nfedora\n84\nk\npython3\n-\nlazr\n-\nuri\nnoarch\n1.0\n.\n6\n-\n2.\nfc36\nfedora\n33\nk\npython3\n-\noauthlib\nnoarch\n3.0\n.\n2\n-\n12.\nfc36\nfedora\n169\nk\npython3\n-\nparamiko\nnoarch\n2.11\n.\n0\n-\n1.\nfc36\nupdates\n303\nk\npython3\n-\npatiencediff\nx86_64\n0.2\n.\n2\n-\n4.\nfc36\nfedora\n45\nk\npython3\n-\npynacl\nx86_64\n1.4\n.\n0\n-\n5.\nfc36\nfedora\n108\nk\npython3\n-\nsecretstorage\nnoarch\n3.3\n.\n1\n-\n4.\nfc36\nfedora\n35\nk\npython3\n-\nwadllib\nnoarch\n1.3\n.\n6\n-\n2.\nfc36\nfedora\n60\nk\nInstalling\nweak\ndependencies\n:\npython3\n-\njwt\n+\ncrypto\nnoarch\n2.4\n.\n0\n-\n1.\nfc36\nupdates\n8.9\nk\npython3\n-\nlaunchpadlib\nnoarch\n1.10\n.\n15.1\n-\n2.\nfc36\nfedora\n167\nk\npython3\n-\noauthlib\n+\nsignedtoken\nnoarch\n3.0\n.\n2\n-\n12.\nfc36\nfedora\n8.5\nk\npython3\n-\npyasn1\nnoarch\n0.4\n.\n8\n-\n8.\nfc36\nfedora\n134\nk\nTransaction\nSummary\n=====================================================================================================================\nInstall\n23\nPackages\nTotal\ndownload\nsize\n:\n9.4\nM\nInstalled\nsize\n:\n44\nM\nIs\nthis\nok\n[\ny\n/\nN\n]:\ny\nDownloading\nPackages\n:\n(\n1\n/\n23\n):\npython3\n-\ncertifi\n-\n2021.10\n.\n8\n-\n1.\nfc36\n.\nnoarch\n.\nrpm\n1.8\nkB\n/\ns\n|\n15\nkB\n00\n:\n08\n(\n2\n/\n23\n):\nlibsodium\n-\n1.0\n.\n18\n-\n9.\nfc36\n.\nx86_64\n.\nrpm\n15\nkB\n/\ns\n|\n163\nkB\n00\n:\n10\n(\n3\n/\n23\n):\npython3\n-\nconfigobj\n-\n5.0\n.\n6\n-\n27.\nfc36\n.\nnoarch\n.\nrpm\n10\nkB\n/\ns\n|\n63\nkB\n00\n:\n06\n(\n4\n/\n23\n):\nbreezy\n-\n3.2\n.\n1\n-\n3.\nfc36\n.\nx86_64\n.\nrpm\n262\nkB\n/\ns\n|\n6.0\nMB\n00\n:\n23\n(\n5\n/\n23\n):\npython3\n-\ndulwich\n-\n0.20\n.\n32\n-\n1.\nfc36\n.\nx86_64\n.\nrpm\n47\nkB\n/\ns\n|\n408\nkB\n00\n:\n08\n(\n6\n/\n23\n):\npython3\n-\ncryptography\n-\n36.0\n.\n0\n-\n3.\nfc36\n.\nx86_64\n.\nrpm\n77\nkB\n/\ns\n|\n1.0\nMB\n00\n:\n13\n(\n7\n/\n23\n):\npython3\n-\nhttplib2\n-\n0.20\n.\n3\n-\n2.\nfc36\n.\nnoarch\n.\nrpm\n105\nkB\n/\ns\n|\n122\nkB\n00\n:\n01\n(\n8\n/\n23\n):\npython3\n-\njeepney\n-\n0.7\n.\n1\n-\n2.\nfc36\n.\nnoarch\n.\nrpm\n259\nkB\n/\ns\n|\n324\nkB\n00\n:\n01\n(\n9\n/\n23\n):\npython3\n-\nlaunchpadlib\n-\n1.10\n.\n15.1\n-\n2.\nfc36\n.\nnoarch\n.\nrpm\n74\nkB\n/\ns\n|\n167\nkB\n00\n:\n02\n(\n10\n/\n23\n):\npython3\n-\nlazr\n-\nrestfulclient\n-\n0.14\n.\n4\n-\n2.\nfc36\n.\nnoarch\n.\nrpm\n36\nkB\n/\ns\n|\n84\nkB\n00\n:\n02\n(\n11\n/\n23\n):\npython3\n-\nlazr\n-\nuri\n-\n1.0\n.\n6\n-\n2.\nfc36\n.\nnoarch\n.\nrpm\n15\nkB\n/\ns\n|\n33\nkB\n00\n:\n02\n(\n12\n/\n23\n):\npython3\n-\noauthlib\n+\nsignedtoken\n-\n3.0\n.\n2\n-\n12.\nfc36\n.\nnoarch\n.\nrpm\n4.2\nkB\n/\ns\n|\n8.5\nkB\n00\n:\n02\n(\n13\n/\n23\n):\npython3\n-\noauthlib\n-\n3.0\n.\n2\n-\n12.\nfc36\n.\nnoarch\n.\nrpm\n58\nkB\n/\ns\n|\n169\nkB\n00\n:\n02\n(\n14\n/\n23\n):\npython3\n-\npatiencediff\n-\n0.2\n.\n2\n-\n4.\nfc36\n.\nx86_64\n.\nrpm\n15\nkB\n/\ns\n|\n45\nkB\n00\n:\n02\n(\n15\n/\n23\n):\npython3\n-\npyasn1\n-\n0.4\n.\n8\n-\n8.\nfc36\n.\nnoarch\n.\nrpm\n61\nkB\n/\ns\n|\n134\nkB\n00\n:\n02\n(\n16\n/\n23\n):\npython3\n-\npynacl\n-\n1.4\n.\n0\n-\n5.\nfc36\n.\nx86_64\n.\nrpm\n36\nkB\n/\ns\n|\n108\nkB\n00\n:\n03\n(\n17\n/\n23\n):\npython3\n-\nsecretstorage\n-\n3.3\n.\n1\n-\n4.\nfc36\n.\nnoarch\n.\nrpm\n12\nkB\n/\ns\n|\n35\nkB\n00\n:\n02\n(\n18\n/\n23\n):\npython3\n-\nwadllib\n-\n1.3\n.\n6\n-\n2.\nfc36\n.\nnoarch\n.\nrpm\n24\nkB\n/\ns\n|\n60\nkB\n00\n:\n02\n(\n19\n/\n23\n):\npython3\n-\nbcrypt\n-\n3.2\n.\n2\n-\n1.\nfc36\n.\nx86_64\n.\nrpm\n16\nkB\n/\ns\n|\n43\nkB\n00\n:\n02\n(\n20\n/\n23\n):\npython3\n-\njwt\n+\ncrypto\n-\n2.4\n.\n0\n-\n1.\nfc36\n.\nnoarch\n.\nrpm\n3.2\nkB\n/\ns\n|\n8.9\nkB\n00\n:\n02\n(\n21\n/\n23\n):\npython3\n-\njwt\n-\n2.4\n.\n0\n-\n1.\nfc36\n.\nnoarch\n.\nrpm\n16\nkB\n/\ns\n|\n41\nkB\n00\n:\n02\n(\n22\n/\n23\n):\npython3\n-\nkeyring\n-\n23.6\n.\n0\n-\n1.\nfc36\n.\nnoarch\n.\nrpm\n18\nkB\n/\ns\n|\n78\nkB\n00\n:\n04\n(\n23\n/\n23\n):\npython3\n-\nparamiko\n-\n2.11\n.\n0\n-\n1.\nfc36\n.\nnoarch\n.\nrpm\n38\nkB\n/\ns\n|\n303\nkB\n00\n:\n08\n---------------------------------------------------------------------------------------------------------------------\nTotal\n177\nkB\n/\ns\n|\n9.4\nMB\n00\n:\n54\nRunning\ntransaction\ncheck\nTransaction\ncheck\nsucceeded\n.\nRunning\ntransaction\ntest\nTransaction\ntest\nsucceeded\n.\nRunning\ntransaction\nPreparing\n:\n1\n/\n1\nInstalling\n:\npython3\n-\ncryptography\n-\n36.0\n.\n0\n-\n3.\nfc36\n.\nx86_64\n1\n/\n23\nInstalling\n:\npython3\n-\nlazr\n-\nuri\n-\n1.0\n.\n6\n-\n2.\nfc36\n.\nnoarch\n2\n/\n23\nInstalling\n:\npython3\n-\njeepney\n-\n0.7\n.\n1\n-\n2.\nfc36\n.\nnoarch\n3\n/\n23\nInstalling\n:\npython3\n-\nhttplib2\n-\n0.20\n.\n3\n-\n2.\nfc36\n.\nnoarch\n4\n/\n23\nInstalling\n:\npython3\n-\nsecretstorage\n-\n3.3\n.\n1\n-\n4.\nfc36\n.\nnoarch\n5\n/\n23\nInstalling\n:\npython3\n-\nkeyring\n-\n23.6\n.\n0\n-\n1.\nfc36\n.\nnoarch\n6\n/\n23\nInstalling\n:\npython3\n-\nwadllib\n-\n1.3\n.\n6\n-\n2.\nfc36\n.\nnoarch\n7\n/\n23\nInstalling\n:\npython3\n-\njwt\n-\n2.4\n.\n0\n-\n1.\nfc36\n.\nnoarch\n8\n/\n23\nInstalling\n:\npython3\n-\njwt\n+\ncrypto\n-\n2.4\n.\n0\n-\n1.\nfc36\n.\nnoarch\n9\n/\n23\nInstalling\n:\npython3\n-\noauthlib\n-\n3.0\n.\n2\n-\n12.\nfc36\n.\nnoarch\n10\n/\n23\nInstalling\n:\npython3\n-\noauthlib\n+\nsignedtoken\n-\n3.0\n.\n2\n-\n12.\nfc36\n.\nnoarch\n11\n/\n23\nInstalling\n:\npython3\n-\nlazr\n-\nrestfulclient\n-\n0.14\n.\n4\n-\n2.\nfc36\n.\nnoarch\n12\n/\n23\nInstalling\n:\npython3\n-\nlaunchpadlib\n-\n1.10\n.\n15.1\n-\n2.\nfc36\n.\nnoarch\n13\n/\n23\nInstalling\n:\npython3\n-\nbcrypt\n-\n3.2\n.\n2\n-\n1.\nfc36\n.\nx86_64\n14\n/\n23\nInstalling\n:\npython3\n-\npyasn1\n-\n0.4\n.\n8\n-\n8.\nfc36\n.\nnoarch\n15\n/\n23\nInstalling\n:\npython3\n-\npatiencediff\n-\n0.2\n.\n2\n-\n4.\nfc36\n.\nx86_64\n16\n/\n23\nInstalling\n:\npython3\n-\nconfigobj\n-\n5.0\n.\n6\n-\n27.\nfc36\n.\nnoarch\n17\n/\n23\nInstalling\n:\npython3\n-\ncertifi\n-\n2021.10\n.\n8\n-\n1.\nfc36\n.\nnoarch\n18\n/\n23\nInstalling\n:\npython3\n-\ndulwich\n-\n0.20\n.\n32\n-\n1.\nfc36\n.\nx86_64\n19\n/\n23\nInstalling\n:\nlibsodium\n-\n1.0\n.\n18\n-\n9.\nfc36\n.\nx86_64\n20\n/\n23\nInstalling\n:\npython3\n-\npynacl\n-\n1.4\n.\n0\n-\n5.\nfc36\n.\nx86_64\n21\n/\n23\nInstalling\n:\npython3\n-\nparamiko\n-\n2.11\n.\n0\n-\n1.\nfc36\n.\nnoarch\n22\n/\n23\nInstalling\n:\nbreezy\n-\n3.2\n.\n1\n-\n3.\nfc36\n.\nx86_64\n23\n/\n23\nRunning\nscriptlet\n:\nbreezy\n-\n3.2\n.\n1\n-\n3.\nfc36\n.\nx86_64\n23\n/\n23\nVerifying\n:\nbreezy\n-\n3.2\n.\n1\n-\n3.\nfc36\n.\nx86_64\n1\n/\n23\nVerifying\n:\nlibsodium\n-\n1.0\n.\n18\n-\n9.\nfc36\n.\nx86_64\n2\n/\n23\nVerifying\n:\npython3\n-\ncertifi\n-\n2021.10\n.\n8\n-\n1.\nfc36\n.\nnoarch\n3\n/\n23\nVerifying\n:\npython3\n-\nconfigobj\n-\n5.0\n.\n6\n-\n27.\nfc36\n.\nnoarch\n4\n/\n23\nVerifying\n:\npython3\n-\ncryptography\n-\n36.0\n.\n0\n-\n3.\nfc36\n.\nx86_64\n5\n/\n23\nVerifying\n:\npython3\n-\ndulwich\n-\n0.20\n.\n32\n-\n1.\nfc36\n.\nx86_64\n6\n/\n23\nVerifying\n:\npython3\n-\nhttplib2\n-\n0.20\n.\n3\n-\n2.\nfc36\n.\nnoarch\n7\n/\n23\nVerifying\n:\npython3\n-\njeepney\n-\n0.7\n.\n1\n-\n2.\nfc36\n.\nnoarch\n8\n/\n23\nVerifying\n:\npython3\n-\nlaunchpadlib\n-\n1.10\n.\n15.1\n-\n2.\nfc36\n.\nnoarch\n9\n/\n23\nVerifying\n:\npython3\n-\nlazr\n-\nrestfulclient\n-\n0.14\n.\n4\n-\n2.\nfc36\n.\nnoarch\n10\n/\n23\nVerifying\n:\npython3\n-\nlazr\n-\nuri\n-\n1.0\n.\n6\n-\n2.\nfc36\n.\nnoarch\n11\n/\n23\nVerifying\n:\npython3\n-\noauthlib\n+\nsignedtoken\n-\n3.0\n.\n2\n-\n12.\nfc36\n.\nnoarch\n12\n/\n23\nVerifying\n:\npython3\n-\noauthlib\n-\n3.0\n.\n2\n-\n12.\nfc36\n.\nnoarch\n13\n/\n23\nVerifying\n:\npython3\n-\npatiencediff\n-\n0.2\n.\n2\n-\n4.\nfc36\n.\nx86_64\n14\n/\n23\nVerifying\n:\npython3\n-\npyasn1\n-\n0.4\n.\n8\n-\n8.\nfc36\n.\nnoarch\n15\n/\n23\nVerifying\n:\npython3\n-\npynacl\n-\n1.4\n.\n0\n-\n5.\nfc36\n.\nx86_64\n16\n/\n23\nVerifying\n:\npython3\n-\nsecretstorage\n-\n3.3\n.\n1\n-\n4.\nfc36\n.\nnoarch\n17\n/\n23\nVerifying\n:\npython3\n-\nwadllib\n-\n1.3\n.\n6\n-\n2.\nfc36\n.\nnoarch\n18\n/\n23\nVerifying\n:\npython3\n-\nbcrypt\n-\n3.2\n.\n2\n-\n1.\nfc36\n.\nx86_64\n19\n/\n23\nVerifying\n:\npython3\n-\njwt\n+\ncrypto\n-\n2.4\n.\n0\n-\n1.\nfc36\n.\nnoarch\n20\n/\n23\nVerifying\n:\npython3\n-\njwt\n-\n2.4\n.\n0\n-\n1.\nfc36\n.\nnoarch\n21\n/\n23\nVerifying\n:\npython3\n-\nkeyring\n-\n23.6\n.\n0\n-\n1.\nfc36\n.\nnoarch\n22\n/\n23\nVerifying\n:\npython3\n-\nparamiko\n-\n2.11\n.\n0\n-\n1.\nfc36\n.\nnoarch\n23\n/\n23\nInstalled\n:\nbreezy\n-\n3.2\n.\n1\n-\n3.\nfc36\n.\nx86_64\nlibsodium\n-\n1.0\n.\n18\n-\n9.\nfc36\n.\nx86_64\npython3\n-\nbcrypt\n-\n3.2\n.\n2\n-\n1.\nfc36\n.\nx86_64\npython3\n-\ncertifi\n-\n2021.10\n.\n8\n-\n1.\nfc36\n.\nnoarch\npython3\n-\nconfigobj\n-\n5.0\n.\n6\n-\n27.\nfc36\n.\nnoarch\npython3\n-\ncryptography\n-\n36.0\n.\n0\n-\n3.\nfc36\n.\nx86_64\npython3\n-\ndulwich\n-\n0.20\n.\n32\n-\n1.\nfc36\n.\nx86_64\npython3\n-\nhttplib2\n-\n0.20\n.\n3\n-\n2.\nfc36\n.\nnoarch\npython3\n-\njeepney\n-\n0.7\n.\n1\n-\n2.\nfc36\n.\nnoarch\npython3\n-\njwt\n-\n2.4\n.\n0\n-\n1.\nfc36\n.\nnoarch\npython3\n-\njwt\n+\ncrypto\n-\n2.4\n.\n0\n-\n1.\nfc36\n.\nnoarch\npython3\n-\nkeyring\n-\n23.6\n.\n0\n-\n1.\nfc36\n.\nnoarch\npython3\n-\nlaunchpadlib\n-\n1.10\n.\n15.1\n-\n2.\nfc36\n.\nnoarch\npython3\n-\nlazr\n-\nrestfulclient\n-\n0.14\n.\n4\n-\n2.\nfc36\n.\nnoarch\npython3\n-\nlazr\n-\nuri\n-\n1.0\n.\n6\n-\n2.\nfc36\n.\nnoarch\npython3\n-\noauthlib\n-\n3.0\n.\n2\n-\n12.\nfc36\n.\nnoarch\npython3\n-\noauthlib\n+\nsignedtoken\n-\n3.0\n.\n2\n-\n12.\nfc36\n.\nnoarch\npython3\n-\nparamiko\n-\n2.11\n.\n0\n-\n1.\nfc36\n.\nnoarch\npython3\n-\npatiencediff\n-\n0.2\n.\n2\n-\n4.\nfc36\n.\nx86_64\npython3\n-\npyasn1\n-\n0.4\n.\n8\n-\n8.\nfc36\n.\nnoarch\npython3\n-\npynacl\n-\n1.4\n.\n0\n-\n5.\nfc36\n.\nx86_64\npython3\n-\nsecretstorage\n-\n3.3\n.\n1\n-\n4.\nfc36\n.\nnoarch\npython3\n-\nwadllib\n-\n1.3\n.\n6\n-\n2.\nfc36\n.\nnoarch\nComplete\n!\nYou can also use the wildcards:\n# yum update 'cal*'\nFun fact: Fedora Linux uses\ndnf\nas its package manager and will translate your\nyum\ncommands to its\ndnf\nequivalents.\nyumdownloader\nThis tool will download rpms from repositories without installing them. If you need to download all the dependencies too, use the\n--resolve\nswitch:\nyumdownloader --resolve bzr\nRPM\nThe\nrpm\ncommand can run ACTIONs on individual RPM files. You can use it like\nrpm ACTION [OPTION] rpm_file.rpm\nOne of common options is\n-v\nfor verbose output and these are the common ACTIONs:\nShort Form\nLong Form\nDescription\n-i\n--install\nInstalls a package\n-e\n--erase\nRemoves a package\n-U\n--upgrade\nInstalls/Upgrades a package\n-q\n--query\nChecks if the package is installed\n-F\n--freshen\nOnly update if it's already installed\n-V\n--verify\nCheck the integrity of the installation\n-K\n--checksig\nChecks the integrity of an rpm package\nPlease note that each action might have its specific options.\nInstall and update\nIn most cases, we use\n-U\nwhich Installs or upgrades a package.\nRPM does not have a database of automatic package installation, so it can not remove the automatically installed dependencies.\nIf you have an rpm with all of its dependencies, you can install them using\nrpm -Uvh *.rpm\n. This will tell rpm not to complain about the dependencies if it is presented in other files. Here the\n-h\ncreates 50 hash signs to show the progress.\nIn some cases - if you know what you are doing - you can use\n--nodeps\nto prevent the dependency check or even use\n--force\nto force the install / upgrade despite all the issues & complains.\nQuery\nA normal query is like this:\n[\nroot\n@\nfedora\ntmp\n]\n#\nrpm\n-\nq\nbreezy\n-\n3.2.1\n-\n3\n.\nfc36\n.\nx86_64\n.\nrpm\nbreezy\n-\n3.2.1\n-\n3\n.\nfc36\n.\nx86_64\n[\nroot\n@\nfedora\ntmp\n]\n#\nrpm\n-\nq\nbreezy\nbreezy\n-\n3.2.1\n-\n3\n.\nfc36\n.\nx86_64\n[\nroot\n@\nfedora\ntmp\n]\n#\nrpm\n-\nq\nemacs\npackage\nemacs\nis\nnot\ninstalled\nAnd you can use these options to spice it up:\nShort\nLong\nDescription\n-c\n--configfiles\nShow the packages configuration files\n-i\n--info\nDetailed info about a pacakge\n-a\n--all\nShow all Installed packages\n--whatprovides\nShows what packages provide this file\n-l\n--list\nQuery the list of files a package installs\n-R\n--requires\nShow dependencies of a package\n-f\n--file\nQuery package owning file\nVerify\nYou can verify your packages and see if they are installed correctly or not. You can use the\n-Vv\noption for verbose output or just use the\n-V\nto verify and see only the issues. This is the output after I edited the\n/bin/tmux\nmanually:\n[\nroot@fedora tmp\n]\n#\nrpm\n-\nV\ntmux\nS\n.5\n....\nT\n.\n/\nusr\n/\nbin\n/\ntmux\nAnd this is part of the\nman rpm\n's\n-V\nsection:\nS\nSize\ndiffers\nM\nMode\ndiffers\n(\nincludes\npermissions\nand\nfile\ntype\n)\n5\ndigest\n(\nformerly\nMD5\nsum\n)\ndiffers\nD\nDevice\nmajor\n/\nminor\nnumber\nmismatch\nL\nreadLink\n(\n2\n)\npath\nmismatch\nU\nUser\nownership\ndiffers\nG\nGroup\nownership\ndiffers\nT\nmTime\ndiffers\nP\ncaPabilities\ndiffer\nYou can also check the integrity of an rpm package with\n-K\n:\n# rpm -Kv breezy-3.2.1-3.fc36.x86_64.rpm\nbreezy\n-\n3.2\n.\n1\n-\n3.\nfc36\n.\nx86_64\n.\nrpm\n:\nHeader\nV4\nRSA\n/\nSHA256\nSignature\n,\nkey\nID\n38\nab71f4\n:\nOK\nHeader\nSHA256\ndigest\n:\nOK\nHeader\nSHA1\ndigest\n:\nOK\nPayload\nSHA256\ndigest\n:\nOK\nV4\nRSA\n/\nSHA256\nSignature\n,\nkey\nID\n38\nab71f4\n:\nOK\nMD5\ndigest\n:\nOK\nThe above output shows that this file is valid.\nUninstall\n[\nroot@fedora tmp\n]\n#\nrpm\n-\ne\ntmux\nerror\n:\nFailed\ndependencies\n:\ntmux\nis\nneeded\nby\n(\ninstalled\n)\nanaconda\n-\ninstall\n-\nenv\n-\ndeps\n-\n36.16.5\n-\n1.\nfc36\n.\nx86_64\nrpm removes the package without asking!\nrpm won't remove a package that is needed by another package\nExtract RPM Files\nrpm2cpio\nThe\ncpio\nis an archive format (Just like zip or rar or tar). You can use the\nrpm2cpio\ncommand to convert RPM files to\ncpio\nand then use the\ncpio\ntool to extract them:\n[\nroot\n@\nfedora\ntmp\n]\n# rpm2cpio breezy-3.2.1-3.fc36.x86_64.rpm > breezy.cpio\n[\nroot\n@\nfedora\ntmp\n]\n# cpio -idv < breezy.cpio\n./\nusr\n/\nbin\n/\nbrz\n./\nusr\n/\nbin\n/\nbzr\n./\nusr\n/\nbin\n/\nbzr\n-\nreceive\n-\npack\n./\nusr\n/\nbin\n/\nbzr\n-\nupload\n-\npack\n./\nusr\n/\nbin\n/\ngit\n-\nremote\n-\nbrz\n./\nusr\n/\nbin\n/\ngit\n-\nremote\n-\nbzr\n[\n...\n]\nZypper\nThe SUSE Linux and its sibling openSUSE use ZYpp as their package manager engine. You can use YAST or Zypper tools to communicate with it.\nThese are the main commands used in\nzypper\n:\nCommand\nDescription\nhelp\nGeneral help\ninstall\nInstalls a package\ninfo\nDisplays information of a package\nlist-updates\nShows available updates\nlr\nShows repository information\npackages\nList all available packages or packages from a specific repo\nwhat-provides\nShow the owner of a file\nrefresh\nRefreshes the repositories information\nremove\nRemoves a package from the system\nsearch\nSearches for a package\nupdate\nChecks the repositories and updates the installed packages\nverify\nChecks a package and its dependencies\nYou can shorten the command when using\nzypper\n, so\nzypper se tmux\nwill\nsearch\nfor tmux.\nOther tools\nYUM and RPM are the main package managers on Fedora, RHEL & Centos but other tools are also available. As mentioned, SUSE uses\nYaST\n, and some modern desktops (KDE & Gnome) use\nPackageKit\nwhich is a graphical tool. It is also good to note that the\ndnf\nsuite is also gaining popularity and is pre-installed on Fedora systems.\n← 102.4 Use Debian package management\nChapter List\n102.6 Linux as a virtualization guest →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "102.6 Linux as a virtualization guest",
    "url": "https://linux1st.com./1026-linux-as-a-virtualization-guest.html",
    "extracted_title": "",
    "content": "Weight: 1\nCandidates should understand the implications of virtualization and cloud computing on a Linux guest system.\nKey Knowledge Areas\nUnderstand the general concept of virtual machines and containers\nUnderstand common elements of virtual machines in an IaaS cloud, such as computing instances, block storage, and networking\nUnderstand the unique properties of a Linux system which have to be changed when a system is cloned or used as a template\nUnderstand how system images are used to deploy virtual machines, cloud instances, and containers\nUnderstand Linux extensions that integrate Linux with a virtualization product.\nAwareness of cloud-init\nTerms\nVirtual machine\nLinux container\nApplication container\nGuest drivers\nSSH host keys\nD-Bus machine id\nIntroduction\nVirtual machines (VMs) are\nsimulated\ncomputers. You can use Virtual Machines to create new computers on top of your running machine and install new OSs there. In some cases, it's also possible to run only parts of an OS on top of the current OS; This is called having containers.\nTo run virtual machines, we need\nHypervisor\nsoftware (also called Virtual Machine Managers (VMM)). We have two types of hypervisors.\nTo check and see if your host operating system / CPU, supports using hypervisors check for the\nvmx\n(for Intel CPUs) or\nsvm\n(for AMD CPUs) in your\n/proc/cpuinfo\nin flags.\nYou may need to turn the hypervisor option On using your BIOS or UEFI.\nBased on your CPU you should have\nkvm\nor\nkvm-amd\nkernel modules loaded.\nlsmod | grep -i kvm\nsudo modprobe kvm\nIf you see\nhypervisor\nin your\n/proc/cpuinfo\nit means that you are inside a virtualized Linux machine :)\nNow, let's see the 2 types of hypervisors. First type 2, since it's easier to understand.\nType 2 Hypervisor\nThese hypervisors run on a conventional operating system (OS) just as other computer programs do. A guest operating system runs as a process on the host. Type-2 hypervisors abstract guest operating systems from the host operating system.\nIn other words, a type 2 hypervisor is the software between the guest and host. It completely runs on the host OS and provides virtualization to the guest.\nTwo of the most famous Type 2 hypervisors are VirtualBox (from Oracle) and VMware.\nType 1 Hypervisor\nThese hypervisors run directly on the host's hardware to control the hardware and manage guest operating systems. For this reason, they are sometimes called bare-metal hypervisors. The first hypervisors, which IBM developed in the 1960s, were native hypervisors. These included the test software SIMMON and the CP/CMS operating system, the predecessor of IBM z/VM.\nSome of the most famous Type 1 hypervisors are KVM, Xen & Hyper-V.\nKVM\nis built-in since Linux Kernel version 2.6.20.\nCreating a Virtual Machine\nFirst, create the machine itself. We tell the hypervisor this machine how much RAM/disk/CPU/... needs and set a name for our machine. Then we need to\ninstall\nthe guest OS. This can be done using:\nInstalling from a CD / DVD / ...\nCloning\nan existing machine\nUsing\nOpen Virtualization Format (OVF)\nto move machines between hypervisors. This is a standard format for virtual machine definition and may include several files, in this case, you can archive all of them into one\nOpen Virtualization Archive (OVA)\nfile.\nIt is also possible to create\nTemplates\nthat are\nmaster copies\n* to initiate new machines\nYou may need to install some\nguest drivers\nor\nadditions\nto help your hypervisor to have better control over your guest machine. These might include graphical drivers for VirtualBox or scripts to help VMWare to control a guest machine or check its status.\nGuest-specific configs\nSome configurations are machine specific. For example, a network card's MAC address should be unique for whole the network. If we are cloning a machine or sometimes creating them from templates, at least we need to change these on each machine before booting them:\nHost Name\nNIC MAC Address\nNIC IP (If not using DHCP)\nMachine ID (delete the\n/etc/machine-id\nand\n/var/lib/dbus/machine-id\nand run\ndbus-uuidgen --ensure\n. These two files might be soft links to each other)\nEncryption Keys like SSH Fingerprints and PGP keys\nHDD UUIDs\nAny other UUIDs on the system\nSome configs might be empty on templates, do not forget to fill them too.\nContainers\nIn previous sections, we were dealing with complete guest OSs. But is also possible to virtualize only parts of an OS; This is called OS-level virtualization.\nOS-level virtualization is an operating system (OS) paradigm in which the kernel allows the existence of multiple isolated user-space instances, called containers.\nThis can be done to run an application or a service or even run most parts of a new OS for test purposes.\nIaaS\nAs the name implies,\nInfrastructure as a Service\nor IaaS means offloading parts of your infrastructure to other companies. This means buying\nservices\nlike electricity, cooling, and even running hypervisors to another company and just renting your VirtualMachine from them. This makes your life easier because things like \"Adding New Hards\" now only mean paying a bit more for more HDD on your machine; Instead of buying HDDs and installing them, ... This is called cloud! You might even be able to move your machine from one continent to another one just with one click.\nSamples of these cloud providers are\nAmazon Web Services\n,\nGoogle Cloud Platform\n, and\nMicrosoft Azure\n.\nDifferent cloud providers might provide different levels of Infrastructure or services. These are some examples:\nLoad Balancing: Distribute incoming requests between your servers\nBlock Storage: Providing disks to be configured by you and added to your machines\nObject Storage: Lets you store your data directly; Say for photos\nElasticity: Lets you configure an automated increase/decrease in your service capacity based on request volume\nSaaS: Software as a Service lets you use the software you need, on the Cloud as a Service. Think of having an online office suite for your company without installing anything on your workstations.\nThere are programs like\ncloud-init\nwhich help you initialize your cloud machine with ease. This service can help you start machines based on templates on AWS, Azure, Digital Ocean, and others with ease.\n← 102.5 Use RPM and YUM package management\nChapter List\n103.1 Work on the command line →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "103.1 Work on the command line",
    "url": "https://linux1st.com./1031-work-on-the-command-line.html",
    "extracted_title": "",
    "content": "Weight: 4\nDescription: Candidates should be able to interact with shells and commands using the command line. The objective assumes the Bash shell.\nObjectives\nUse single shell commands and one-line command sequences to perform basic tasks on the command line.\nUse and modify the shell environment including defining, referencing, and exporting environment variables.\nUse and edit command history.\nInvoke commands inside and outside the defined path.\nTerms\nbash\necho\nenv\nexport\npwd\nset\nunset\ntype\nwhich\nman\nuname\nhistory\n.bash_history\nQuoting\nShells and Bash\nYou issue your commands in a shell; it's your command line interface and you have various options for it. To reach your shell you should login into the system in the text mode or run one of the various\nTerminal Emulators\nin your GUI. Some samples are\ngnome-terminal\n,\nkonsole\n,\nxterm\n, etc.\nAfter running the Terminal Emulator or logging into the text mode, you are in the shell and you can issue commands. Although\nbash\n(GNU Bourne Again shell) is the most common one, you might use\nzsh\n,\ndash\n,\nksh\n,\ncsh\n, and others.\nYou can check where your general\nsh\ncommand links to via\n$\nreadlink\n/bin/sh\nOr check your\n$SHELL\nvariable using:\necho $SHELL\nYour bash has some\ninternal\ncommands that it understands without any external dependency (say\ncd\n,\nbreak\n,\nexec\n, ...) but if it does not understand something internally, it will try to run it as an external executable.\nYou can use the\ntype\ncommand to determine this:\n[\njadi\n@\nfedora\n~\n]\n$\ntype\ncd\ncd\nis\na\nshell\nbuiltin\n[\njadi\n@\nfedora\n~\n]\n$\ntype\nls\nls\nis\naliased\nto\n`\nls\n--\ncolor\n=\nauto\n'\n[\njadi\n@\nfedora\n~\n]\n$\ntype\nping\nping\nis\n/\nusr\n/\nbin\n/\nping\ncd, pwd & uname\ncd\nYou've already seen lots of\ncd\ncommands :) it\nchanges directory\n, including\n.\n(current directory) and\n..\n(parent directory).\nYou can point to directories in two ways:\nAbsolute Paths\n: Like\n/home/jadi/lpic1/lesson3.1\nRelative Paths\n: Like\nlpic1/lesson3.1\n. In this case, we are not adding the\n/\nin the beginning so the bash will try to find\nlpic1\ndirectory where we are (local / relative)\nThe\n~\ncharacters means\nhome directory of the user issuing the command\nIt is also possible to issue the\ncd\nwithout any parameters. It will move you to your home directory. So these 3 commands are all equal:\ncd\ncd ~\ncd $HOME\npwd\nWill show you your current directory:\n[\njadi@fedora lesson3.1\n]\n$\npwd\n/\nhome\n/\njadi\n/\nlpic1\n/\nlesson3\n.1\nuname\nGives you data about the system. Common switches are:\nOption\nDescription\n-s\nPrint the kernel name. This is the default if no option is specified.\n-n\nPrint the nodename or hostname.\n-r\nPrint the release of the kernel. This option is often used with module-handling commands.\n-v\nPrint the version of the kernel.\n-m\nPrint the machine's hardware (CPU) name.\n-o\nPrint the operating system name.\n-a\nPrint all of the above information.\nExample:\n[jadi@fedora lesson3.1]$ uname -a\nLinux fedora 5.14.0-60.fc35.aarch64 #1 SMP Mon Aug 30 16:30:42 UTC 2021 aarch64 aarch64 aarch64 GNU/Linux\nGetting Help\nMost of the commands we use do have a cool and complete manual, accessible via the\nman\ncommand. It uses the\nless\npager by default and contains the documentation, switches, parameters, ... of commands, and utilities.\nMake yourself familiar with the man by reading the manual of the\nyes\ncommand:\n$\nman\nyes\nPlease note that man pages are categorized in different sections (books). You can check these by reading the man's manual:\n$\nman\nman\n$\nman\n5\npasswd\n`\nSpecial characters and Quoting/Escaping\nIn the computer world, some characters do have special meanings. For example in bash, the\n*\ncharacter will expand to all files. In these cases, if you want to use this character without this expansion, you have to\nQuote\nit or\nEscape\nit. In many cases this is done via adding a\n\\\ncharacter before it:\n$\necho\n2\n\\*\n3\n=\n6\n2\n*\n3\n=\n6\nThese are the character with special meanings that you need to quote if you are using them in your commands:\n* ?[]'\"\\$;&()|^<>\nPlease note that there is a space character in the character list above.\nAs you can see, the\n\\\nhas a specific meaning so if you want to use the back-slash itself (without its escaping usage), you have to\nquote\nyour back-slash with another back-slash\n\\\\\n.\nIn addition to escaping, you can use\n\\\nto create some special characters. For example, as you can not type a\nreturn\ncharacter, you create it via\n\\n\n(new line):\njadi@funlife:~$ echo -e \"hello\\nthere\"\nhello\nthere\nSome other cases are:\nEscape sequence    Function\n\\a\nAlert (bell)\n\\b\nBackspace\n\\c\nSuppress trailing newline (same function as -n option)\n\\f\nForm feed (clear the screen on a video display)\n\\n\nNew line\n\\r\nCarriage return\n\\t\nHorizontal tab\nOn bash you can use\n\\\nto break a command into more lines:\n$\necho\nYou\nknow\nslashes!\nBut\nthis\n\\\nis\nanother\n\\\nusage\nYou\nknow\nslashes!\nBut\nthis\nis\nanother\nusage\nShell environment variables\nEnvironment Variables\ncontain some configs and information about the shell. For example, your default editor is set in the\nEDITOR\nvariable. You can query the value of a shell variable like this:\n[\njadi@fedora ~\n]\n$\necho\n$\nEDITOR\n/\nusr\n/\nbin\n/\nnano\nIt is possible to check all the env variables using the\nset\nor\nenv\ncommand.\nThese are some of the most used bash environment variables:\nName\nFunction\nUSER\nThe name of the logged-in user\nPATH\nList of directories to search for commands, colon separated\nEDITOR\nDefault editor\nHISTFILE\nWhere bash should save its history (normally\n.bash_history\n)\nHOSTNAME\nSystem hostname\nPS1\nThe Prompt! Play with it\nUID\nThe numeric user id of the logged-in user\nHOME\nThe user's home directory\nPWD\nThe current working directory\nSHELL\nThe name of the shell\n$\nThe process id (or PID of the running bash shell (or other) process\nPPID\nThe process id of the process that started this process (that is, the id of the parent process)\n?\nThe exit code of the last command\nWhen trying to access the value, you should add a\n$\nto the beginning of the variable name.\n$ echo $USER $UID\njadi 1000\n$ echo $SHELL $HOME $PWD\n/bin/bash /home/jadi /home/jadi/lpic\nTo define a new EV (Environment Variable) or change or delete one, we can do:\n$ MYMOOD=happy\n$ echo I am $MYMOOD\nI am happy\n$ MYMOOD=\"Even Happier\" # space has a specific meaning\n$ unset MM\nIf you want new programs starting from this shell to have access to the variable you defined, you have to set them with\nexport\nor export them later.\n$\nexport\nMYMOOD\n$\nexport\nYOURMOOD\n=\n\"Not Confused\"\nGlobal bash configs are stored at\n/etc/profile\nand each user has her config at\n~/.profile\n&\n~/.bash\\_profile\n&\n~/.bash\\_logout\n. If you need a permanent change, add your configs to these.\nPath\nWhen you issue a command, bash will run if it's an internal bash command. Otherwise, bash will go and check the\nPATH\nvariables one by one and will try to find them there. If not, it will give you an error. If you want to run something on a specific path, you have to exclusively describe the location:\n$ echo $PATH\n/home/jadi/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games\nBut what happens if I try to run\ntar\n? Let's check with\nwhich\n,\ntype\n, and\nwhereis\ncommands:\njadi\n@\nfunlife\n:\n~\n$\nwhich\ntar\n/\nbin\n/\ntar\njadi\n@\nfunlife\n:\n~\n$\ntype\ntar\ntar\nis\n/\nbin\n/\ntar\njadi\n@\nfunlife\n:\n~\n$\nwhereis\ntar\ntar\n:\n/\nusr\n/\nlib\n/\ntar\n/\nbin\n/\ntar\n/\nusr\n/\ninclude\n/\ntar\n.\nh\n/\nusr\n/\nshare\n/\nman\n/\nman1\n/\ntar\n.1\n.\ngz\nA cooler example is\nping\non Fedora:\n[\njadi@fedora ~\n]\n$\nwhereis\nping\nping\n:\n/\nusr\n/\nbin\n/\nping\n/\nusr\n/\nsbin\n/\nping\n/\nusr\n/\nshare\n/\nman\n/\nman8\n/\nping\n.8\n.\ngz\n[\njadi@fedora ~\n]\n$\nwhich\nping\n/\nusr\n/\nbin\n/\nping\n[\njadi@fedora ~\n]\n$\n/\nusr\n/\nsbin\n/\nping\n4.2.2.4\nPING\n4.2.2.4\n(\n4.2.2.4\n)\n56\n(\n84\n)\nbytes\nof\ndata\n.\n64\nbytes\nfrom\n4.2.2.4\n:\nicmp_seq\n=\n1\nttl\n=\n50\ntime\n=\n160\nms\nThat's why when you want to say \"run this_program in this directory\" you issue \"./this_program\". You are exclusively telling bash where the file is. In Linux, the current directory (.) is not part of the PATH by default.\nCommand history\nBash saves its history in\n~/.bash_history\n. You can\ncat\nit and see its contents or run the\nhistory\ncommand. You can also use the below keys (combinations) to access your previous commands:\nKey (Combination)\nUsage\nUp and Down Arrow\nMove in the history\nCtrl+R\nBackward Search\nCtrl+O\nRun the command you found with Ctrl+R\n!!\nRun the last command\n!10\nRun command number 10\n!text\nsearch backward for text, and run the first found command\nIf you want to clear your history, issue `HISTSIZE=0\nExiting the Shell\nThe\nexit\ncommand exits the shell. Same as CTRL+d.\nIf you run a command inside parentheses that command will be run inside a sub-shell and\nexec\nwill run a command and closes the current shell.\n← 102.6 Linux as a virtualization guest\nChapter List\n103.2 Process text streams using filters →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "103.2 Process text streams using filters",
    "url": "https://linux1st.com./1032-process-text-streams-using-filters.html",
    "extracted_title": "",
    "content": "Weight: 2\nDescription: Candidates should be able to apply filters to text streams.\nObjectives\nSend text files and output streams through text utility filters to modify the output using standard UNIX commands found in the GNU textutils package.\nTerms\nbzcat\ncat\ncut\nhead\nless\nmd5sum\nnl\nod\npaste\nsed\nsha256sum\nsha512sum\nsort\nsplit\ntail\ntr\nuniq\nwc\nxzcat\nzcat\nStreams\nIn\nUNIX\nworld a lot of data is in TEXT form. Log files, configurations, data, etc.\nFiltering\nthis data means taking an input stream of text and performing some conversion on the text before sending it to an output stream. In this context, a\nstreams\nis nothing more than\n\"a sequence of bytes that can be read or written using library functions that hide the details of an underlying device from the application\"\n.\nIn simple words, a text stream is an input of text from a keyboard, a file, a network device, ... which can be viewed, changed, examined, and ... via text util commands.\nModern programming environments and shells (including bash) use three standard I/O streams:\nstdin\nis the standard input stream, which provides input to commands.\nstdout\nis the standard output stream, which displays output from commands.\nstderr\nis the standard error stream, which displays error output from commands\nHere we are talking about the\nstdin\nand viewing or manipulating it via different commands and utilities. You will see more about these streams and will see how we can combine commands to\nPIPE\ninputs and outputs of different commands in chapter 103.4.\nViewing commands\ncat\nThis command simply outputs its input stream (or the filename you give it). As you saw in the previous section. As with most commands, if you do not give input to it, it will read the data from the keyboard.\njadi@funlife:~/w/lpic/101$ cat > mydata\ntest\nthis is the second line\nbye\njadi@funlife:~/w/lpic/101$ cat mydata\ntest\nthis is the second line\nbye\nWhen entering the input via the keyboard,\nctrl+d\nwill end the stream.\nYou can also provide more than one input file name:\njadi@funlife:~/w/lpic/101$ cat mydata directory_data\ntest\nthis is the second line\nbye\ntotal 0\n-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 12\n-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 62\n-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 neda\n-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 jadi\n-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 you\n-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:34 amir\n-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:37 directory_data\nSome common cat switches are\n-n\nto show line numbers,\n-s\nto squeeze blanks,\n-T\nto show tabs, and\n-v\nto show non-printing characters.\nbzcat, xzcat, zcat, gzcat\nThere are used to directly\ncat\nthe bz, xz, and Z & gz compressed files. These let you see the contents of compressed files without uncompressing them first.\nless\nThis is a powerful tool to view larger text files. It can paginate, search and move in text files.\nThere is another command called\nmore\n. It's more familiar for people coming from the DOS environment and not very common in the Linux world. Do not use it. Remember:\nless\nis more than\nmore\n.\nSome less common commands are as follows.\nCommand\nUsage\nq\nExit\n/foo\nSearches for foo\nn\nNext (search)\nN\nPrevious (search)\n?foo\nSearch backward for foo\nG\nGo to end\nnG\nGo to line n\nPageUp, PageDown, UpArrow, DownArrow\nYou guess!\nod\nThis command _dump_s files (Shows files in formats other than text). Normal behavior is OctalDump (showing in base 8):\njadi@funlife:~/w/lpic/101$ od mydata\n0000000 062564 072163 072012 064550 020163 071551 072040 062550\n0000020 071440 061545 067543 062156 066040 067151 005145 074542\n0000040 005145\n0000042\nNot good enough for normal human beings. Let's use some switches:\n-t\nwill tell what format to print:\n-t a\nfor showing only named characters\n-t c\nfor showing escaped chars.\nYou can summarize the two above to\n-a\nand\n-c\n-A\nfor choosing how to present offset field:\n-A d\nfor Decimal,\n-A o\nfor Octal,\n-A x\nfor hex\n-A n\nfor None\nod\nis very useful to find problems in your text files - Say finding out if you are using tabs or correct line endings.\nChoosing parts of files\nsplit\nWill split the files. It is very useful for transferring HUGE files on smaller media (say splitting a 3TB file into 8GB parts and moving them to another machine with a USB Disk).\njadi@funlife:~/w/lpic/101$ cat mydata\nhello\nthis is the second line\nbut as you can see we are\nstill writing\nand this is getting longer\n.\n.\nand longer\nand longer!\njadi@funlife:~/w/lpic/101$ ls\nmydata\njadi@funlife:~/w/lpic/101$ split -l 2 mydata\njadi@funlife:~/w/lpic/101$ ls\nmydata    xaa  xab  xac  xad  xae\njadi@funlife:~/w/lpic/101$ cat xab\nbut as you can see we are\nstill writing\nBy default, split uses xaa, xab, xac, ... for output file names. It can be changed with\nsplit -l 2 mydata output\nwhich split mydata into outputaa, outputab, ...; 2 lines per file.\nthe\n-l 2\nsplits 2 lines per file. It is possible to use\n-b 42\nto split every 42 bytes or even\n-n 5\nto force 5 output files.\nIf you want numeric output (x00, x01, ..) use\n-d\noption.\nNeed to join these files?\ncat\nthem with\ncat x* > originalfile\n.\nhead and tail\nWill show the beginning (head) or end (tail) of text files. By default, it will show 10 lines but you can change it by\n-n20\nor\n-20\n.\ntail -f\nfollows the new lines which are being written at the end of the file. Very useful.\ncut\nThe\ncut\ncommand will\ncut\none or more columns from a file. Good for separating fields:\nLets cut the\nfirst field\nof a file.\njadi@funlife:~/w/lpic/101$ cat howcool\njadi    5\nsina    6\nrubic    2\nyou     12\njadi@funlife:~/w/lpic/101$ cut -f1 howcool\njadi\nsina\nrubic\nyou\nDefault delimiter is TAB. use\n-dx\nto change it to \"x\" or\n-d' '\nto change it to space\nIt is also possible to\ncut\nfields 1, 2, and 3 with\n-f1-3\nor only characters with index 4, 5, 7, 8 from each line\n-c4,5,7,8\n.\nModifying streams\nnl\nThis command is for showing line numbers.\njadi@funlife:~/w/lpic/101$ nl mydata  | head -3\n1    hello\n2    this is the second line\n3    but as you can see we are\ncat -n\nwill also number lines.\nsort & uniq\nWill sorts its input(s).\njadi@funlife:~/w/lpic/101$ cat uses\nyou fedora\njadi ubuntu\nrubic windows\nneda mac\njadi@funlife:~/w/lpic/101$ cat howcool\njadi    5\nsina    6\nrubic    2\nyou     12\njadi@funlife:~/w/lpic/101$ sort howcool uses\njadi    5\njadi ubuntu\nneda mac\nrubic    2\nrubic windows\nsina    6\nyou     12\nIf you want a reverse sort, use the\n-r\nswitch.\nIf you want to sort NUMERICALLY (so 9 is lower than 19), use\n-n\n.\nAnd the\nuniq\nremoves duplicate entries from its input. Normal behavior is removing only the duplicated lines but you can change its behavior, for example\n-f1\nswitch forces it not to check the first field.\njadi@funlife:~/w/lpic/101$ uniq what_i_have.txt\nlaptop\nsocks\ntshirt\nball\nsocks\nglasses\njadi@funlife:~/w/lpic/101$ sort what_i_have.txt | uniq\nball\nglasses\nlaptop\nsocks\ntshirt\njadi@funlife:~/w/lpic/101$\nAs you can see, the input HAVE TO BE sorted for uniq to work.\nuniq has great switches:\njadi@funlife:~/w/lpic/101$ cat what_i_have.txt\nlaptop\nsocks\ntshirt\nball\nsocks\nglasses\njadi@funlife:~/w/lpic/101$ sort what_i_have.txt  | uniq -c  #show count of each item\n1 ball\n1 glasses\n1 laptop\n2 socks\n1 tshirt\njadi@funlife:~/w/lpic/101$ sort what_i_have.txt  | uniq -u #show only non-repeated items\nball\nglasses\nlaptop\ntshirt\njadi@funlife:~/w/lpic/101$ sort what_i_have.txt  | uniq -d #show only repeated items\nsocks\npaste\nThe paste command pastes lines from two or more files side-by-side! You cannot do this in a general text editor with ease!\njadi@funlife:~/w/lpic/101$ cat howcool\njadi    5\nsina    6\nrubic    2\nyou     12\njadi@funlife:~/w/lpic/101$ cat uses\nyou fedora\njadi ubuntu\nrubic windows\nneda mac\njadi@funlife:~/w/lpic/101$ paste howcool uses\njadi    5    you fedora\nsina    6    jadi ubuntu\nrubic    2    rubic windows\nyou     12    neda mac\ntr\nThe\ntr\ncommand\ntranslates\ncharacters in the stream. For example,\ntr 'ABC' '123'\nwill replace A with 1, B with 2, and C with 3 in the provided stream. It is a pure filter and does not accept the input file name. If needed you can pipe the cat with it (see chapter 103.4).\njadi@funlife:~/w/lpic/101$ cat mydata\nhello\nthis is the second line\nbut as you can see we are\nstill writing\nand this is getting longer\n.\n.\nand longer\nand longer!\njadi@funlife:~/w/lpic/101$ cat mydata | tr 'and' 'AND'\nhello\nthis is the second liNe\nbut As you cAN see we Are\nstill writiNg\nAND this is gettiNg loNger\n.\n.\nAND loNger\nAND loNger!\nNote: all\n'a'\ns are replaced with\n'A'\n.\nsed\nsed is\ns\ntream\ned\nitor. It is POWERFUL and can do things that are not far from magic! Just like most of the tools we've seen far now, sed can work as a filter or take input from a file. Sed is a great tool for replacing text with using\nregular expressions\n. If you need to replace A with B only once in each line in a stream just issue\nsed 's/A/B/'\n:\njadi@funlife:~/w/lpic/101$ cat uses\nyou fedora\njadi ubuntu\nrubic windows\nneda mac\njadi@funlife:~/w/lpic/101$ sed 's/ubuntu/debian/' uses\nyou fedora\njadi debian\nrubic windows\nneda mac\njadi@funlife:~/w/lpic/101$\nThe pattern for changing EVERY occurrence of A to B in a line is\nsed 's/A/B/g'\n.\nRemember escape characters? They also work here and this will remove every\nnew line\nfrom a file and will replace it with a space:\njadi@funlife:~/w/lpic/101$ cat mydata\nhello\nthis is the second line\nbut as you can see we are\nstill writing\nand this is getting longer\n.\n.\nand longer\nand longer!\njadi@funlife:~/w/lpic/101$ sed 's/ /\\t/g' mydata > mydata.tab\njadi@funlife:~/w/lpic/101$ cat mydata.tab\nhello\nthis    is the second    line\nbut    as    you    can    see    we    are\nstill    writing\nand    this    is    getting    longer\n.\n.\nand    longer\nand    longer!\nGetting stats\nwc\nThe\nwc\nis\nword count\n. It counts the lines, words, and bytes in the input stream.\njadi@funlife:~/w/lpic/101$ wc mydata\n9  25 121 mydata\nIt is very common to count the line numbers with\n-l\nswitch.\n-\nYou should know that if you put\n-\ninstead of a filename, the data will be replaced from the pipe (or keyboard stdin).\njadi@funlife:~/w/lpic/101$ wc -l mydata | cat mydata - mydata\nhello\nthis is the second line\nbut as you can see we are\nstill writing\nand this is getting longer\n.\n.\nand longer\nand longer!\n9 mydata\nhello\nthis is second line\nbut as you can see we are\nstill writing\nand this is getting longer\n.\n.\nand longer\nand longer!\nHashing\nA hash function is any function that can be used to map data of arbitrary size to fixed-size values. There are different hashes and we use them for different purposes. For example, a site may hash your password in its database to keep it secure (and check the hash of provided password with a hash it already has in DB during logins) a site may provide the hash of a file so you can be sure that you've downloaded the correct file and ...\nThe hashing algorithms covered in LPIC1 are:\nmd5sum\nsha256sum\nsha512sum\nYou can check any file (or input streams hash with something like this):\njadi\n@ocean\n:\n~\n$\nmd5sum\n/\ntmp\n/\nmyfile\n.\ntxt\n8183\naa57a23658efe7ba7aebe60816bc\n/\ntmp\n/\nmyfile\n.\ntxt\njadi\n@ocean\n:\n~\n$\nsha256sum\n/\ntmp\n/\nmyfile\n.\ntxt\n7\nddcfda184b55ee06b0c81e0ad136b1aa4a86daeb1078bcaeccc246eb2c8693b\n/\ntmp\n/\nmyfile\n.\ntxt\njadi\n@ocean\n:\n~\n$\nsha512sum\n/\ntmp\n/\nmyfile\n.\ntxt\n79e5\nd789528e5e55fc1bddcb381afd56e896b1b452347a76777fb38d76c9754278700036f35df2a53c4d53d3e3623538a8b9ed155a3fd5275e667bdbf3c0b359\n/\ntmp\n/\nmyfile\n.\ntxt\nAs you can see,\nsha512sum\ncreates a longer hash which is more secure.\n← 103.1 Work on the command line\nChapter List\n103.3 Perform basic file management →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "103.3 Perform basic file management",
    "url": "https://linux1st.com./1033-perform-basic-file-management.html",
    "extracted_title": "",
    "content": "Weight: 4\nCandidates should be able to use the basic Linux commands to manage files and directories.\nObjectives\nCopy, move and remove files and directories individually.\nCopy multiple files and directories recursively.\nRemove files and directories recursively.\nUse simple and advanced wildcard specifications in commands.\nUsing find to locate and act on files based on type, size, or time.\nUsage of tar, cpio, and dd.\nTerms\ncp\nfind\nmkdir\nmv\nls\nrm\nrmdir\ntouch\ntar\ncpio\ndd\nfile\ngzip\ngunzip\nbzip2\nbunzip2\nxz\nunxz\nfile globbing\nWildcards and file globbing\nFile globbing is a shell capability that lets you tell things like :\n- All files\n- everything which starts with A\n- all files with 3-letter names which end in A or B or C\n- ...\nTo do so you need to know about these characters:\n*\nmeans\nany string\n?\nmeans any single character\n[ABC]\nmatches A, B, or C\n[a-k]\nmatches a, b, c, ..., k (both lower-case and upper-case)\n[0-9a-z]\nmatches all digits and numbers\n[!x]\nmeans NOT X.\nknowing these, you can create your patterns. For example:\ncommand\nmeaning\nrm *\ndelete all files in this directory\nls A*B\nshow all files starting with A and ending with B\ncp ???.* /tmp\nCopy all files with 3 characters, then a dot then whatever (even nothing) to /tmp\nrmdir [a-z]*\nremove all empty directories which start with a letter\ngeneral commands\nlisting with\nls\nls\nused to\nlist\ndirectories & files. You can provide an absolute or relative path; if omitted the \".\" will be used as a target.\njadi@lpicjadi:~/lpic1-practice-iso/100/103.3$ ls -ltrh\ntotal 16K\n-rw-rw-r-- 1 jadi jadi 207 Aug 14 04:43 tasks.txt\n-rw-rw-r-- 1 jadi jadi  29 Aug 14 04:43 info.txt\n-rw-rw-r-- 1 jadi jadi  24 Aug 14 04:44 data.txt\n-rw-rw-r-- 1 jadi jadi 116 Aug 14 04:44 note_to_self\nFirst field indicates if this is a file (\n-\n) or directory (\nd\n).\nSome common switches are:\n-l\nis for\nlong\n(more info for each file)\n-1\nwill print one file per line\n-t\nsorts based on modification date\n-r\nreverses the search (so\n-tr\nis reverse time (newer files at the bottom).\nyou can mix switches. A famous one is\n-ltrh\n(long + human readable sizes + reverse time).\nCopy (\ncp\n), Move (\nmv\n), and Delete (\nrm\n)\ncp\nThis will\ncopy\nfiles from one place/name to another place/name. If the target is a directory, all sources will be copied there.\ncp source destination\nA common switch is\n-r\n(or\n-R\n) which copies recursively (directories and their contents). So for copying a directory called\nA\nto\n/tmp/\nyou can issue\ncp -r A /tmp/\n.\nmv\nWill\nmove\nor\nrename\nfiles or directories. It works like\ncp\ncommand. If you are moving a file on the same file system, the\ninode\nwon't change.\nIn general:\nIf the target is an existing directory, then all sources are copied into the target\nIf the target directory does not exist, then the source must be only one directory which will be renamed to the target directory.\nIf the target is a file, then the source must be only one file so rename will happen.\nThese look like \"formulas\" but they are common sense!\nrm\nRemoves (Deletes)\nfiles\n. You can do this recursively using the\n-r\nswitch or even prevent it from checking for confirmations using\n-f\n(force) switch. So a\nrm -rf /\nmeans\ndelete everything from the file system\n.\nnotes\nNormally, the cp command will copy a file over an existing copy, if the existing file is writable. On the other hand, the\nmv\nwill not move or rename a file if the target exists. Although this is highly dependent on your system's configuration. But in all cases, you can overcome this using the\n-f\nswitch.\n-f\n(--force) will cause cp to try overwriting the target.\n-i\n(--interactive) will ask Y/N question (deleting / overwriting).\n-b\n(--backup) will make backups of overwritten files\n-p\nwill\npreserve\nthe attributes.\nCreating (mkdir) and removing (rmdir) directories\nThe\nmkdir\ncommand creates directories.\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nls\n-\nltrh\ntotal\n16\nK\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n207\nAug\n14\n04\n:\n43\ntasks\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n29\nAug\n14\n04\n:\n43\ninfo\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n24\nAug\n14\n04\n:\n44\ndata\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n116\nAug\n14\n04\n:\n44\nnote_to_self\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nmkdir\nnew_dir\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nls\n-\nltrh\ntotal\n20\nK\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n207\nAug\n14\n04\n:\n43\ntasks\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n29\nAug\n14\n04\n:\n43\ninfo\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n24\nAug\n14\n04\n:\n44\ndata\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n116\nAug\n14\n04\n:\n44\nnote_to_self\ndrwxrwxr\n-\nx\n2\njadi\njadi\n4.0\nK\nAug\n14\n04\n:\n57\nnew_dir\nIf you want to create a tree of directories, you can use\n-p\nswitch to tell the\nmkdir\nto create the\nparent\ndirectories if needed:\njadi@lpicjadi:~/lpic1-practice-iso/100/103.3$ ls -ltrh\ntotal 20K\n-rw-rw-r-- 1 jadi jadi  207 Aug 14 04:43 tasks.txt\n-rw-rw-r-- 1 jadi jadi   29 Aug 14 04:43 info.txt\n-rw-rw-r-- 1 jadi jadi   24 Aug 14 04:44 data.txt\n-rw-rw-r-- 1 jadi jadi  116 Aug 14 04:44 note_to_self\ndrwxrwxr-x 2 jadi jadi 4.0K Aug 14 04:57 new_dir\njadi@lpicjadi:~/lpic1-practice-iso/100/103.3$ mkdir -p 1/2/3\njadi@lpicjadi:~/lpic1-practice-iso/100/103.3$ tree\n.\n├── 1\n│   └── 2\n│       └── 3\n├── data.txt\n├── info.txt\n├── new_dir\n├── note_to_self\n└── tasks.txt\nIf you need to delete a directory the command is\nrmdir\nand you can also use the -p for nested removing:\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nrmdir\n-\np\n1\n/\n2\n/\n3\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nrmdir\nnew_dir\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\ntree\n.\n├──\ndata\n.\ntxt\n├──\ninfo\n.\ntxt\n├──\nnote_to_self\n└──\ntasks\n.\ntxt\n0\ndirectories\n,\n4\nfiles\nIf you are using\nrmdir\nto remove a directory, it\nMUST BE EMPTY\n! That's why many people use\nrm -rf directory_name\nto delete the not-empty directory and whatever is in it.\ntouch\nThe\ntouch\nwill create an empty file (if it does not exists) or updates the\nmodification\ndate of a file if it already exists. The default time is\nnow\nbut you can specify other times too.\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nls\n-\nltrh\ntotal\n16\nK\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n207\nAug\n14\n04\n:\n43\ntasks\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n29\nAug\n14\n04\n:\n43\ninfo\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n24\nAug\n14\n04\n:\n44\ndata\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n116\nAug\n14\n04\n:\n44\nnote_to_self\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\ntouch\nnew_file\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nls\n-\nltrh\ntotal\n16\nK\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n207\nAug\n14\n04\n:\n43\ntasks\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n29\nAug\n14\n04\n:\n43\ninfo\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n24\nAug\n14\n04\n:\n44\ndata\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n116\nAug\n14\n04\n:\n44\nnote_to_self\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n0\nAug\n14\n05\n:\n08\nnew_file\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\ntouch\nnote_to_self\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nls\n-\nltrh\ntotal\n16\nK\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n207\nAug\n14\n04\n:\n43\ntasks\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n29\nAug\n14\n04\n:\n43\ninfo\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n24\nAug\n14\n04\n:\n44\ndata\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n0\nAug\n14\n05\n:\n08\nnew_file\n-\nrw\n-\nrw\n-\nr\n-- 1 jadi jadi 116 Aug 14 05:08 note_to_self\nOr you can specify times. It is possible to use\n-d\nand give dates or use\n-t\nand give a timestamp in the form of\n[[CC]YY]MMDDhhmm[.ss]\n$ touch -t 200908121510.59 file1\n$ touch -d 11am file2\n$ touch -d \"last fortnight\" file3\n$ touch -d \"yesterday 6am\" file4\n$ touch -d \"2 days ago 12:00\" file5\n$ touch -d \"tomorrow 02:00\" file6\n$ touch -d \"5 Nov\" file3\n$ ls -ltrh file?\n-rw-rw-r-- 1 jadi jadi 0 Aug 12  2009 file1\n-rw-rw-r-- 1 jadi jadi 0 Aug 12 12:00 file5\n-rw-rw-r-- 1 jadi jadi 0 Aug 13 06:00 file4\n-rw-rw-r-- 1 jadi jadi 0 Aug 14  2022 file2\n-rw-rw-r-- 1 jadi jadi 0 Aug 15  2022 file6\n-rw-rw-r-- 1 jadi jadi 0 Nov  5  2022 file3\nOh.. and it's possible to use another file's time to set, with switch\n-r\n(for --reference)):\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nls\n-\nl\n/\netc\n/\ndebian_version\n-\nrw\n-\nr\n--\nr\n--\n1\nroot\nroot\n13\nAug\n22\n2021\n/\netc\n/\ndebian_version\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\ntouch\n-\nr\n/\netc\n/\ndebian_version\nfile1\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nls\n-\nltrh\ntotal\n20\nK\n-\nrw\n-\nrw\n-\nr\n-- 1 jadi jadi   0 Aug 22  2021 file1\nfile\nTo determine the type of a file, you should use\nfile\ncommand. It looks\ninto\nthe file and determines its type.\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nfile\nfile1\nfile1\n:\nempty\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nfile\nnote_to_self\nnote_to_self\n:\nASCII\ntext\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nfile\n/\nbin\n/\nbash\n/\nbin\n/\nbash\n:\nELF\n64\n-\nbit\nLSB\npie\nexecutable\n,\nx86\n-\n64\n,\nversion\n1\n(\nSYSV\n),\ndynamically\nlinked\n,\ninterpreter\n/\nlib64\n/\nld\n-\nlinux\n-\nx86\n-\n64.\nso\n.2\n,\nBuildID\n[\nsha1\n]=\n33\na5554034feb2af38e8c75872058883b2988bc5\n,\nfor\nGNU\n/\nLinux\n3.2.0\n,\nstripped\n-i\nswitch prints the mime format\ndd\nThe\ndd\ncommand copies data from its input to its output (say files or devices). You may use it just like copy:\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\ndd\nif\n=\nnote_to_self\nof\n=\nnew_file\n0\n+\n1\nrecords\nin\n0\n+\n1\nrecords\nout\n116\nbytes\ncopied\n,\n0.00141561\ns\n,\n81.9\nkB\n/\ns\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\ncat\nnew_file\nI\nwill\ncontinue\nlearning\n...\nand\nif\nI\nget\nconfused\n,\nI\n'\nll\nrepeat\nthe\nlast\nsection\nonce\nmore\ntill\neverything\nis\nclear\n!\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nif\nis the Input File\nof\nis the Output File\nBut commonly people use it to read/write from block devices. For example, this will read all the sectors from the\n/dev/sdb\nand will write them to a file named\nbackup.dd\n. Later you can restore this backup by swapping the\nif\nand\nof\nand writing from the\nbackup.dd\nto\n/dev/sdb\n.\n#\ndd\nif\n=/\ndev\n/\nsda\nof\n=\nbackup\n.\ndd\nbs\n=\n4096\nor even:\n#\ndd\nif\n=/\ndev\n/\nsda2\n|\ngzip\n>\nbackup\n.\ndd\n.\ngzip\nAnother common usage is creating files of specific sizes:\n$\ndd\nif\n=\n/dev/zero\nof\n=\n1g.bin\nbs\n=\n1G\ncount\n=\n1\nor even\nwriting\nyour iso files to a USB disk to have a live bootable USB:\n$\nsudo\ndd\nif\n=\nubuntu.iso\nof\n=\n/dev/sdc\nbs\n=\n2048\nCaution: here you are writing directly on a block device. If you do something wrong... you will ruin your disk and need to reformat it.\nfind\nThe\nfind\ncommand helps us to find files based on different criteria. Look at this:\n$\nfind\n.\n-iname\n\"[a-j]*\"\n./howcool.sort\n./alldata\n./mydir/howcool.sort\n./mydir/newDir/insideNew\n./howcool\nThe first parameter says where should we search (including subdirectories).\nThe\n-name\nswitch indicates the criteria (here\niname\nmeans search files with this name and ignore the character cases (z equals Z)).\nAnother common switch is\n-type\nto indicate the type we are searching for (\nf\nfor regular files,\nd\nfor directories, and\nl\nfor symbolic links):\njadi\n@\nlpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nfind\n.\n-\ntype\nd\n-\niname\n\"[a-j]*\"\n.\n/\ndirectory\n.\n/\ndirectory\n/\ninnder_one\nif you want to search for file sizes do as below:\ncommand\nmeaning\n-size 100c\nfiles which are exactly 100 characters/bytes (you can also use\nb\n)\n-size +100k\nfiles which are more than 100 kilobytes\n-size -20M\nfiles smaller than 20Megabytes\n-size +2G\nfiles bigger than 2Gigabytes\nSo this will find all files ending in\ntmp\nwith sizes between 1M and 100M in /var/ directory:\nfind /var -iname '*tmp' -size +1M -size -100M\nyou can find all empty files with\nfind . -size 0b\nor\nfind . -empty\nAnother useful search criterion is time. These are some of the options:\nswitch\nmeaning\nsamples\n-amin\nAccess Minutes\n-amin 40\nmeans \"files accessed exactly 40min ago\" or\n-amin +40\nmins files accessed more than 40min ago and\n-amin -40\nmeans files accessed less than 40min ago\n-cmin\nStatus Change Min\n-cmin +60\nfile status changed before last hour\n-mmin\nModified Minutes\n-mmin -60\nwill give us files modified in last hour\n-atime\naccess time in days\n-atime +1\nmeans files access \"more than 1 days ago (which means 2 days and more)\n-ctime\nStatus Changed in Days\n-mtime\nModified days\n-newer\nNewer than reference\n-newer file1\nwill give you files which are newer than file1\nif you add\n-daystart\nswitch to -mtime or -atime it means that we want to consider days as calendar days, starting at midnight.\nActing on files\nWe can execute commands or do other actions on files with various switches:\nswitch\nmeaning\n-ls\nwill run ls -dils on each file\n-print\nwill print the full name of the files on each line\nBut the best way to run commands on found files is\n-exec\nswitch. You can point to the file with\n'{}'\nor\n{}\nand finish your command with\n\\;\n.\nFor example, This will remove all empty files in this directory and its subdirectories:\nfind\n.\n-\nempty\n-\nexec\nrm\n'{}'\n\\\n;\nor this will rename all htm files to html\nfind . -name \"*.htm\" -exec mv '{}' '{}l' \\;\nsince deleting found files is a common task, there is a switch for it:\n-delete\nCompression\ngzip & gunzip\nStraight forward, one gzips file and one ungzips file; In place:\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nls\n-\nltrh\ntotal\n20\nK\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n207\nAug\n14\n04\n:\n43\ntasks\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n29\nAug\n14\n04\n:\n43\ninfo\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n24\nAug\n14\n04\n:\n44\ndata\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n0\nAug\n14\n05\n:\n08\nnew_file\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n116\nAug\n14\n05\n:\n08\nnote_to_self\ndrwxrwxr\n-\nx\n3\njadi\njadi\n4.0\nK\nAug\n14\n05\n:\n20\ndirectory\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nls\n-\nltrh\ntotal\n20\nK\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n171\nAug\n14\n04\n:\n43\ntasks\n.\ntxt\n.\ngz\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n29\nAug\n14\n04\n:\n43\ninfo\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n24\nAug\n14\n04\n:\n44\ndata\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n0\nAug\n14\n05\n:\n08\nnew_file\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n116\nAug\n14\n05\n:\n08\nnote_to_self\ndrwxrwxr\n-\nx\n3\njadi\njadi\n4.0\nK\nAug\n14\n05\n:\n20\ndirectory\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\ngunzip\ntasks\n.\ntxt\n.\ngz\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nls\n-\nltrh\ntotal\n20\nK\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n207\nAug\n14\n04\n:\n43\ntasks\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n29\nAug\n14\n04\n:\n43\ninfo\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n24\nAug\n14\n04\n:\n44\ndata\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n0\nAug\n14\n05\n:\n08\nnew_file\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n116\nAug\n14\n05\n:\n08\nnote_to_self\ndrwxrwxr\n-\nx\n3\njadi\njadi\n4.0\nK\nAug\n14\n05\n:\n20\ndirectory\ngzip preserves time\ngzip creates the new compressed file with the same name but with .gz ending\ngzip removes the original files after creating the compressed file (you can keep the input file with\n-k\nswitch)\nbzip2 & bunzip2\nThe\nbzip2\nis another compressing tool. Works just like the famous\ngzip\nbut with a different compression algorithm.\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nbzip2\ntasks\n.\ntxt\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nls\n-\nltrh\ntotal\n20\nK\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n172\nAug\n14\n04\n:\n43\ntasks\n.\ntxt\n.\nbz2\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n29\nAug\n14\n04\n:\n43\ninfo\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n24\nAug\n14\n04\n:\n44\ndata\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n0\nAug\n14\n05\n:\n08\nnew_file\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n116\nAug\n14\n05\n:\n08\nnote_to_self\ndrwxrwxr\n-\nx\n3\njadi\njadi\n4.0\nK\nAug\n14\n05\n:\n20\ndirectory\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nbunzip2\ntasks\n.\ntxt\n.\nbz2\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nls\ndata\n.\ntxt\ndirectory\ninfo\n.\ntxt\nnew_file\nnote_to_self\ntasks\n.\ntxt\nxz & unxz\nAnother compression/decompression tool is just like\ngzip\nand\nbzip2\n.\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nxz\ntasks\n.\ntxt\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nls\n-\nltrh\ntotal\n24\nK\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n224\nAug\n14\n04\n:\n43\ntasks\n.\ntxt\n.\nxz\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n29\nAug\n14\n04\n:\n43\ninfo\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n24\nAug\n14\n04\n:\n44\ndata\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n116\nAug\n14\n05\n:\n08\nnote_to_self\ndrwxrwxr\n-\nx\n3\njadi\njadi\n4.0\nK\nAug\n14\n05\n:\n20\ndirectory\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n116\nAug\n14\n07\n:\n51\nnew_file\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nunxz\ntasks\n.\ntxt\n.\nxz\njadi\n@lpicjadi\n:\n~/\nlpic1\n-\npractice\n-\niso\n/\n100\n/\n103.3\n$\nls\n-\nltrh\ntotal\n24\nK\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n207\nAug\n14\n04\n:\n43\ntasks\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n29\nAug\n14\n04\n:\n43\ninfo\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n24\nAug\n14\n04\n:\n44\ndata\n.\ntxt\n-\nrw\n-\nrw\n-\nr\n--\n1\njadi\njadi\n116\nAug\n14\n05\n:\n08\nnote_to_self\ndrwxrwxr\n-\nx\n3\njadi\njadi\n4.0\nK\nAug\n14\n05\n:\n20\ndirectory\n-\nrw\n-\nrw\n-\nr\n-- 1 jadi jadi  116 Aug 14 07:51 new_file\nPlease note that\ncompressing\na small text file makes it larger. This is\nnormal\nin small files because of all the headers and metadata.\nIn some cases, commands like\nunxz\nis just a calls to\nxz --dcompress\nArchiving with tar & cpio\nSometimes we need to create an archive file container of many other files. This operation is different than compressing, it combines files into one and then extracts them again. Archiving is mostly used in backups, moving files to a new location (say via email), and such. This is done with\ncpio\nand\ntar\n.\ntar\nTapeARchive or tar is the most common archiving tool. It automatically creates an archive file from a directory and all its subdirs.\nCommon switches are:\nswitch\nmeanint\n-cf\nmyarchive.tar\ncreate file named myarchive.tar\n-xf\nmyarchive.tar\nextract a file named myarchive.tar\n-z\ncompress the archive with gzip after creating it\n-j\ncompress the archive with bzip2 after creating it\n-v\nverbose! print a lot of data about what is happening\n-r\nappend new files to the currently available archive\nIf you issue absolute paths, tar removes the starting slash (/) for safety reasons when creating an archive. If you want to override, use -p option.\ntar can work with tapes and other storages. That's why we use\n-f\nto tell it that we are working with files.\ncpio\nGets a list of files and creates an archive (one file). This file can be used later to extract the original files.\n$\nls\n|\ncpio\n-o\n>\nallfilesls.cpio\n3090354\nblocks\n-o\ntells cpio to create an output from its input\nPlease note that\ncpio\ndoes not look into the folders. So mostly we use it with find:\nfind . -name \"*\" | cpio -o > myarchivefind.cpio\nTo extract the original files:\nmkdir extract\nmv myarchivefind.cpio extract\ncd extract\ncpio -id < myarchivefind.cpio\n-d\nwill create the folders\n-i\nis for extract\n← 103.2 Process text streams using filters\nChapter List\n103.4 Use streams, pipes, and redirects →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "103.4 Use streams, pipes, and redirects",
    "url": "https://linux1st.com./1034-use-streams-pipes-and-redirects.html",
    "extracted_title": "",
    "content": "Weight: 4\nCandidates should be able to redirect streams and connect them to efficiently process textual data. Tasks include redirecting standard input, standard output, and standard error, piping the output of one command to the input of another command, using the output of one command as arguments to another command, and sending output to both stdout and a file.\nObjectives\nRedirecting standard input, standard output, and standard error.\nPipe the output of one command to the input of another command.\nUse the output of one command as arguments to another command.\nSend output to both stdout and a file.\nTerms\ntee\nxargs\nThese features help us to control the input/output of the commands and do things like saving the output of a command to a file, getting the input of a command from another command, or separating the normal output from errors. We've already used them in previous sections but let's learn more and deepen our understanding of these.\nRedirecting standard IO\nOn a Linux system, most shells use streams for input and output. These streams can be from (and toward) various things including keyboards, block devices (hards, USB sticks, ..), files, and ...\nWe have 3 different standard streams:\nSTDIN\nis the standard input stream, which provides input to a command.\nSTDOUT\nis the standard output stream, which includes the output of a command.\nSTDERR\nis the standard error stream, which includes the error output of a command.\nThe\n0\n,\n1\n&\n2\nnumbering, indicates the\nSTDIN\n,\nSTDOUT\nand\n*STDERR\naccordingly. For example, if you want to redirect the stderror, you can use 2> and the STDERR will be redirected.\nThese are the other redirections you can use:\nOperator\nUsage\n>\nRedirect STDOUT to a file; Overwrite if exists\n>>\nRedirect STDOUT to a file; Append if exists\n2>\nRedirect STDERR to a file; Overwrite if exists\n2>>\nRedirect STDERR to a file; Append if exists\n&>\nRedirect both STDOUT and STDERR; Overwrite if exists\n&>>\nRedirect both STDOUT and STDERR; Append if exists\n<\nRedirect STDIN from a file\n<>\nRedirect STDIN from the file and send the STDOUT to it\nSome examples:\n$\nls\nbob\njack\njadi\nlinus\nsara\nwho_uses_what.txt\n$\nls\nx*\nls:\nx*:\nNo\nsuch\nfile\nor\ndirectory\n$\nls\nj*\njack\njadi\n$\nls\nj*\nx*\n>\noutput\n2\n>\nerrors\n$\ncat\noutput\njack\njadi\n$\ncat\nerrors\nls:\nx*:\nNo\nsuch\nfile\nor\ndirectory\n$\ncat\nwho_uses_what.txt\njadi,\nfedora\nlinux,\nfedora\nbob,\nubuntu\njack,\narch\nsara,\nfedora\n$\ntr\n' '\n,\n''\n<\nwho_uses_what.txt\ntr:\nempty\nstring2\n$\ncat\nwho\n$\ntr\n','\n,\n'|'\n<\nwho_uses_what.txt\njadi\n|\nfedora\nlinux\n|\nfedora\nbob\n|\nubuntu\njack\n|\narch\nsara\n|\nfedora\nIt is also possible to use\n&1\nand\n&2\nand\n&0\nto refer to the\ntarget\nof STDOUT, STDERR & STDIN. In this case\nls > file1 2>&1\nmeans\nredirect output to file1 and output stderr to same place as stdout (file1)\nBe careful!\nls 2>&1 > file1\nmeans\nprint stderr to the current location of stdout (terminal) and then change the stdout to file1\nsending to null\nIn Linux\n/dev/null\ndevice works like an abyss. You can send anything there and it disappears without being any burden on your system. So it is normal to say:\n$\nls\nj*\nx*\n>\nfile1\nls:\nx*:\nNo\nsuch\nfile\nor\ndirectory\n$\nls\nj*\nx*\n>\nfile1\n2\n>/dev/null\n$\ncat\nfile1\njack\njadi\nhere-documents\nMany shells have here-documents (also called here-docs) as a way of input. You use\n<<\nand a\nWORD\nand then whatever you input is considered stdin till you give only the WORD in one line.\n$\ntr\n' '\n'.'\n<< END_OF_DATA\n> this is a line\n> and then this\n>\n> we'll still type\n> and,\n> done!\n> END_OF_DATA\nthis.is.a.line\nand.then.this\nwe\n'\nll.still.type\nand,\ndone\n!\nHere-Documents are very useful if you are writing scripts and automated tasks.\nPipes\nWith the pipe (\n|\n), you can redirect STDOUT, STDIN, and STDERR between multiple commands all on one command line. When you do\ncommand1 | command2\n; command1, is executed but its STDOUT is redirected as STDIN into the COMMAND2.\n$\ncat\nwho_uses_what.txt\njadi,\nfedora\nlinux,\nfedora\nbob,\nubuntu\njack,\narch\nsara,\nfedora\n$\ncut\n-f2\n-d,\nwho_uses_what.txt\n|\nsed\n-e\n's/ //g'\n|\nsort\n|\nuniq\n-c\n|\nsort\n-nr\n3\nfedora\n1\nubuntu\n1\narch\nIf you need to start your pipeline with the contents of a file, start with\ncat filename | ...\nor use a\n<\nstdin redirect.\nPipes are one of the super strong & super amazing features in the UNIX world. They let you create\nnew\ntools by combining tools that do atomic things. As an example, check this out:\nxargs\nThe xargs utility reads space, tab, newline and end-of-file delimited strings from the standard input and executes the provided utility with the strings as their arguments.\n$\nls\nbob\nfile1\njadi\noutput\nwho_uses_what.txt\nerrors\njack\nlinus\nsara\n$\nls\n|\nxargs\necho\nthese\nare\nfiles:\nthese\nare\nfiles:\nbob\nerrors\nfile1\njack\njadi\nlinus\noutput\nsara\nwho_uses_what.txt\nif you do not give any command to the\nxargs\n, the echo will be the default command.\nOne common switch is\n-I\n. This is useful if you need to pass stdin arguments in the middle (or even start) of your commands. Use it like this:\nxargs -I SOMETHING echo here is SOMETHING end\n:\n$\ncat\nwho_uses_what.txt\njadi,\nfedora\nlinus,\nfedora\nbob,\nubuntu\njack,\narch\nsara,\nfedora\n$\ncat\nwho_uses_what.txt\n|\nxargs\n-I\nDATA\necho\nname\nis\nDATA\nis\nthe\nchoice.\nname\nis\njadi,\nfedora\nis\nthe\nchoice.\nname\nis\nlinus,\nfedora\nis\nthe\nchoice.\nname\nis\nbob,\nubuntu\nis\nthe\nchoice.\nname\nis\njack,\narch\nis\nthe\nchoice.\nname\nis\nsara,\nfedora\nis\nthe\nchoice.\nTwo more useful switches:\n1.\n-L 1\nbreaks based on new lines\n2.\n-n 1\ntells xargs to invoke the provided utility after receiving 1 argument.\ntee\nThe problem with redirection is that you cannot see the progress of your commands in the same terminal. The\ntee\nutility solves this. If you need to see the output on screen and also save it to a file,\ntee\nis your friend. Give it one or more filenames and it will do the trick.\n$\nls\n-1\n|\ntee\nallfiles\nmyfiles\nbob\nerrors\nfile1\njack\njadi\nlinus\noutput\nsara\nwho_uses_what.txt\n$\ncat\nallfiles\nmyfiles\nbob\nerrors\nfile1\njack\njadi\nlinus\noutput\nsara\nwho_uses_what.txt\nbob\nerrors\nfile1\njack\njadi\nlinus\noutput\nsara\nwho_uses_what.txt\nThe\n-a\nswitch will append to files if they exist.\nIf you need to save\nstderr\ntoo, first redirect it to\nstdout\n← 103.3 Perform basic file management\nChapter List\n103.5 Create, monitor, and kill processes →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "103.5 Create, monitor, and kill processes",
    "url": "https://linux1st.com./1035-create-monitor-and-kill-processes.html",
    "extracted_title": "",
    "content": "Weight: 4\nCandidates should be able to perform basic process management.\nObjectives\nRun jobs in the foreground and background.\nSignal a program to continue running after logout.\nMonitor active processes.\nSelect and sort processes for display.\nSend signals to processes.\nTerms\n&\nbg\nfg\njobs\nkill\nnohup\nps\ntop\nfree\nuptime\nkillall\npgrep\npkill\nwatch\nscreen\ntmux\nManaging processes\nforeground and background jobs\nOne of the great points of Linux even from its beginning days is the ability to run different programs and jobs at the same time. This is done by sending programs to the background.\nNormally if you run a program on the terminal, it\nblocks\nyour terminal while it's running but sending a command to the background will prevent this:\nxeyes &\nEven when a program is running normally in the foreground, you can do two things:\n- break it using\nCtrl+c\n-\nsuspend\nor pause it using\nCtrl+z\nA\nstopped\njob can be brought to the foreground using\nfg\ncommand (or the background using\nbg\n). You can also list all the jobs by the\njobs\ncommand.\n$\nxeyes\n^Z\n[\n1\n]\n+\nStopped\nxeyes\n$\njobs\n[\n1\n]\n+\nStopped\nxeyes\n$\nbg\n[\n1\n]\n+\nxeyes\n&\n$\njobs\n[\n1\n]\n+\nRunning\nxeyes\n&\n$\nsleep\n1000\n&\n[\n2\n]\n7395\n$\njobs\n[\n1\n]\n-\nRunning\nxeyes\n&\n[\n2\n]\n+\nRunning\nsleep\n1000\n&\n$\nfg\n%2\nsleep\n1000\n^Z\n[\n2\n]\n+\nStopped\nsleep\n1000\n$\njobs\n[\n1\n]\n-\nRunning\nxeyes\n&\n[\n2\n]\n+\nStopped\nsleep\n1000\n$\nbg\nsle\n[\n2\n]\n+\nsleep\n1000\n&\n$\njobs\n[\n1\n]\n-\nRunning\nxeyes\n&\n[\n2\n]\n+\nRunning\nsleep\n1000\n&\n`\njobs -l\nalso shows the process ID of jobs\nnohup\nThe\nnohup\ncommand lets you run your commands even after you close the terminal or logout. By default it writes its output to\nnohup.out\n:\n$\nnohup\nping\n4\n.2.2.4\nnohup:\nignoring\ninput\nand\nappending\noutput\nto\n‘nohup.out’\n^C$\ncat\nnohup.out\nPING\n4\n.2.2.4\n(\n4\n.2.2.4\n)\n56\n(\n84\n)\nbytes\nof\ndata.\n64\nbytes\nfrom\n4\n.2.2.4:\nicmp_seq\n=\n1\nttl\n=\n51\ntime\n=\n225\nms\n64\nbytes\nfrom\n4\n.2.2.4:\nicmp_seq\n=\n3\nttl\n=\n51\ntime\n=\n223\nms\n---\n4\n.2.2.4\nping\nstatistics\n---\n4\npackets\ntransmitted,\n2\nreceived,\n50\n%\npacket\nloss,\ntime\n3010ms\nrtt\nmin/avg/max/mdev\n=\n223\n.584/224.767/225.950/1.183\nms\nIt is common to use\n2>\nto redirect the nohup errors to another file and use a\n&\nto run it in the background:\nnohup script.sh > mynohup.out 2>&1 &\nkill\nDespite its frightening name, the\nkill\ncommand sends unix\nsignals\nto processes. Pressing\nCtrl+c\nand\nCtrl+z\nis also sending signals. By default, the\nkill\ncommand sends the signal\n15\n(which is TERM and tells the process to terminate itself).\n$\njobs\n[\n3\n]\nRunning\nxeyes\n&\n[\n4\n]\nRunning\nsleep\n1000\n&\n[\n5\n]\n-\nRunning\nsleep\n2000\n&\n[\n6\n]\n+\nRunning\nsleep\n3000\n&\n$\nkill\n%4\n$\njobs\n[\n3\n]\nRunning\nxeyes\n&\n[\n4\n]\nTerminated\nsleep\n1000\n[\n5\n]\n-\nRunning\nsleep\n2000\n&\n[\n6\n]\n+\nRunning\nsleep\n3000\n&\n$\njobs\n[\n3\n]\nRunning\nxeyes\n&\n[\n5\n]\n-\nRunning\nsleep\n2000\n&\n[\n6\n]\n+\nRunning\nsleep\n3000\n&\nIt is also possible to use PIDs instead of job numbers and kill other signals. The general format is\nkill -SIGNAL_ID_OR_NAME process_id\n:\nsignal number\nsignal name\nmeaning\n1\nHUP\nInforming the process that its controlling terminal (like an ssh connection) is terminated\n15\nTERM\nnormal termination request\n9\nKILL\nforcefully kills the proccess\nSo you can do a\nkill -9 8733\nto force process ID 8733 to close.\nRemember the\nnohup\ncommand ? :) It means \" do not respond to the hup signal \".\nkillall\nThis command Will send the given signal (or by default 15) to all processes with the given name:\n$\njobs\n[\n3\n]\nRunning\nxeyes\n&\n[\n5\n]\n-\nRunning\nsleep\n2000\n&\n[\n6\n]\n+\nRunning\nsleep\n3000\n&\n$\nps\n-ef\n|\ngrep\nsleep\njadi\n7864\n7651\n0\n21\n:07\npts/1\n00\n:00:00\nsleep\n2000\njadi\n7865\n7651\n0\n21\n:07\npts/1\n00\n:00:00\nsleep\n3000\njadi\n7977\n7651\n0\n21\n:14\npts/1\n00\n:00:00\ngrep\nsleep\n$\nkillall\nsleep\n[\n5\n]\n-\nTerminated\nsleep\n2000\n[\n6\n]\n+\nTerminated\nsleep\n3000\n$\njobs\n[\n3\n]\n+\nRunning\nxeyes\n&\n$\nps\n-ef\n|\ngrep\nsleep\njadi\n7980\n7651\n0\n21\n:14\npts/1\n00\n:00:00\ngrep\nsleep\npkill\nWill send the given signal (or 15) to all the processes with a specific pattern in their name:\n$\njobs\n[\n3\n]\nRunning\nxeyes\n&\n[\n5\n]\n-\nRunning\nsleep\n2000\n&\n[\n6\n]\n+\nRunning\nsleep\n3000\n&\n$\nps\n-ef\n|\ngrep\nsleep\njadi\n7864\n7651\n0\n21\n:07\npts/1\n00\n:00:00\nsleep\n2000\njadi\n7865\n7651\n0\n21\n:07\npts/1\n00\n:00:00\nsleep\n3000\njadi\n7977\n7651\n0\n21\n:14\npts/1\n00\n:00:00\ngrep\nsleep\n$\npkill\nsle\n[\n5\n]\n-\nTerminated\nsleep\n2000\n[\n6\n]\n+\nTerminated\nsleep\n3000\n$\njobs\n[\n3\n]\n+\nRunning\nxeyes\n&\n$\nps\n-ef\n|\ngrep\nsleep\njadi\n7980\n7651\n0\n21\n:14\npts/1\n00\n:00:00\ngrep\nsleep\nMonitoring Processes\nps\nThe\nps\ncommand shows running processes on your computer. Each process has a process ID shown as\nPID\nand a Parent Process ID shown as PPID.\n$\nsleep\n1000\n&\n[\n1\n]\n7678\n$\nsleep\n1001\n&\n[\n2\n]\n7679\n$\nxeyes\n&\n[\n3\n]\n7680\n$\nps\nPID\nTTY\nTIME\nCMD\n7651\npts/1\n00\n:00:00\nbash\n7678\npts/1\n00\n:00:00\nsleep\n7679\npts/1\n00\n:00:00\nsleep\n7680\npts/1\n00\n:00:00\nxeyes\n7681\npts/1\n00\n:00:00\nps\nTwo common switch combination is\nps aux\n( or\n-aux\n) and\nps ef\nwhich shows ALL processes on a system:\n$\nps\n-aux\n|\nwc\n-l\n293\nIt is also possible to use the\n--sort\nswitch to sort the output based on different fields (+ for ascending & - for descending).\n$\nps\n-af\n--sort\n+comm,-sid\nUID\nPID\nPPID\nC\nSTIME\nTTY\nTIME\nCMD\nroot\n5486\n5478\n0\n19\n:59\npts/12\n00\n:00:00\n-su\nroot\n4444\n1169\n0\n19\n:56\ntty4\n00\n:00:00\n-bash\njadi\n6638\n5412\n0\n20\n:10\npts/0\n00\n:00:04\nnode\n/usr/local/bin/sslocal\njadi\n7778\n7651\n0\n20\n:58\npts/1\n00\n:00:00\nps\n-af\n--sort\n+comm,-sid\njadi\n7678\n7651\n0\n20\n:48\npts/1\n00\n:00:00\nsleep\n1000\njadi\n7679\n7651\n0\n20\n:48\npts/1\n00\n:00:00\nsleep\n1001\njadi\n7775\n7651\n0\n20\n:58\npts/1\n00\n:00:00\nsleep\n1000\njadi\n7776\n7651\n0\n20\n:58\npts/1\n00\n:00:00\nsleep\n1000\njadi\n7777\n7651\n0\n20\n:58\npts/1\n00\n:00:00\nsleep\n1000\nroot\n5478\n5477\n0\n19\n:59\npts/12\n00\n:00:00\nsu\n-\nroot\n5477\n5008\n0\n19\n:59\npts/12\n00\n:00:00\nsudo\nsu\n-\njadi\n7680\n7651\n0\n20\n:48\npts/1\n00\n:00:01\nxeyes\npgrep\nYou've seen that\nps -ef\nshows processes from all users. We can\ngrep\non that and see who is running\ngedit\nand what is its process ID:\n$\nps\n-ef\n|\ngrep\ngedit\njadi\n6213\n4604\n9\n20\n:06\n?\n00\n:04:43\ngedit\njadi\n7725\n7651\n0\n20\n:55\npts/1\n00\n:00:00\ngrep\ngedit\nbut there is also a more direct way to check the PID of all gedit processes:\n$\npgrep\ngedit\n6213\ntop\nThis is the most common tool to do simple monitoring of the system. It will update the status and will give you a good glance at the status:\n$\ntop\ntop\n-\n21\n:\n00\n:\n44\nup\n1\n:\n16\n,\n5\nusers\n,\nload\naverage\n:\n1.51\n,\n1.65\n,\n1.78\nTasks\n:\n293\ntotal\n,\n1\nrunning\n,\n292\nsleeping\n,\n0\nstopped\n,\n0\nzombie\n%\nCpu\n(\ns\n):\n19.0\nus\n,\n5.0\nsy\n,\n0.0\nni\n,\n70.9\nid\n,\n5.1\nwa\n,\n0.0\nhi\n,\n0.0\nsi\n,\n0.0\nst\nKiB\nMem\n:\n8060264\ntotal\n,\n5359812\nused\n,\n2700452\nfree\n,\n169240\nbuffers\nKiB\nSwap\n:\n7811068\ntotal\n,\n0\nused\n,\n7811068\nfree\n.\n2250692\ncached\nMem\nPID\nUSER\nPR\nNI\nVIRT\nRES\nSHR\nS\n%\nCPU\n%\nMEM\nTIME\n+\nCOMMAND\n6570\njadi\n20\n0\n1437752\n546064\n88312\nS\n18.4\n6.8\n12\n:\n00.96\nfirefox\n4870\njadi\n20\n0\n1762516\n299120\n75664\nS\n12.2\n3.7\n7\n:\n37.05\ncompiz\n4492\njadi\n9\n-\n11\n455152\n11516\n8940\nS\n6.1\n0.1\n1\n:\n06.81\npulseaudio\n4532\nroot\n20\n0\n389028\n77116\n60192\nS\n6.1\n1.0\n12\n:\n16.63\nXorg\n4723\njadi\n20\n0\n358936\n8288\n5512\nS\n6.1\n0.1\n9\n:\n51.52\nibus\n-\ndaemon\n5648\njadi\n20\n0\n1641556\n203676\n102840\nS\n6.1\n2.5\n3\n:\n20.88\nchrome\n7082\njadi\n20\n0\n1210748\n73136\n42528\nS\n6.1\n0.9\n0\n:\n36.51\nTelegram\n7806\njadi\n20\n0\n33796\n3004\n2500\nR\n6.1\n0.0\n0\n:\n00.02\ntop\n1\nroot\n20\n0\n29528\n4320\n2584\nS\n0.0\n0.1\n0\n:\n01.71\ninit\nYou can see the processes, system load, uptime, CPU status, memory, ... and do some stuff:\nkey during top\nfunctionality\nh\nhelp\nq\nquit\nM\nsort based on memory usage\nc\nshow full commands\nk\nkill after asking pid and signal\nfree\nThe\nfree\ncommand will show you info about the system memory. The default is\nkilobytes\nbut you can change it with\n-m\nfor megabytes,\n-g\nfor\ngigabytes\nor even\n-b\nfor bytes. You can also use the\n-h\nfor\nhuman readable\n.\n$\nfree\n-m\ntotal\nused\nfree\nshared\nbuffers\ncached\nMem:\n7871\n5231\n2640\n332\n169\n2195\n-/+\nbuffers/cache:\n2866\n5005\nSwap:\n7627\n0\n7627\nA general\nhint\n: If your system is using Swap, you have memory issues.\nuptime\nThe\nuptime\ncommand shows the time, systems uptime (how long the system has been running), how many users are logged in, and the load average of 1, 5 & 15 minutes:\n$\nuptime\n21\n:\n18\n:\n52\nup\n1\n:\n34\n,\n5\nusers\n,\nload\naverage\n:\n2.38\n,\n2.64\n,\n2.41\nAlthough it's one of the most important KPIs of the system status, some of the experienced Linux admins do not know what the load average means. The load average shows how many processes are in the\nto be run\nqueue. If this number is higher than the number of your CPU cores, you are in a bad situation. If it's close to the number of your cores constantly, it's kind of dangerous, and if it's less than 1/10th of your core numbers, your system is kind of idle. Do you remember how to check the number of your cores? Its in\n/proc/cpuinfo\nor\nnproc\n.\nwatch\nSometimes you have a command which shows you an output but you want to keep running it and observing the output. In these cases, the\nwatch\nis your friend. It lets you run and check the output of a command in specific time intervals (default is 2 seconds).\n$\nwatch\nfree\n-h\nIf you have a pipe in your command, you have to quote the watched command in double-quote\n\"\nor single-quote\n'\n:\n$\nwatch\n\"ls -ltrh | wc -l\"\nThese are some of the switches:\n-n\nTo specify the interval in seconds\n-b\nBeep if the command has a non-zero exit\n-d\nShows the difference between runs\nTerminal Multiplexers\nscreen\nIf you are used to GUI based system, it's easy to run different terminals side to side and use them to run different programs. But if you are on a server, you need other tools to multiplex your terminal. One such command is\nscreen\n.\nRun it with\nscreen\nand press enter to exit the welcome window into a prompt. You can use it as a normal terminal and detach from it (and let it run in the background) using the Ctrl + A and then D keys. Check the list of your screens with\nscreen -ls\nand re-attach to any of them with\nscreen -r screen-id\n.\nBelow you can see a few common switches, they all should be issued after the\nCtrl + A\ncombination.\nKey\nUsage\n\\\nKill all processes windows and terminate the screen\n|\nSplit current window into two vertical focuses\nShift+S\nSplit current window into two horizontal focuses\nC\nCreate a window in the current focus\nTab\nGo to the next focus\nD\nDetach from window\nK\nKill current window\nN\nMove to Next window\nP\nMove to the Previous window\nA great point about screen (and tmux) is the fact it remains running even after you logout of the system and its possible to relogin and re-attach to the same screen (or tmux)\ntmux\nIs a screen on steroids! It is not installed by default in most distributions and you have to install it first. The default command prefix is\nCtrl+B\nand after running the\ntmux new\nyou can issue these:\nKey\nUsage\n%\nSplit current window vertically\n\"\nSplit current window horizontally\nD\nDetach from the current window\n&\nKill current window\nYou can list the tmux sessions using\ntmux ls\nand re-attach to one using\ntmux att\nto connect to the last one or\ntmux att -t session_name\nto attach to a specific one.\nI highly recommend being fluent in tmux. It's super useful even when you are working locally on your machine. watch the below video for the more in-depth session:\n← 103.4 Use streams, pipes, and redirects\nChapter List\n103.6 Modify process execution priorities →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "103.6 Modify process execution priorities",
    "url": "https://linux1st.com./1036-modify-process-execution-priorities.html",
    "extracted_title": "",
    "content": "Weight: 2\nCandidates should be able to manage process execution priorities.\nObjectives\nKnow the default priority of a job that is created.\nRun a program with higher or lower priority than the default.\nChange the priority of a running process.\nTerms\nnice\nps\nrenice\ntop\nOn a Linux machine, you might have 100s of processes running at the same time and competing for more CPU & RAM. The good news is that you can give some of the processes higher or lower priority (or nice-ness) in this competition. Let's have a look at a sample\ntop\noutput:\n$ top\nTasks: 169 total,   1 running, 168 sleeping,   0 stopped,   0 zombie\n%Cpu(s):  0.0 us,  3.0 sy,  0.0 ni, 97.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st\nMiB Mem :   5948.9 total,   4115.2 free,    438.2 used,   1395.5 buff/cache\nMiB Swap:    975.0 total,    975.0 free,      0.0 used.   5210.3 avail Mem\nPID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND\n6496 jadi      20   0   10112   3704   3212 R   6.2   0.1   0:00.01 top\n1 root      20   0  165172  10576   7780 S   0.0   0.2   0:02.80 systemd\n2 root      20   0       0      0      0 S   0.0   0.0   0:00.09 kthreadd\n3 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 rcu_gp\n4 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 rcu_par_gp\n6 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 kworker/0:0H-events_highpri\n8 root       0 -20       0      0      0 I   0.0   0.0   0:12.71 kworker/0:1H-events_highpri\n9 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 mm_percpu_wq\n10 root      20   0       0      0      0 S   0.0   0.0   0:00.00 rcu_tasks_rude_\n11 root      20   0       0      0      0 S   0.0   0.0   0:00.00 rcu_tasks_trace\nThe\nNI\ncolumn shows how\nnice\nthis process is. The nicer the process, the less CPU it asks. The\nnice\nvalues can be from -20 to 19. To interpret this value, look at it like this: a process with nice =\n-20\nis ANGRY and gets more priority for CPU and RAM while a process with nice =\n19\nis SUPER NICE and lets\nother\nprocesses use the resources before her).\nThe default value for\nnice\nis normally set to 0; this can be checked with:\n$\nnice\n0\nYou can also check the nice-ness using the\nps\ncommand:\n$ ps -l\nF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD\n0 S  1000 15044 15035  0  80   0 -  7453 wait   pts/29   00:00:00 bash\n0 S  1000 15052 15044  0  60 -20 -  3976 hrtime pts/29   00:00:00 sleep\n0 R  1000 15080 15044  0  80   0 -  4680 -      pts/29   00:00:00 ps\nSetting nice-ness\nIf you need to change the niceness level of a program you can run it with\nnice\ncommand and\n-n\nswitch (for nice):\n$ nice -n 19 echo \"I am running!\"\nI am running!\n$ nice -n -20 echo \"I am running!\"\nnice: cannot set niceness: Permission denied\nI am running!\n$ sudo nice -n -20 echo \"I am running!\"\nI am running!\nAs you can in the above example, only the root can issue high-priority niceness (below 0).\nIf you run a command with\nnice\nwithout\n-n\n, the default will be\n-n 10\n$ nice xeyes &\n[1] 15217\n$ ps -l\nF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD\n0 S  1000 15044 15035  0  80   0 -  7455 wait   pts/29   00:00:00 bash\n0 S  1000 15217 15044  0  90  10 - 12522 poll_s pts/29   00:00:00 xeyes\n0 R  1000 15218 15044  0  80   0 -  4680 -      pts/29   00:00:00 ps\nChanging priorities\nThe\nrenice\ncommand can be used to change the\nniceness\nof your running processes (or others if you are root):\n$ ps -ef | grep firefox\njadi     13605 11226 30 08:28 ?        00:10:13 /usr/lib/firefox/firefox\njadi     15192 15044  0 09:01 pts/29   00:00:00 grep firefox\n$ sudo renice -n -10 13605\n13605 (process ID) old priority 5, new priority -10\nYou can also press\nr\nin\ntop\ncommand to renice a process\n← 103.5 Create, monitor, and kill processes\nChapter List\n103.7 Search text files using regular expressions →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "103.8 Basic file editing",
    "url": "https://linux1st.com./1038-basic-file-editing.html",
    "extracted_title": "",
    "content": "Weight: 3\nCandidates should be able to edit text files using vi. This objective includes vi navigation, vi modes, inserting, editing, deleting, copying and finding text. It also includes awareness of other common editors and setting the default editor.\nObjectives\nNavigate a document using vi.\nUnderstand and use vi modes.\nInsert, edit, delete, copy and find text in vi.\nAwareness of Emacs, nano and vim.\nConfigure the standard editor.\nvi\n/, ?\nh,j,k,l\ni, o, a\nd, p, y, dd, yy\nZZ, :w!, :q!\nEDITOR\nIntroduction\nAs any other tool, we have a wide range of selection when it comes to text editors. One of the most common and super powerful choices is the\nvi\neditor. It is pre-installed on all major Linux distributions and you can be sure that knowing it, will let you edit your files on all environments, let it be a remote server over SSH or a coding environment on your desktop machine or a CyberDeck machine with a minimal keyboard. Its only\ndrawback\nmight be its kind of slow learning curve but I'm sure after a 1 hour session with it, you will manage to find your way in\nvi\n.\nThere is an\nImproved\nversion of\nvi\nwhich is called\nVIMproved\nor\nvim\n. Sometimes thats what you will find on your system and sometimes the\nvi\ncommand is aliased or linked to\nvim\n. Lets check this on our system (Ubuntu 22.04):\njadi\n@\nfunlife\n:\n~$\nwhatis\nvi\nvi\n(\n1\n)\n-\nVi\nIMproved\n,\na\nprogrammer\n's text editor\njadi\n@\nfunlife\n:\n~$\nwhereis\nvi\nvi\n:\n/\nusr\n/\nbin\n/\nvi\n/\nusr\n/\nshare\n/\nman\n/\nman1\n/\nvi\n.\n1.\ngz\njadi\n@\nfunlife\n:\n~$\nwhatis\nvim\nvim\n(\n1\n)\n-\nVi\nIMproved\n,\na\nprogrammer\n's text editor\njadi\n@\nfunlife\n:\n~$\nwhereis\nvim\nvim\n:\n/\nusr\n/\nbin\n/\nvim\n/\netc\n/\nvim\n/\nusr\n/\nshare\n/\nvim\n/\nusr\n/\nshare\n/\nman\n/\nman1\n/\nvim\n.\n1.\ngz\njadi\n@\nfunlife\n:\n~$\nvi\n--\nversion\nVIM\n-\nVi\nIMproved\n9.0\n(\n2022\nJun\n28\n,\ncompiled\nAug\n23\n2022\n20\n:\n18\n:\n58\n)\nIncluded\npatches\n:\n1\n-\n242\nModified\nby\nteam\n+\nvim\n@\ntracker\n.\ndebian\n.\norg\nCompiled\nby\nteam\n+\nvim\n@\ntracker\n.\ndebian\n.\norg\nHuge\nversion\nwithout\nGUI\n.\nFeatures\nincluded\n(\n+\n)\nor\nnot\n(\n-\n):\n+\nacl\n+\nfile_in_path\n+\nmouse_urxvt\n-\ntag_any_white\n+\narabic\n+\nfind_in_path\n+\nmouse_xterm\n-\ntcl\n+\nautocmd\n+\nfloat\n+\nmulti_byte\n+\ntermguicolors\n+\nautochdir\n+\nfolding\n+\nmulti_lang\n+\nterminal\n-\nautoservername\n-\nfooter\n-\nmzscheme\n+\nterminfo\n-\nballoon_eval\n+\nfork\n()\n+\nnetbeans_intg\n+\ntermresponse\n+\nballoon_eval_term\n+\ngettext\n+\nnum64\n+\ntextobjects\n-\nbrowse\n-\nhangul_input\n+\npackages\n+\ntextprop\n++\nbuiltin_terms\n+\niconv\n+\npath_extra\n+\ntimers\n+\nbyte_offset\n+\ninsert_expand\n-\nperl\n+\ntitle\n+\nchannel\n+\nipv6\n+\npersistent_undo\n-\ntoolbar\n+\ncindent\n+\njob\n+\npopupwin\n+\nuser_commands\n-\nclientserver\n+\njumplist\n+\npostscript\n+\nvartabs\n-\nclipboard\n+\nkeymap\n+\nprinter\n+\nvertsplit\n+\ncmdline_compl\n+\nlambda\n+\nprofile\n+\nvim9script\n+\ncmdline_hist\n+\nlangmap\n-\npython\n+\nviminfo\n+\ncmdline_info\n+\nlibcall\n+\npython3\n+\nvirtualedit\n+\ncomments\n+\nlinebreak\n+\nquickfix\n+\nvisual\n+\nconceal\n+\nlispindent\n+\nreltime\n+\nvisualextra\n+\ncryptv\n+\nlistcmds\n+\nrightleft\n+\nvreplace\n+\ncscope\n+\nlocalmap\n-\nruby\n+\nwildignore\n+\ncursorbind\n-\nlua\n+\nscrollbind\n+\nwildmenu\n+\ncursorshape\n+\nmenu\n+\nsigns\n+\nwindows\n+\ndialog_con\n+\nmksession\n+\nsmartindent\n+\nwritebackup\n+\ndiff\n+\nmodify_fname\n+\nsodium\n-\nX11\n+\ndigraphs\n+\nmouse\n-\nsound\n-\nxfontset\n-\ndnd\n-\nmouseshape\n+\nspell\n-\nxim\n-\nebcdic\n+\nmouse_dec\n+\nstartuptime\n-\nxpm\n+\nemacs_tags\n+\nmouse_gpm\n+\nstatusline\n-\nxsmp\n+\neval\n-\nmouse_jsbterm\n-\nsun_workshop\n-\nxterm_clipboard\n+\nex_extra\n+\nmouse_netterm\n+\nsyntax\n-\nxterm_save\n+\nextra_search\n+\nmouse_sgr\n+\ntag_binary\n-\nfarsi\n-\nmouse_sysmouse\n-\ntag_old_static\nsystem\nvimrc\nfile\n:\n\"/etc/vim/vimrc\"\nuser\nvimrc\nfile\n:\n\"$HOME/.vimrc\"\n2\nnd\nuser\nvimrc\nfile\n:\n\"~/.vim/vimrc\"\nuser\nexrc\nfile\n:\n\"$HOME/.exrc\"\ndefaults\nfile\n:\n\"$VIMRUNTIME/defaults.vim\"\nfall\n-\nback\nfor\n$\nVIM\n:\n\"/usr/share/vim\"\nCompilation\n:\ngcc\n-\nc\n-\nI\n.\n-\nIproto\n-\nDHAVE_CONFIG_H\n-\nWdate\n-\ntime\n-\ng\n-\nO2\n-\nffile\n-\nprefix\n-\nmap\n=/\nbuild\n/\nvim\n-\nOy69Mt\n/\nvim\n-\n9.0\n.\n0242\n=.\n-\nflto\n=\nauto\n-\nffat\n-\nlto\n-\nobjects\n-\nflto\n=\nauto\n-\nffat\n-\nlto\n-\nobjects\n-\nfstack\n-\nprotector\n-\nstrong\n-\nWformat\n-\nWerror\n=\nformat\n-\nsecurity\n-\nDSYS_VIMRC_FILE\n=\n\\\n\"/etc/vim/vimrc\n\\\"\n-DSYS_GVIMRC_FILE=\n\\\"\n/etc/vim/gvimrc\n\\\"\n-D_REENTRANT -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=1\nLinking\n:\ngcc\n-\nWl\n,\n-\nBsymbolic\n-\nfunctions\n-\nflto\n=\nauto\n-\nffat\n-\nlto\n-\nobjects\n-\nflto\n=\nauto\n-\nWl\n,\n-\nz\n,\nrelro\n-\nWl\n,\n-\nz\n,\nnow\n-\nWl\n,\n--\nas\n-\nneeded\n-\no\nvim\n-\nlm\n-\nltinfo\n-\nlselinux\n-\nlsodium\n-\nlacl\n-\nlattr\n-\nlgpm\n-\nL\n/\nusr\n/\nlib\n/\npython3\n.\n10\n/\nconfig\n-\n3.10\n-\nx86_64\n-\nlinux\n-\ngnu\n-\nlpython3\n.\n10\n-\nlcrypt\n-\nldl\n-\nlm\n-\nlm\nTo edit a file with vi, just give the file name to it:\n$ vi file.txt\nvi modes\nvi\nworks in two modes:\nCommand mode\nis where you go around the file, search, delete text, copy paste, replace, ... and give other commands to the vi. Some commands start with a\n:\nand some are only a keypress.\nInsert mode\nis where what you type, goes into the file at the cursors position.\nTo switch to the Command mode, press the ESC key. To go back to the Insert mode, you can use several commands but one common one is pressing the\ni\nkey.\nMoving the cursor\nTo move around a text file, use these keys in Command mode:\nkey\nfunction\nh\nOne character to the left (only current line)\nj\nOne line down\nk\nOne line up\nl\nOne character to the right (only current line)\nw\nNext word on the current line\ne\nNext end of word on the current line\nb\nPrevious beginning of the word on the current line\nCtrl-f\nScroll forward one page\nCtrl-b\nScroll backward one page\nTyping a number before most commands will repeat the command that many times (i.e.\n6h\nwill go 6 characters to the left)\nJumping around\nkey\nfunction\nG\nWith no number, will jump to the end & 10G will jump to line 10\nH\n5H will go to the 5th line from the top of the screen\nL\n3L will move the cursor to the 3rd line to the last line of the screen\nEditing text\nThese command during the\ncommand mode\nwill help you enter, edit, replace and text:\nkey\nfunction\ni\nEnter the insert mode\na\nEnter the insert mode after the current position of the cursor\nr\nreplace only one character\no\nopen a new line below the cursor and go to the insert mode\nO\nopen a new line above the cursor and go to the insert mode\nc\nclear to a location and go to the insert mode the replace till there and then normal insert (\ncw\nwill overwrite the current word)\nd\ndelete. you can mix with w (\ndw\n) to delete a word. Same as cw but dw does not go to the insert mode\ndd\nDelete the current line\nx\nDelete character at the position of the cursor\np\nPaste the last deleted text after the cursor\nP\nPaste the last deleted text before the cursor\nxp\nswaps the character at the cursor position with the one on its right\nSearching\nkey\nfunction\n/\nSearch forward (\n/happiness\nwill find the next happiness)\n?\nSearch backward\nn\nrepeat previous search. You can also use\n/\nand\n?\nwithout any parameters)\nSearch wraps around to the top once the bottom of file is reached\nExiting\nIt is always funny when you see someone entering to the vi and not knowing how to exit! Learn these and prevent the laughter:\nkey\nfunction\n:q!\nQuit editing without saving = runaway after any mistake\n:w!\nWrite the file (whether modified or not). Attempt to overwrite existing files or read-only or other unwritable files\n:w myfile.txt\nWrite to a new name\nZZ\nExit and save the file if modified\n:e!\nReload the file from disk\n:!\nRun a shell command\nEntering colon (\n:\n) during\ncommand mode\nwill move the cursor to the bottom of the screen and vi will wait for your commands. Press ESC to return back to the normal command mode.\nThe exclamation mark in most commands will say \"I know what I'm doing\" and will write on read-only files if you have access and will exit without asking\nit is possible to combine commands. For example you can combine\n:w\nand\n:q\nand just say\n:wq\n(write and exit).\nhelp\nYou can always ask for help with\n:help\nor\n:help subject\n. This way vi will open a help text which you can use / search just like any other text. Close it with\n:q\ncommand.\nOther editors\nYou can also use other editors if you want. One easy to use and common option is\nnano\nand some other choices are\nmicro\n,\nemacs\n(full featured) and\nneovim\n(an update to vim).\nDefault editor\nThe default editor in\nbash\nis set using the\nEDITOR\nenvironment variable. You can change it with:\n$\nexport\nEDITOR\n=\n'vim'\nor by adding the above line to the\n.bashrc\nfile. We will see these in more details in next chapters.\n← 103.7 Search text files using regular expressions\nChapter List\n104.1 Create partitions and filesystems →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "104.1 Create partitions and filesystems",
    "url": "https://linux1st.com./1041-create-partitions-and-filesystems.html",
    "extracted_title": "",
    "content": "Weight: 2\nDescription: Candidates should be able to configure disk partitions and then create filesystems on media such as hard disks. This includes the handling of swap partitions.\nObjective\nManage MBR and GPT partition tables\nUse various mkfs commands to create various filesystems such as:\next2/ext3/ext4\nXFS\nVFAT\nexFAT\nBasic feature knowledge of Btrfs, including multi-device filesystems, compression and subvolumes.\nfdisk\ngdisk\nparted\nmkfs\nmkswap\nBlock devices\nA block device is a nonvolatile mass storage device whose information can be accessed in any order; like hard disks, USB memories, floppy disks, and CD-ROMs. We\nformat\nthese devices to fixed sized blocks.\nWe can check all block devices using\nlsblk\ncommand. In addition on a long ls format (\n-l\n), block devices are shown with a\nb\nat the first column:\njadi\n@debianamd\n:\n~\n$\nls\n/\ndev\n/\n-\nl\n|\ngrep\n\"^b\"\nbrw\n-\nrw\n----\n1\nroot\ndisk\n8\n,\n0\nFeb\n3\n2023\nsda\nbrw\n-\nrw\n----\n1\nroot\ndisk\n8\n,\n16\nFeb\n3\n2023\nsdb\nbrw\n-\nrw\n----\n1\nroot\ndisk\n8\n,\n17\nFeb\n3\n2023\nsdb1\nbrw\n-\nrw\n----\n1\nroot\ndisk\n8\n,\n18\nFeb\n3\n2023\nsdb2\nbrw\n-\nrw\n----\n1\nroot\ndisk\n8\n,\n19\nFeb\n3\n2023\nsdb3\nbrw\n-\nrw\n----+ 1 root cdrom    11,   0 Feb  3  2023 sr0\nIt is possible to create\npartitions\non a block device and even split it and use it as multiple disks. Systems with old BIOS boot loaders use the\nMaster Boot Record (MBR)\nmethod for patitioning and newer UEFI systems, do you\nGUID Parition Table (GPT)\nformats.\nLinux systems use\nudev\nto add block devices and their paritions to the\n/dev\nin the form of\n/dev/sdb1\n(2nd disk (b) and first parition (1)).\nEditing Partition Tables\nfdisk\nfdisk\nis the main command for viewing / changing and creating partitions on MBR systems. the\n-l\nswitch lists the partitions:\n#\nfdisk\n-\nl\n/\ndev\n/\nsdb\nDisk\n/\ndev\n/\nsdb\n:\n20\nGiB\n,\n21474836480\nbytes\n,\n41943040\nsectors\nDisk\nmodel\n:\nQEMU\nHARDDISK\nUnits\n:\nsectors\nof\n1\n*\n512\n=\n512\nbytes\nSector\nsize\n(\nlogical\n/\nphysical\n):\n512\nbytes\n/\n512\nbytes\nI\n/\nO\nsize\n(\nminimum\n/\noptimal\n):\n512\nbytes\n/\n512\nbytes\nDisklabel\ntype\n:\ngpt\nDisk\nidentifier\n:\n11\nD48091\n-\n5\nAA7\n-\n422\nA\n-\n85\nF7\n-\nA23F476CDFD7\nDevice\nStart\nEnd\nSectors\nSize\nType\n/\ndev\n/\nsdb1\n2048\n1050623\n1048576\n512\nM\nEFI\nSystem\n/\ndev\n/\nsdb2\n1050624\n39942143\n38891520\n18.5\nG\nLinux\nfilesystem\n/\ndev\n/\nsdb3\n39942144\n41940991\n1998848\n976\nM\nLinux\nswap\nThe\nBoot\nflag shows which partition starts the boot on DOS PCs and has no importance on LILO & GRUB\nStart and End shows where this partition is located on the disk.\nSize shows each partition size .\nID indicates the partition format (82 is swap, 83 is linux data, ... check all with\nl\nin interactive mode)\nIt is also possible to run fdisk in interactive mode.\nm\nwill show you the help menu:\n~\n# fdisk /dev/sda\nWelcome\nto\nfdisk\n(\nutil\n-\nlinux\n2.36\n.\n1\n)\n.\nChanges\nwill\nremain\nin\nmemory\nonly\n,\nuntil\nyou\ndecide\nto\nwrite\nthem\n.\nBe\ncareful\nbefore\nusing\nthe\nwrite\ncommand\n.\nDevice\ndoes\nnot\ncontain\na\nrecognized\npartition\ntable\n.\nCreated\na\nnew\nDOS\ndisklabel\nwith\ndisk\nidentifier\n0xe2dbaded\n.\nCommand\n(\nm\nfor\nhelp\n):\nm\nHelp\n:\nDOS\n(\nMBR\n)\na\ntoggle\na\nbootable\nflag\nb\nedit\nnested\nBSD\ndisklabel\nc\ntoggle\nthe\ndos\ncompatibility\nflag\nGeneric\nd\ndelete\na\npartition\nF\nlist\nfree\nunpartitioned\nspace\nl\nlist\nknown\npartition\ntypes\nn\nadd\na\nnew\npartition\np\nprint\nthe\npartition\ntable\nt\nchange\na\npartition\ntype\nv\nverify\nthe\npartition\ntable\ni\nprint\ninformation\nabout\na\npartition\nMisc\nm\nprint\nthis\nmenu\nu\nchange\ndisplay\n/\nentry\nunits\nx\nextra\nfunctionality\n(\nexperts\nonly\n)\nScript\nI\nload\ndisk\nlayout\nfrom\nsfdisk\nscript\nfile\nO\ndump\ndisk\nlayout\nto\nsfdisk\nscript\nfile\nSave\n&\nExit\nw\nwrite\ntable\nto\ndisk\nand\nexit\nq\nquit\nwithout\nsaving\nchanges\nCreate\na\nnew\nlabel\ng\ncreate\na\nnew\nempty\nGPT\npartition\ntable\nG\ncreate\na\nnew\nempty\nSGI\n(\nIRIX\n)\npartition\ntable\no\ncreate\na\nnew\nempty\nDOS\npartition\ntable\ns\ncreate\na\nnew\nempty\nSun\npartition\ntable\nCommand\n(\nm\nfor\nhelp\n):\nTo check current partition list, try the\np\n(print) command:\nCommand\n(\nm\nfor\nhelp\n):\np\nDisk\n/\ndev\n/\nsdb\n:\n20\nGiB\n,\n21474836480\nbytes\n,\n41943040\nsectors\nDisk\nmodel\n:\nQEMU\nHARDDISK\nUnits\n:\nsectors\nof\n1\n*\n512\n=\n512\nbytes\nSector\nsize\n(\nlogical\n/\nphysical\n):\n512\nbytes\n/\n512\nbytes\nI\n/\nO\nsize\n(\nminimum\n/\noptimal\n):\n512\nbytes\n/\n512\nbytes\nDisklabel\ntype\n:\ngpt\nDisk\nidentifier\n:\n11\nD48091\n-\n5\nAA7\n-\n422\nA\n-\n85\nF7\n-\nA23F476CDFD7\nDevice\nStart\nEnd\nSectors\nSize\nType\n/\ndev\n/\nsdb1\n2048\n1050623\n1048576\n512\nM\nEFI\nSystem\n/\ndev\n/\nsdb2\n1050624\n39942143\n38891520\n18.5\nG\nLinux\nfilesystem\n/\ndev\n/\nsdb3\n39942144\n41940991\n1998848\n976\nM\nLinux\nswap\nYou should remember the disk layouts concepts from the\nchapter 102.1\n. So lets create some paritions using\nfdisk\n. I will use the\nn\nfor\nnew\n:\n#\nfdisk\n/\ndev\n/\nsda\nWelcome\nto\nfdisk\n(\nutil\n-\nlinux\n2.36.1\n).\nChanges\nwill\nremain\nin\nmemory\nonly\n,\nuntil\nyou\ndecide\nto\nwrite\nthem\n.\nBe\ncareful\nbefore\nusing\nthe\nwrite\ncommand\n.\nDevice\ndoes\nnot\ncontain\na\nrecognized\npartition\ntable\n.\nCreated\na\nnew\nDOS\ndisklabel\nwith\ndisk\nidentifier\n0x40bd0f72\n.\nCommand\n(\nm\nfor\nhelp\n):\nn\nPartition\ntype\np\nprimary\n(\n0\nprimary\n,\n0\nextended\n,\n4\nfree\n)\ne\nextended\n(\ncontainer\nfor\nlogical\npartitions\n)\nSelect\n(\ndefault\np\n):\np\nPartition\nnumber\n(\n1\n-\n4\n,\ndefault\n1\n):\nFirst\nsector\n(\n2048\n-\n8388607\n,\ndefault\n2048\n):\nLast\nsector\n,\n+/-\nsectors\nor\n+/-\nsize\n{\nK\n,\nM\n,\nG\n,\nT\n,\nP\n}\n(\n2048\n-\n8388607\n,\ndefault\n8388607\n):\n+\n1\nG\nCreated\na\nnew\npartition\n1\nof\ntype\n'\nLinux\n'\nand\nof\nsize\n1\nGiB\n.\nCommand\n(\nm\nfor\nhelp\n):\np\nDisk\n/\ndev\n/\nsda\n:\n4\nGiB\n,\n4294967296\nbytes\n,\n8388608\nsectors\nDisk\nmodel\n:\nQEMU\nHARDDISK\nUnits\n:\nsectors\nof\n1\n*\n512\n=\n512\nbytes\nSector\nsize\n(\nlogical\n/\nphysical\n):\n512\nbytes\n/\n512\nbytes\nI\n/\nO\nsize\n(\nminimum\n/\noptimal\n):\n512\nbytes\n/\n512\nbytes\nDisklabel\ntype\n:\ndos\nDisk\nidentifier\n:\n0x40bd0f72\nDevice\nBoot\nStart\nEnd\nSectors\nSize\nId\nType\n/\ndev\n/\nsda1\n2048\n2099199\n2097152\n1\nG\n83\nLinux\nLets  create another Extened parition and add a Linux (83) and a Swap (82) parition there.\nCommand\n(\nm\nfor\nhelp\n):\nn\nPartition\ntype\np\nprimary\n(\n1\nprimary\n,\n0\nextended\n,\n3\nfree\n)\ne\nextended\n(\ncontainer\nfor\nlogical\npartitions\n)\nSelect\n(\ndefault\np\n):\ne\nPartition\nnumber\n(\n2\n-\n4\n,\ndefault\n2\n):\nFirst\nsector\n(\n2099200\n-\n8388607\n,\ndefault\n2099200\n):\nLast\nsector\n,\n+/-\nsectors\nor\n+/-\nsize\n{\nK\n,\nM\n,\nG\n,\nT\n,\nP\n}\n(\n2099200\n-\n8388607\n,\ndefault\n8388607\n):\nCreated\na\nnew\npartition\n2\nof\ntype\n'\nExtended\n'\nand\nof\nsize\n3\nGiB\n.\nCommand\n(\nm\nfor\nhelp\n):\np\nDisk\n/\ndev\n/\nsda\n:\n4\nGiB\n,\n4294967296\nbytes\n,\n8388608\nsectors\nDisk\nmodel\n:\nQEMU\nHARDDISK\nUnits\n:\nsectors\nof\n1\n*\n512\n=\n512\nbytes\nSector\nsize\n(\nlogical\n/\nphysical\n):\n512\nbytes\n/\n512\nbytes\nI\n/\nO\nsize\n(\nminimum\n/\noptimal\n):\n512\nbytes\n/\n512\nbytes\nDisklabel\ntype\n:\ndos\nDisk\nidentifier\n:\n0x40bd0f72\nDevice\nBoot\nStart\nEnd\nSectors\nSize\nId\nType\n/\ndev\n/\nsda1\n2048\n2099199\n2097152\n1\nG\n83\nLinux\n/\ndev\n/\nsda2\n2099200\n8388607\n6289408\n3\nG\n5\nExtended\nCommand\n(\nm\nfor\nhelp\n):\nn\nAll\nspace\nfor\nprimary\npartitions\nis\nin\nuse\n.\nAdding\nlogical\npartition\n5\nFirst\nsector\n(\n2101248\n-\n8388607\n,\ndefault\n2101248\n):\nLast\nsector\n,\n+/-\nsectors\nor\n+/-\nsize\n{\nK\n,\nM\n,\nG\n,\nT\n,\nP\n}\n(\n2101248\n-\n8388607\n,\ndefault\n8388607\n):\nCreated\na\nnew\npartition\n5\nof\ntype\n'\nLinux\n'\nand\nof\nsize\n3\nGiB\n.\nCommand\n(\nm\nfor\nhelp\n):\np\nDisk\n/\ndev\n/\nsda\n:\n4\nGiB\n,\n4294967296\nbytes\n,\n8388608\nsectors\nDisk\nmodel\n:\nQEMU\nHARDDISK\nUnits\n:\nsectors\nof\n1\n*\n512\n=\n512\nbytes\nSector\nsize\n(\nlogical\n/\nphysical\n):\n512\nbytes\n/\n512\nbytes\nI\n/\nO\nsize\n(\nminimum\n/\noptimal\n):\n512\nbytes\n/\n512\nbytes\nDisklabel\ntype\n:\ndos\nDisk\nidentifier\n:\n0x40bd0f72\nDevice\nBoot\nStart\nEnd\nSectors\nSize\nId\nType\n/\ndev\n/\nsda1\n2048\n2099199\n2097152\n1\nG\n83\nLinux\n/\ndev\n/\nsda2\n2099200\n8388607\n6289408\n3\nG\n5\nExtended\n/\ndev\n/\nsda5\n2101248\n8388607\n6287360\n3\nG\n83\nLinux\nOh! I forgot to allocate space for the swap partition. Lets delete the previous one and add two new ones:\nCommand\n(\nm\nfor\nhelp\n):\nd\nPartition\nnumber\n(\n1\n,\n2\n,\n5\n,\ndefault\n5\n):\n5\nPartition\n5\nhas\nbeen\ndeleted\n.\nCommand\n(\nm\nfor\nhelp\n):\nn\nAll\nspace\nfor\nprimary\npartitions\nis\nin\nuse\n.\nAdding\nlogical\npartition\n5\nFirst\nsector\n(\n2101248\n-\n8388607\n,\ndefault\n2101248\n):\nLast\nsector\n,\n+/-\nsectors\nor\n+/-\nsize\n{\nK\n,\nM\n,\nG\n,\nT\n,\nP\n}\n(\n2101248\n-\n8388607\n,\ndefault\n8388607\n):\n+\n1\nG\nCreated\na\nnew\npartition\n5\nof\ntype\n'\nLinux\n'\nand\nof\nsize\n1\nGiB\n.\nCommand\n(\nm\nfor\nhelp\n):\np\nDisk\n/\ndev\n/\nsda\n:\n4\nGiB\n,\n4294967296\nbytes\n,\n8388608\nsectors\nDisk\nmodel\n:\nQEMU\nHARDDISK\nUnits\n:\nsectors\nof\n1\n*\n512\n=\n512\nbytes\nSector\nsize\n(\nlogical\n/\nphysical\n):\n512\nbytes\n/\n512\nbytes\nI\n/\nO\nsize\n(\nminimum\n/\noptimal\n):\n512\nbytes\n/\n512\nbytes\nDisklabel\ntype\n:\ndos\nDisk\nidentifier\n:\n0x40bd0f72\nDevice\nBoot\nStart\nEnd\nSectors\nSize\nId\nType\n/\ndev\n/\nsda1\n2048\n2099199\n2097152\n1\nG\n83\nLinux\n/\ndev\n/\nsda2\n2099200\n8388607\n6289408\n3\nG\n5\nExtended\n/\ndev\n/\nsda5\n2101248\n4198399\n2097152\n1\nG\n83\nLinux\nCommand\n(\nm\nfor\nhelp\n):\nn\nAll\nspace\nfor\nprimary\npartitions\nis\nin\nuse\n.\nAdding\nlogical\npartition\n6\nFirst\nsector\n(\n4200448\n-\n8388607\n,\ndefault\n4200448\n):\nLast\nsector\n,\n+/-\nsectors\nor\n+/-\nsize\n{\nK\n,\nM\n,\nG\n,\nT\n,\nP\n}\n(\n4200448\n-\n8388607\n,\ndefault\n8388607\n):\nCreated\na\nnew\npartition\n6\nof\ntype\n'\nLinux\n'\nand\nof\nsize\n2\nGiB\n.\nAnd now, I have to change the type of the parition 6 to swap:\nCommand\n(\nm\nfor\nhelp\n):\nt\nPartition\nnumber\n(\n1\n,\n2\n,\n5\n,\n6\n,\ndefault\n6\n):\n6\nHex\ncode\nor\nalias\n(\ntype\nL\nto\nlist\nall\n):\nL\n00\nEmpty\n24\nNEC\nDOS\n81\nMinix\n/\nold\nLin\nbf\nSolaris\n01\nFAT12\n27\nHidden\nNTFS\nWin\n82\nLinux\nswap\n/\nSo\nc1\nDRDOS\n/\nsec\n(\nFAT\n-\n02\nXENIX\nroot\n39\nPlan\n9\n83\nLinux\nc4\nDRDOS\n/\nsec\n(\nFAT\n-\n03\nXENIX\nusr\n3\nc\nPartitionMagic\n84\nOS\n/\n2\nhidden\nor\nc6\nDRDOS\n/\nsec\n(\nFAT\n-\n04\nFAT16\n<\n32\nM\n40\nVenix\n80286\n85\nLinux\nextended\nc7\nSyrinx\n05\nExtended\n41\nPPC\nPReP\nBoot\n86\nNTFS\nvolume\nset\nda\nNon\n-\nFS\ndata\n06\nFAT16\n42\nSFS\n87\nNTFS\nvolume\nset\ndb\nCP\n/\nM\n/\nCTOS\n/\n.\n07\nHPFS\n/\nNTFS\n/\nexFAT\n4\nd\nQNX4\n.\nx\n88\nLinux\nplaintext\nde\nDell\nUtility\n08\nAIX\n4\ne\nQNX4\n.\nx\n2\nnd\npart\n8\ne\nLinux\nLVM\ndf\nBootIt\n09\nAIX\nbootable\n4\nf\nQNX4\n.\nx\n3\nrd\npart\n93\nAmoeba\ne1\nDOS\naccess\n0\na\nOS\n/\n2\nBoot\nManag\n50\nOnTrack\nDM\n94\nAmoeba\nBBT\ne3\nDOS\nR\n/\nO\n0\nb\nW95\nFAT32\n51\nOnTrack\nDM6\nAux\n9\nf\nBSD\n/\nOS\ne4\nSpeedStor\n0\nc\nW95\nFAT32\n(\nLBA\n)\n52\nCP\n/\nM\na0\nIBM\nThinkpad\nhi\nea\nLinux\nextended\n0\ne\nW95\nFAT16\n(\nLBA\n)\n53\nOnTrack\nDM6\nAux\na5\nFreeBSD\neb\nBeOS\nfs\n0\nf\nW95\nExt\n'\nd\n(\nLBA\n)\n54\nOnTrackDM6\na6\nOpenBSD\nee\nGPT\n10\nOPUS\n55\nEZ\n-\nDrive\na7\nNeXTSTEP\nef\nEFI\n(\nFAT\n-\n12\n/\n16\n/\n11\nHidden\nFAT12\n56\nGolden\nBow\na8\nDarwin\nUFS\nf0\nLinux\n/\nPA\n-\nRISC\nb\n12\nCompaq\ndiagnost\n5\nc\nPriam\nEdisk\na9\nNetBSD\nf1\nSpeedStor\n14\nHidden\nFAT16\n<\n3\n61\nSpeedStor\nab\nDarwin\nboot\nf4\nSpeedStor\n16\nHidden\nFAT16\n63\nGNU\nHURD\nor\nSys\naf\nHFS\n/\nHFS\n+\nf2\nDOS\nsecondary\n17\nHidden\nHPFS\n/\nNTF\n64\nNovell\nNetware\nb7\nBSDI\nfs\nfb\nVMware\nVMFS\n18\nAST\nSmartSleep\n65\nNovell\nNetware\nb8\nBSDI\nswap\nfc\nVMware\nVMKCORE\n1\nb\nHidden\nW95\nFAT3\n70\nDiskSecure\nMult\nbb\nBoot\nWizard\nhid\nfd\nLinux\nraid\nauto\n1\nc\nHidden\nW95\nFAT3\n75\nPC\n/\nIX\nbc\nAcronis\nFAT32\nL\nfe\nLANstep\n1\ne\nHidden\nW95\nFAT1\n80\nOld\nMinix\nbe\nSolaris\nboot\nff\nBBT\nAliases\n:\nlinux\n-\n83\nswap\n-\n82\nextended\n-\n05\nuefi\n-\nEF\nraid\n-\nFD\nlvm\n-\n8\nE\nlinuxex\n-\n85\nHex\ncode\nor\nalias\n(\ntype\nL\nto\nlist\nall\n):\nswap\nChanged\ntype\nof\npartition\n'\nLinux\n'\nto\n'\nLinux\nswap\n/\nSolaris\n'\n.\nCommand\n(\nm\nfor\nhelp\n):\np\nDisk\n/\ndev\n/\nsda\n:\n4\nGiB\n,\n4294967296\nbytes\n,\n8388608\nsectors\nDisk\nmodel\n:\nQEMU\nHARDDISK\nUnits\n:\nsectors\nof\n1\n*\n512\n=\n512\nbytes\nSector\nsize\n(\nlogical\n/\nphysical\n):\n512\nbytes\n/\n512\nbytes\nI\n/\nO\nsize\n(\nminimum\n/\noptimal\n):\n512\nbytes\n/\n512\nbytes\nDisklabel\ntype\n:\ndos\nDisk\nidentifier\n:\n0x40bd0f72\nDevice\nBoot\nStart\nEnd\nSectors\nSize\nId\nType\n/\ndev\n/\nsda1\n2048\n2099199\n2097152\n1\nG\n83\nLinux\n/\ndev\n/\nsda2\n2099200\n8388607\n6289408\n3\nG\n5\nExtended\n/\ndev\n/\nsda5\n2101248\n4198399\n2097152\n1\nG\n83\nLinux\n/\ndev\n/\nsda6\n4200448\n8388607\n4188160\n2\nG\n82\nLinux\nswap\n/\nSolaris\nSatisfied! Let's\nv\nerify and then\nw\nrite the results:\nCommand\n(\nm\nfor\nhelp\n):\nv\nNo\nerrors\ndetected\n.\nRemaining\n4094\nunallocated\n512\n-\nbyte\nsectors\n.\nCommand\n(\nm\nfor\nhelp\n):\nw\nThe\npartition\ntable\nhas\nbeen\naltered\n.\nCalling\nioctl\n()\nto\nre\n-\nread\npartition\ntable\n.\nSyncing\ndisks\n.\nroot\n@\ndebianamd\n:\n~\n#\nfdisk\n-\nl\n/\ndev\n/\nsda\nDisk\n/\ndev\n/\nsda\n:\n4\nGiB\n,\n4294967296\nbytes\n,\n8388608\nsectors\nDisk\nmodel\n:\nQEMU\nHARDDISK\nUnits\n:\nsectors\nof\n1\n*\n512\n=\n512\nbytes\nSector\nsize\n(\nlogical\n/\nphysical\n):\n512\nbytes\n/\n512\nbytes\nI\n/\nO\nsize\n(\nminimum\n/\noptimal\n):\n512\nbytes\n/\n512\nbytes\nDisklabel\ntype\n:\ndos\nDisk\nidentifier\n:\n0x40bd0f72\nDevice\nBoot\nStart\nEnd\nSectors\nSize\nId\nType\n/\ndev\n/\nsda1\n2048\n2099199\n2097152\n1\nG\n83\nLinux\n/\ndev\n/\nsda2\n2099200\n8388607\n6289408\n3\nG\n5\nExtended\n/\ndev\n/\nsda5\n2101248\n4198399\n2097152\n1\nG\n83\nLinux\n/\ndev\n/\nsda6\n4200448\n8388607\n4188160\n2\nG\n82\nLinux\nswap\n/\nSolaris\ngdisk\nAs seen on\nchapter 102.1\n, we have used\ngdisk\non GPT machines. Its not that different from\nfdisk\n. Lets have a look at its main commands:\nroot\n@\ndebianamd\n:\n~\n#\ngdisk\n/\ndev\n/\nsda\nGPT\nfdisk\n(\ngdisk\n)\nversion\n1.0.6\nWarning\n:\nPartition\ntable\nheader\nclaims\nthat\nthe\nsize\nof\npartition\ntable\nentries\nis\n0\nbytes\n,\nbut\nthis\nprogram\nsupports\nonly\n128\n-\nbyte\nentries\n.\nAdjusting\naccordingly\n,\nbut\npartition\ntable\nmay\nbe\ngarbage\n.\nWarning\n:\nPartition\ntable\nheader\nclaims\nthat\nthe\nsize\nof\npartition\ntable\nentries\nis\n0\nbytes\n,\nbut\nthis\nprogram\nsupports\nonly\n128\n-\nbyte\nentries\n.\nAdjusting\naccordingly\n,\nbut\npartition\ntable\nmay\nbe\ngarbage\n.\nPartition\ntable\nscan\n:\nMBR\n:\nMBR\nonly\nBSD\n:\nnot\npresent\nAPM\n:\nnot\npresent\nGPT\n:\nnot\npresent\n***************************************************************\nFound\ninvalid\nGPT\nand\nvalid\nMBR\n;\nconverting\nMBR\nto\nGPT\nformat\nin\nmemory\n.\nTHIS\nOPERATION\nIS\nPOTENTIALLY\nDESTRUCTIVE\n!\nExit\nby\ntyping\n'q'\nif\nyou\ndon\n'\nt\nwant\nto\nconvert\nyour\nMBR\npartitions\nto\nGPT\nformat\n!\n***************************************************************\nCommand\n(?\nfor\nhelp\n):\n?\nb\nback\nup\nGPT\ndata\nto\na\nfile\nc\nchange\na\npartition\n'\ns\nname\nd\ndelete\na\npartition\ni\nshow\ndetailed\ninformation\non\na\npartition\nl\nlist\nknown\npartition\ntypes\nn\nadd\na\nnew\npartition\no\ncreate\na\nnew\nempty\nGUID\npartition\ntable\n(\nGPT\n)\np\nprint\nthe\npartition\ntable\nq\nquit\nwithout\nsaving\nchanges\nr\nrecovery\nand\ntransformation\noptions\n(\nexperts\nonly\n)\ns\nsort\npartitions\nt\nchange\na\npartition\n'\ns\ntype\ncode\nv\nverify\ndisk\nw\nwrite\ntable\nto\ndisk\nand\nexit\nx\nextra\nfunctionality\n(\nexperts\nonly\n)\n?\nprint\nthis\nmenu\nAs you can see, the partition table have to be compatible with your BIOS/UEFI setup.\nparted\nparted\nis the GNU tool to edit partitions. Its main advantage is the ability to resize currently defined partitions but using it is a bit trickier than\nfdisk\nand\ngdisk\n:\n#\nparted\nGNU\nParted\n3.4\nUsing\n/\ndev\n/\nsda\nWelcome\nto\nGNU\nParted\n!\nType\n'help'\nto\nview\na\nlist\nof\ncommands\n.\n(\nparted\n)\nhelp\nalign\n-\ncheck\nTYPE\nN\ncheck\npartition\nN\nfor\nTYPE\n(\nmin\n|\nopt\n)\nalignment\nhelp\n[\nCOMMAND\n]\nprint\ngeneral\nhelp\n,\nor\nhelp\non\nCOMMAND\nmklabel\n,\nmktable\nLABEL\n-\nTYPE\ncreate\na\nnew\ndisklabel\n(\npartition\ntable\n)\nmkpart\nPART\n-\nTYPE\n[\nFS-TYPE\n]\nSTART\nEND\nmake\na\npartition\nname\nNUMBER\nNAME\nname\npartition\nNUMBER\nas\nNAME\nprint\n[\ndevices|free|list,all|NUMBER\n]\ndisplay\nthe\npartition\ntable\n,\navailable\ndevices\n,\nfree\nspace\n,\nall\nfound\npartitions\n,\nor\na\nparticular\npartition\nquit\nexit\nprogram\nrescue\nSTART\nEND\nrescue\na\nlost\npartition\nnear\nSTART\nand\nEND\nresizepart\nNUMBER\nEND\nresize\npartition\nNUMBER\nrm\nNUMBER\ndelete\npartition\nNUMBER\nselect\nDEVICE\nchoose\nthe\ndevice\nto\nedit\ndisk_set\nFLAG\nSTATE\nchange\nthe\nFLAG\non\nselected\ndevice\ndisk_toggle\n[\nFLAG\n]\ntoggle\nthe\nstate\nof\nFLAG\non\nselected\ndevice\nset\nNUMBER\nFLAG\nSTATE\nchange\nthe\nFLAG\non\npartition\nNUMBER\ntoggle\n[\nNUMBER [FLAG\n]\n]\ntoggle\nthe\nstate\nof\nFLAG\non\npartition\nNUMBER\nunit\nUNIT\nset\nthe\ndefault\nunit\nto\nUNIT\nversion\ndisplay\nthe\nversion\nnumber\nand\ncopyright\ninformation\nof\nGNU\nParted\nhint? use gparted\nThe\ngparted\ntool is a graphical tool to manage your partitioned. It has the ability to resize partitions and is super easy to use. Its not part of the LPIC exam but its good to know about it. just in case ;)\ngparted.org\nFormatting the partition\nFilesystems\nAfter you partitioned your block devices, you have to format them to make them usable to store files and directories. Formatting a file system, creates a map which stores the location and name of files and directories and make it possible to move files between folders, deleting them or renaming them; think of it as the index of a book.\nThere are several filesystems in the linux world but, these are the most commonly used ones:\nFormat\nDescription\next2\nsecond extended filesystem was developed to address shortcomings in the older Unix/Minix filesystem used in early versions of Linux. It has been used extensively on Linux for many years. There is no journaling in ext2, and it has largely been replaced by ext3 and more recently ext4.\next3\next2 + journaling, max file size is 2TB and max filesystem size is 16TB\next4\ncurrent version of ext, max file size is 16TB and max filesystem size is 1EB (1000*1000TB)\nXFS\njournaling, caches to RAM, great for uninterruptible power supplies, Max file and filesystem size is 8EB\nswap\nSwap is used when the system needs to use more ram than what is has. It's like an extra ram on disk\nVFAT\nFAT32, no journaling, good for data exchange with windows, does not understand\npermissions\nand symbolic links\nexFAT\nExtended FAT. A newer version of FAT which is used mainly for extended device which should work on all machines; like USB disks\nbtrfs\nA new high performance file system. Max file and filesize is 16 EB. Has its own form of RAID and LVM and build-in snapshots and fault tolerance and data compression on the fly.\nCreating filesystems\nYou can format your partitions with\nmkfs\ncommand (and\nmkswap\nfor swap). This is a front end to commands like\nmkfs.ext3\nfor\next3\n,\nmkfs.ext4\nfor\next4\nand\nmkfs.reiserfs\nfor\nReiserFS\n. full list of installed on your system is here:\n#\nls /sbin/mk*\n/sbin/mkdosfs  /sbin/mkexfatfs  /sbin/mkfs.bfs     /sbin/mkfs.exfat  /sbin/mkfs.ext3  /sbin/mkfs.fat    /sbin/mkfs.msdos  /sbin/mkfs.vfat     /sbin/mkinitramfs   /sbin/mkntfs\n/sbin/mke2fs   /sbin/mkfs   /sbin/mkfs.cramfs  /sbin/mkfs.ext2   /sbin/mkfs.ext4  /sbin/mkfs.minix  /sbin/mkfs.ntfs   /sbin/mkhomedir_helper  /sbin/mklost+found  /sbin/mkswap\nIf using the\nmkfs\n, the main switch is\n-type\n(or\n-t\n) to specify the format:\n#\nmkfs\n-\nt\next4\n/\ndev\n/\nsda1\nmke2fs\n1.46.2\n(\n28\n-\nFeb\n-\n2021\n)\nDiscarding\ndevice\nblocks\n:\ndone\nCreating\nfilesystem\nwith\n262144\n4\nk\nblocks\nand\n65536\ninodes\nFilesystem\nUUID\n:\n63625\necd\n-\n857\na\n-\n419\nf\n-\na300\n-\n12395\naaad89f\nSuperblock\nbackups\nstored\non\nblocks\n:\n32768\n,\n98304\n,\n163840\n,\n229376\nAllocating\ngroup\ntables\n:\ndone\nWriting\ninode\ntables\n:\ndone\nCreating\njournal\n(\n8192\nblocks\n)\n:\ndone\nWriting\nsuperblocks\nand\nfilesystem\naccounting\ninformation\n:\ndone\nroot\n@debianamd\n:\n~\n#\nmkfs\n.\nexfat\n/\ndev\n/\nsda5\nmkexfatfs\n1.3.0\nCreating\n...\ndone\n.\nFlushing\n...\ndone\n.\nFile\nsystem\ncreated\nsuccessfully\n.\nIf you need to assign a lable to the partition, you have to use the\n-L lable_name\noption. Please note that in recent system, people use UUIDs instead of labels. UUID of a disk can be viewed with:\n#\nblkid /dev/sda1\n/dev/sda1: UUID=\"63625ecd-857a-419f-a300-12395aaad89f\" BLOCK_SIZE=\"4096\" TYPE=\"ext4\" PARTUUID=\"40bd0f72-01\"\nand as the last task, lets create a swap on\n/dev/sda6\n:\n# mkswap /dev/sda6\nSetting up swapspace version 1, size = 2 GiB (2144333824 bytes)\nno label, UUID=6a59cf20-8fd6-4d86-b044-89f7bc67993b\nand then\n# swapon /dev/sda6\nOn chapter 14.3 we will see how we can\nmount\n/\nunmount\nthese filesystems.\n← 103.8 Basic file editing\nChapter List\n104.2 Maintain the integrity of filesystems →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "104.2 Maintain the integrity of filesystems",
    "url": "https://linux1st.com./1042-maintain-the-integrity-of-filesystems.html",
    "extracted_title": "",
    "content": "Weight: 2\nCandidates should be able to maintain a standard filesystem, as well as the extra data associated with a journaling filesystem.\nObjectives\nVerify the integrity of filesystems.\nMonitor free space and inodes.\nRepair simple filesystem problems.\ndu\ndf\nfsck\ne2fsck\nmke2fs\ntune2fs\nxfs_repair\nxfs_fsr\nxfs_db\ndu & df\nIn many cases you want to find out about the free space of a disk or find how much space a directory is using or check how many inodes left.\nThe inode (index node) is a data structure in a Unix-style file system that describes a file-system object such as a file or a directory. Each inode stores the attributes and disk block locations of the object's data. File-system object attributes may include metadata (times of last change, access, modification), as well as owner and permission data. A directory is a list of inodes with their assigned names. The list includes an entry for itself, its parent, and each of its children.\n(\nwikipedia\n)\ndf\nThe\nd\nisk\nf\nree command is used to find out about the free and used space on file systems.\njadi@funlife:~$ df -TH\nFilesystem        Type      Size  Used Avail Use% Mounted on\n/dev/sda2         ext4       23G   15G  7.7G  65% /\nnone              tmpfs     4.0K     0  4.0K   0% /sys/fs/cgroup\nudev              devtmpfs  3.9G  4.0K  3.9G   1% /dev\ntmpfs             tmpfs     788M  1.4M  786M   1% /run\nnone              tmpfs     5.0M  4.0K  5.0M   1% /run/lock\nnone              tmpfs     3.9G   19M  3.9G   1% /run/shm\nnone              tmpfs     100M   28K  100M   1% /run/user\n/dev/mapper/chome ext4      243G  229G   14G  95% /home/jadi\n/dev/sdb1         vfat      3.7G  7.8M  3.6G   1% /media/jadi/BA82-BECD\nHere, the\n-T\nswitch tells\ndf\nto show the file system types and `-H` make numbers human readable (in powers of 1000 , for powers of 2, use\n-h\n).\nOn some filesystems (like ext2-4) we have a fixed number of inodes, so you may need to check the number of remaining inodes too. To do so, use the\n-i\nswitch:\njadi@funlife:~$ df -i\nFilesystem          Inodes  IUsed    IFree IUse% Mounted on\n/dev/sda2          1531904 458616  1073288   30% /\nnone               1007533      4  1007529    1% /sys/fs/cgroup\nudev               1003703    542  1003161    1% /dev\ntmpfs              1007533    644  1006889    1% /run\nnone               1007533      3  1007530    1% /run/lock\nnone               1007533    162  1007371    1% /run/shm\nnone               1007533     33  1007500    1% /run/user\n/dev/mapper/chome 16171008 269293 15901715    2% /home/jadi\n/dev/sdb1                0      0        0     - /media/jadi/BA82-BECD\nvfat file format has no inodes; there is no owner or access rights on vfat filesystems.\ndu\nThe\nd\nisk\nu\nsage command shows the used space of\ndirectories and files\n. The common switches are:\nswitch\nusage\n-h\nprint sizes in powers of 1024 (e.g., 1023M)\n-H\nprint sizes in powers of 1000 (e.g., 1.1G)\n-c\nshow the grand total\n--max-depth 2\nCalculate all but show only 2 directories deep\n-s\nOnly shows the summary and not all the directories one by one\njadi@funlife:~/w/lpic$ du\n16    ./101\n701456    ./done\n701464    ./Logo/chert\n704588    ./Logo\n12    ./data\n12    ./100\n9432884    .\njadi@funlife:~/w/lpic$ du -c\n16    ./101\n701456    ./done\n701464    ./Logo/chert\n704588    ./Logo\n12    ./data\n12    ./100\n9432884    .\n9432884    total\njadi@funlife:~/w/lpic$ du -hs\n9.0G    .\nin many cases when I want to see what uses my serers space, I use something like\n$sudo du /home -h --max-depth 1\nchecking file systems\nfsck\nIf anything bad happens for your filesystem (say power suddenly goes down) you will have a corrupted file system. The general command to fix this is\nfsck\n. Technically this command is a front end for many commands:\njadi@funlife:~$ ls /sbin/*fsck*\n/sbin/dosfsck       /sbin/fsck.ext2     /sbin/fsck.fat     /sbin/fsck.vfat\n/sbin/e2fsck       /sbin/fsck.ext3     /sbin/fsck.minix\n/sbin/fsck       /sbin/fsck.ext4     /sbin/fsck.msdos\n/sbin/fsck.cramfs  /sbin/fsck.ext4dev  /sbin/fsck.nfs\nSome of these are just hardlinks to\ne2fsck\ncommand\nA common switch during boot is\n-A\nwhich tells\nfsck\nto check all file systems in /etc/fstab ordered by\npassno\nin that file which is 6th field (File systems with\npassno\nof 0, wont be checked during the boot.\nroot@funlife:~# fsck /dev/sdb\nfsck from util-linux 2.25.1\ne2fsck 1.42.10 (18-May-2014)\n/dev/sdb is in use.\ne2fsck: Cannot continue, aborting.\nroot@funlife:~# umount /dev/sdb\numount: /dev/sdb: not mounted\nroot@funlife:~# umount /dev/sdb1\nroot@funlife:~# fsck /dev/sdb\nfsck from util-linux 2.25.1\ne2fsck 1.42.10 (18-May-2014)\next2fs_open2: Bad magic number in super-block\nfsck.ext2: Superblock invalid, trying backup blocks...\nfsck.ext2: Bad magic number in super-block while trying to open /dev/sdb\nThe superblock could not be read or does not describe a valid ext2/ext3/ext4\nfilesystem.  If the device is valid and it really contains an ext2/ext3/ext4\nfilesystem (and not swap or ufs or something else), then the superblock\nis corrupt, and you might try running e2fsck with an alternate superblock:\ne2fsck -b 8193 <device>\nor\ne2fsck -b 32768 <device>\nYou can also check filesystems with UUID (find them with\nblkid\ncommand or with labels) :\nroot@funlife:~# fsck /dev/sdb\nfsck from util-linux 2.25.1\ne2fsck 1.42.10 (18-May-2014)\next2fs_open2: Bad magic number in super-block\nfsck.ext2: Superblock invalid, trying backup blocks...\nfsck.ext2: Bad magic number in super-block while trying to open /dev/sdb\nThe superblock could not be read or does not describe a valid ext2/ext3/ext4\nfilesystem.  If the device is valid and it really contains an ext2/ext3/ext4\nfilesystem (and not swap or ufs or something else), then the superblock\nis corrupt, and you might try running e2fsck with an alternate superblock:\ne2fsck -b 8193 <device>\nor\ne2fsck -b 32768 <device>\nroot@funlife:~# blkid\n/dev/sda1: LABEL=\"movies\"\n/dev/sdb1: UUID=\"BA82-BECD\" TYPE=\"vfat\" PARTUUID=\"381add66-01\"\nroot@funlife:~# fsck LABEL=movies\nfsck from util-linux 2.25.1\nroot@funlife:~# fsck UUID=\"BA82-BECD\"\nfsck from util-linux 2.25.1\nfsck.fat 3.0.26 (2014-03-07)\n/dev/sdb1: 14 files, 1972/945094 clusters\nUse\n-N\nto see what command/test is going to be executed without actually running them:\nroot@funlife:~# fsck -N UUID=\"BA82-BECD\"\nfsck from util-linux 2.25.1\n[/sbin/fsck.vfat (1) -- /dev/sdb1] fsck.vfat /dev/sdb1\nIf you want to check a XFS filesystem, you have to use\nxfs_check\ncommand\nSome version do have a\n-a\nfor automatic fixing all found issues but its not recommended.\ne2fsck\ne2fsck\nis used to check the ext2/ext3/ext4 family of file systems.  For ext3 and ext4 file systems that use a\njournal\n, if the system has been shutdown uncleanly without any errors,normally, after replaying the committed transactions  in the journal, the file system should be marked as clean. Hence, for file systems that use\njournaling\n, e2fsck will normally replay the journal and exit, unless its superblock indicates that further checking is required.\ndevice is a block device (e.g.,\n/dev/sdc1\n) or file containing the file system.\nNote that in general it is not safe to run\ne2fsck\non\nmounted\nfile systems.  The only exception is if the\n-n\noption is specified, and\n-c\n,\n-l\n, or\n-L\noptions are not specified. However, even if it is safe to do so, the results printed by\ne2fsck\nare not valid if the file system is\nmounted\n. If\ne2fsck\nasks whether or not you should check a file system which is mounted, the only correct answer is ``no''.  Only experts who really know what they are doing should consider answering this question in any other way.\nIf\ne2fsck\nis run in interactive mode (meaning that none of\n-y\n,\n-n\n, or\n-p\nare specified), the program will ask the user to fix each problem found in the file system. A response of\n'y'\nwill fix the error;\n'n'\nwill leave the error unfixed; and\n'a'\nwill fix the problem and all subsequent problems; pressing Enter will proceed with the default response, which is printed before the question mark.  Pressing\nControl-C\nterminates\ne2fsck\nimmediately.\nmke2fs\nmke2fs is used to create an ext2, ext3, or ext4 filesystem, usually in a disk partition. device is the special file corresponding to the device (e.g /dev/hdXX). blocks-count is the number of blocks on the device. If omitted, mke2fs automagically figures the file system size. If called as mkfs.ext3 a journal is created as if the\n-j\noption was specified.\nThe defaults of the parameters for the newly created filesystem, if not overridden by the options listed below, are controlled by the /etc/mke2fs.conf configuration file. See the mke2fs.conf(5) manual page for more details.\ntune2fs\nThis is a command to tune\next\nfile systems. It can show information and set many options. The\n-l\noption lists the current configs:\njadi@funlife:~$ sudo tune2fs -l /dev/sda2\ntune2fs 1.42.10 (18-May-2014)\nFilesystem volume name:   <none>\nLast mounted on:          /\nFilesystem UUID:          1651a94e-0b4e-47fb-aca0-f77e05714617\nFilesystem magic number:  0xEF53\nFilesystem revision #:    1 (dynamic)\nFilesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery extent flex_bg sparse_super large_file huge_file uninit_bg dir_nlink extra_isize\nFilesystem flags:         signed_directory_hash\nDefault mount options:    user_xattr acl\nFilesystem state:         clean\nErrors behavior:          Continue\nFilesystem OS type:       Linux\nInode count:              1531904\nBlock count:              6123046\nReserved block count:     306152\nFree blocks:              2302702\nFree inodes:              1073461\nFirst block:              0\nBlock size:               4096\nFragment size:            4096\nReserved GDT blocks:      1022\nBlocks per group:         32768\nFragments per group:      32768\nInodes per group:         8192\nInode blocks per group:   512\nFlex block group size:    16\nFilesystem created:       Mon Dec  1 10:21:42 2014\nLast mount time:          Sat Jan 31 17:21:51 2015\nLast write time:          Sat Jan 31 17:21:51 2015\nMount count:              32\nMaximum mount count:      -1\nLast checked:             Mon Dec  1 10:21:42 2014\nCheck interval:           0 (<none>)\nLifetime writes:          103 GB\nReserved blocks uid:      0 (user root)\nReserved blocks gid:      0 (group root)\nFirst inode:              11\nInode size:              256\nRequired extra isize:     28\nDesired extra isize:      28\nJournal inode:            8\nFirst orphan inode:       786620\nDefault directory hash:   half_md4\nDirectory Hash Seed:      16c38a41-e709-4e04-b1c2-8a79d71ea7e8\nJournal backup:           inode blocks\ndebugfs\nThis is an interactive tool for debug an ext filesystem. It opens the filesystem in read-only mode unless we tell it not to (with\n-w\noption). It can un-delete files and directories..\nroot@funlife:~# debugfs /dev/sda2\ndebugfs 1.42.10 (18-May-2014)\ndebugfs:  cd /etc/        <-- cd\ndebugfs:  pwd            <-- show were am I\n[pwd]   INODE: 524289  PATH: /etc\n[root]  INODE:      2  PATH: /\ndebugfs:  stat passwd        <-- show data on one file\nInode: 527187   Type: regular    Mode:  0644   Flags: 0x80000\nGeneration: 1875144872    Version: 0x00000000:00000001\nUser:     0   Group:     0   Size: 2145\nFile ACL: 0    Directory ACL: 0\nLinks: 1   Blockcount: 8\nFragment:  Address: 0    Number: 0    Size: 0\nctime: 0x548d4241:a7b196fc -- Sun Dec 14 11:24:41 2014\natime: 0x54cc635b:6acfc148 -- Sat Jan 31 08:38:43 2015\nmtime: 0x548d4241:a01076f8 -- Sun Dec 14 11:24:41 2014\ncrtime: 0x548d4241:9f1c52f8 -- Sun Dec 14 11:24:41 2014\nSize of extra inode fields: 28\nEXTENTS:\n(0):2188172\ndebugfs:  ncheck 527187        <-- node check an inode\nInode    Pathname\n527187    /etc/passwd\ndebugfs:  q            <-- quit\nSuperblock\nUnix systems use superblocks to save\nfilesystem metadata\n. Most of the times this block is located at the beginning of the file system and replicated on other locations too. The\n-n\nof\nmke2fs\ndisplays superblock locations\n# mke2fs -n /dev/sda7\nmke2fs 1.41.9 (22-Aug-2009)\nFilesystem label=\nOS type: Linux\nBlock size=4096 (log=2)\nFragment size=4096 (log=2)\n7159808 inodes, 28637862 blocks\n1431893 blocks (5.00%) reserved for the super user\nFirst data block=0\nMaximum filesystem blocks=4294967296\n874 block groups\n32768 blocks per group, 32768 fragments per group\n8192 inodes per group\nSuperblock backups stored on blocks:\n32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,\n4096000, 7962624, 11239424, 20480000, 23887872\nxfs tools\nNote: in some distros, xfs tools are not installed by default and you might need to install\nxfsprogs\npackage.\nThis is same as the\ntune2fs\nbut for xfs file systems.\nxfs_info should be used on mounted file systems\nCommand\nusage\nxfs_info\ndisplay information\nxfs_growfs\nexpand file system\nxfs_admin\nchange parameters on XFS file systems\nxfs_repair\nrepair the problems. Please note that the filesytem under repair should be unmounted\nxfs_db\nchecks and debug the filesystem. xfs_db is used to examine an XFS filesystem. Under rare circumstances it can also be used to modify an XFS filesystem, but that task is normally left to xfs_repair or to scripts such as xfs_admin that run xfs_db.\nxfs_fsr\nfilesystem reorganizer for XFS. When invoked with no arguments xfs_fsr reorganizes all regular files in all mounted filesystems. xfs_fsr makes many cycles over /etc/mtab each time making a single pass over each XFS filesystem. Each pass goes through and selects files that have the largest number of extents. It attempts to defragment the top 10% of these files on each pass.\nRepairing\nWe used the\nfsck\nfor showing file system information but it is designed to\nfix\nfile systems too. If the boot time check find a problems, you will be put into a command line to fix the problems.\nOn non-journaling file systems (ext2) the fsck will show you many questions about each block and you have to say\ny\nif you want it to fix them. On journaling file systems (ext3&4, xfs, ..) the fsck has much less tasks to perform.\nfor xfs file systems, we have\nxfs_check\ncommand\nAn important switch is\n-n\nwhich causes these commands\nnot to fix\nanything and just show what was going to be done.\nOther tools\nFor the LPIC exam, it is good to know about these commands.\nfilesystem\ncommand\nusage\next\ntune2fs\nShow or set ext2 and ext3 parameters or even set the journaling options\next\ndumpe2fs\nPrints the super block and block group descriptor information for an ext2 or ext3 filesystem.\next\ndebugfs\nIs an interactive file system debugger. Use it to examine or change the state of an ext2 or ext3file system.\nreiserfs\nreiserfstune\nshow and set parameters\nreiserfs\ndebugreiserfs\nPrints the super block and block group descriptor information for an ext2 or ext3 filesystem.\nXFS\nxfs_info\ndisplay information\nXFS\nxfs_growfs\nexpand file system\nXFS\nxfs_admin\nchange parameters on XFS file systems\nXFS\nxfs_repair\nrepair the problems\nXFS\nxfs_db\nchecks and debugs the filesystem\n← 104.1 Create partitions and filesystems\nChapter List\n104.3 Control mounting and unmounting of filesystems →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "104.3 Control mounting and unmounting of filesystems",
    "url": "https://linux1st.com./1043-control-mounting-and-unmounting-of-filesystems.html",
    "extracted_title": "",
    "content": "weight: 3\nCandidates should be able to configure the mounting of a filesystem.\nManually mount and unmount filesystems.\nConfigure filesystem mounting on bootup.\nConfigure user mountable removable filesystems.\nUse of labels and UUIDs for identifying and mounting file systems.\nAwareness of systemd mount units.\n/etc/fstab\n/media/\nmount\numount\nblkid\nlsblk\nMounting and Unmounting\nWhen we have a formatted partition and need to use it, we have to\nmount\nit somewhere in the Linux directory hierarchy. Unlike Windows, the new\ndriver\ndo now show up as separated disks, but like\nvirtual subdirectories\nsomewhere in your\n/\ntree.\nSay we want to\nmount\nthe\n/dev/sda3\non\n/media/mydisk\n. The directory\n/media/mydisk\nshould be there and then, we just run:\nsudo mount -t ext4 /dev/sda3 /media/mydisk\nAll files and folders in /dev/sda3 will be accessible from /media/mydisk.\nRun\nmount\nwith no parameter to see all mounted devices. To\nun mount\n, simply use the\numount\non the drive or the directory. These two are equivalent:\nsudo umount /dev/sda3\nsudo umount /media/mydisk\nMounting and umounting can happen on many different storage types, for example on NFS storages, ISO (with\n-o loop\n), tmpfs, ...\nswap disks do not need mounting. You should use\nswapon\nand\nswapoff\nto use them.\nmount -t ext4 /dev/sda1 /media\nThe\n-t\nswitch indicates the type of the filesystem .\nmount -o remount,ro /dev/sda1\nThe\n-o\nswitch passes some options (say\nro\nfor readonly)\nIt's usually used as one-line command:\nmount -t ext4 -o remount,ro /dev/sda1 /media\nThe\n/media\nand\n/mnt\ndirectories are used to mount filesystems, even though you can use any directory for this purpose.\nUUID & Labels\nAs you already know, there is a problem when working with classical device names like\n/dev/vdb1\n: they change! The current\n/dev/sdb\nmight be seen as\n/dev/sdd\nafter you remove / reconnect it. To solve this, its better to work with UUIDs (Universal Unique Identifiers). Check them with\nlsblk\n(\n-O\nwill show all available columns or specify with -o as below) and\nblkid\n.\n#\nlsblk\n-\no\n+\nUUID\nNAME\nMAJ\n:\nMIN\nRM\nSIZE\nRO\nTYPE\nMOUNTPOINTS\nUUID\nsr0\n11\n:\n0\n1\n1.8\nG\n0\nrom\n/\nrun\n/\nmedia\n/\njadi\n/\nFedora\n-\nWS\n-\nLive\n-\n35\n_B\n-\n1\n-\n2\n2021\n-\n09\n-\n22\n-\n21\n-\n47\n-\n34\n-\n00\nzram0\n251\n:\n0\n0\n1.9\nG\n0\ndisk\n[\nSWAP\n]\nvda\n252\n:\n0\n0\n20\nG\n0\ndisk\n├─\nvda1\n252\n:\n1\n0\n600\nM\n0\npart\n/\nboot\n/\nefi\nE13A\n-\nEF36\n├─\nvda2\n252\n:\n2\n0\n1\nG\n0\npart\n/\nboot\n19\ned96a1\n-\n3\nb36\n-\n4202\n-\n81\nbb\n-\n349\nf7adfb8b1\n└─\nvda3\n252\n:\n3\n0\n18.4\nG\n0\npart\n/\nhome\n076766\na5\n-\n8864\n-\n4e35\n-\na632\n-\n464\nb03396f7a\n/\nvdb\n252\n:\n16\n0\n2\nG\n0\ndisk\n└─\nvdb1\n252\n:\n17\n0\n2\nG\n0\npart\n/\ntmp\n/\nlkj\n4\nc1a51e6\n-\n47\nbf\n-\n4\na34\n-\n84\na2\n-\n87027\nc91e14a\n#\nblkid\n/\ndev\n/\nvdb1\n:\nUUID\n=\n\"4c1a51e6-47bf-4a34-84a2-87027c91e14a\"\nBLOCK_SIZE\n=\n\"4096\"\nTYPE\n=\n\"ext4\"\nPARTUUID\n=\n\"5415e516-01\"\n/\ndev\n/\nsr0\n:\nBLOCK_SIZE\n=\n\"2048\"\nUUID\n=\n\"2021-09-22-21-47-34-00\"\nLABEL\n=\n\"Fedora-WS-Live-35_B-1-2\"\nTYPE\n=\n\"iso9660\"\n/\ndev\n/\nzram0\n:\nLABEL\n=\n\"zram0\"\nUUID\n=\n\"e459f522-1675-40d2-b318-51d9bd16d7bb\"\nTYPE\n=\n\"swap\"\n/\ndev\n/\nvda2\n:\nUUID\n=\n\"19ed96a1-3b36-4202-81bb-349f7adfb8b1\"\nBLOCK_SIZE\n=\n\"4096\"\nTYPE\n=\n\"ext4\"\nPARTUUID\n=\n\"5f4ee154-3ade-4af6-8809-6d90d5827d39\"\n/\ndev\n/\nvda3\n:\nLABEL\n=\n\"fedora_localhost-live\"\nUUID\n=\n\"076766a5-8864-4e35-a632-464b03396f7a\"\nUUID_SUB\n=\n\"a4340a29-6d9b-4c28-a7c8-b4aab5d08893\"\nBLOCK_SIZE\n=\n\"4096\"\nTYPE\n=\n\"btrfs\"\nPARTUUID\n=\n\"a46e64aa-65ef-4a62-9bf8-96fd19aee353\"\n/\ndev\n/\nvda1\n:\nUUID\n=\n\"E13A-EF36\"\nBLOCK_SIZE\n=\n\"512\"\nTYPE\n=\n\"vfat\"\nPARTLABEL\n=\n\"EFI System Partition\"\nPARTUUID\n=\n\"a7a2b260-0302-45bc-a4db-42bd2e0ee7f2\"\n#\nblkid\n/\ndev\n/\nvdb1\n/\ndev\n/\nvdb1\n:\nUUID\n=\n\"4c1a51e6-47bf-4a34-84a2-87027c91e14a\"\nBLOCK_SIZE\n=\n\"4096\"\nTYPE\n=\n\"ext4\"\nPARTUUID\n=\n\"5415e516-01\"\n#\nmount\nUUID\n=\n\"4c1a51e6-47bf-4a34-84a2-87027c91e14a\"\n/\nmedia\n/\nmydisk\n/\nfstab\nFor automatic mounting, Linux uses the\n/etc/fstab\nfile. Its like a table which shows what file system should be mounted where during the boot. This is my the\n/etc/fstab\nof my Fedora:\n# cat /etc/fstab\n#\n# /etc/fstab\n# Created by anaconda on Wed Oct 20 13:16:38 2021\n#\n# Accessible filesystems, by reference, are maintained under '/dev/disk/'.\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info.\n#\n# After editing this file, run 'systemctl daemon-reload' to update systemd\n# units generated from this file.\n#\nUUID\n=\n076766\na5\n-\n8864\n-\n4e35\n-\na632\n-\n464\nb03396f7a\n/\nbtrfs\nsubvol\n=\nroot\n,\ncompress\n=\nzstd\n:\n1\n0\n0\nUUID\n=\n19\ned96a1\n-\n3\nb36\n-\n4202\n-\n81\nbb\n-\n349\nf7adfb8b1\n/\nboot\next4\ndefaults\n1\n2\nUUID\n=\nE13A\n-\nEF36\n/\nboot\n/\nefi\nvfat\numask\n=\n0077\n,\nshortname\n=\nwinnt\n0\n2\nUUID\n=\n076766\na5\n-\n8864\n-\n4e35\n-\na632\n-\n464\nb03396f7a\n/\nhome\nbtrfs\nsubvol\n=\nhome\n,\ncompress\n=\nzstd\n:\n1\n0\n0\nThese are the columns:\nfile system: Label, UUID, device\nmount point: swap or none for swap\ntype: can be ext4 , xfs ,nfs or other types of filesystem\noptions:  defaults, rw / ro, noauto, user, exec / noexec, noatime, umask\ndump: do dump command backup this? mostly 0\npass: Non-zero values of pass specify the order of checking filesystems at boot time\nnote:\nUser-mounted filesystems default to noexec unless exec is specified after user.\nnoatime will disable recording of access times. Not using access times may improve performance.\nSystemd mount units\nWhen using systemd, a unit configuration file whose name ends in \".mount\" encodes information about a file system mount point controlled and supervised by systemd.\n← 104.2 Maintain the integrity of filesystems\nChapter List\n104.4 Removed →\nCategory\nLPIC1\nContact"
  },
  {
    "title": "104.5 Manage file permissions and ownership",
    "url": "https://linux1st.com./1045-manage-file-permissions-and-ownership.html",
    "extracted_title": "",
    "content": "Weight: 3\nCandidates should be able to control file access through the proper use of permissions and ownerships.\nKey Knowledge Areas\nManage access permissions on regular and special files as well as directories.\nUse access modes such as suid, sgid and the sticky bit to maintain security.\nKnow how to change the file creation mask.\nUse the group field to grant file access to group members.\nchmod\numask\nchown\nchgrp\nUsers and Groups\nA linux system can have many users and many groups. You can login with one user and use\nsu\ncommand to change to another group. Each user belongs to one primary group and can be a member of other groups too.\nTo check your user and group use the\nwhoami\n,\ngroups\nand\nid\ncommands.\n- $ whoami\njadi\n- $ groups\njadi adm cdrom sudo dip plugdev netdev lpadmin sambashare debian-tor\n- $ id\nuid=1000(jadi) gid=1000(jadi) groups=1000(jadi),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),102(netdev),108(lpadmin),124(sambashare),125(debian-tor)\n- $ su root -\nPassword:\n- # id\nuid=0(root) gid=0(root) groups=0(root)\n- # exit\nexit\n- $ whoami\njadi\nAs you can see\nid\nshows both user and group information.\nNote the 0 UID and 0 GID belong to the root user and root group.\nThese are stored in\n/etc/passwd\nand\n/etc/group\nfiles.\n$ cat /etc/group | grep adm\nadm:x:4:syslog,jadi\nlpadmin:x:108:jadi\nFile ownership & permissions\nLinux uses three layers of access/permissions for each file or directory: User, Group & Others.\nEach file belongs to one user and one group and this user and the members of that group will have specific read/write/execute accesses on it. Have a look:\n$ ls -ltrh script.sh\n-rwxr-xr-x 1 jadi adm 34 Mar  5  2023 script.sh\nIn above example,\njadi\nis the owner of the file. The file belongs to the\nadm\ngroup and the owner (\njadi\nhere) has\nr\nead,\nw\nrite (including deletion and edit) &\ne\nxecute (reading directory content) permissions on the file while the\nadm\ngroup members and\nothers\nonly have read & execute access.\nIn many distros, when you create a user, the system creates a group with the same name and assigns that user's files to that group.\nThe below table shows some more information regarding the first part of the\nls -l\ncommand:\nPosition\nMeaning\n1\nWhat this entry is. Dash (-) is for ordinary files, 'l' is for links & 'd' is for directory\n2,3,4\nread, write and execute access for the owner\n5,6,7\nread, write and execute access for the group members\n8,9,10\nread, write and execute access for other users\n11\nIndicated if any other access methods (such as SELinux) are applies to this file - not part of the LPIC 101 exam\nLets check another example.\n$ ls -l /sbin/fdisk\n-rwxr-xr-x 1 root root 267176 Oct 15 18:58 /sbin/fdisk\nWe can see that the\nfdisk\ncan be read, be written and be executed by its owner (root). Other users (even if they belong to the group\nroot\n) can only read and execute it.\nalthough non-root users can execute the fdisk, this program wont do much if it sees that a non root user is running it.\nLets look at another example:\n$ ls -l /home/\ntotal 12\ndrwxr-xr-x 160 jadi jadi 12288 Feb  7 11:44 jadi\nThe first character is a\nd\nso this is a directory. The owner (\njadi\n) has read, write and execute access but other members of the\njadi\ngroup\nand\nothers\nonly have read and execute access on this directory.\nexecute (\nx\ncharacter) means that they can see the files inside it, have a look if dir has not\nx\n:\n(with root user)\n$ tree /tmp/FOO\nFOO\n├── Bar1\n└── Bar2\n$ ls -ld /tmp/FOO/\ndrw-r--r--. 2 jadi jadi 80 Mar 23 19:32 FOO/\n(With other user)\n$ ls -l FOO/\nls: cannot access 'FOO/Bar2': Permission denied\nls: cannot access 'FOO/Bar1': Permission denied\ntotal 0\n-????????? ? ? ? ?            ? Bar1\n-????????? ? ? ? ?            ? Bar2\nChanging permissions\nIt is possible to change the permissions on files & directories using the\nchmod\ncommand. There are two ways to tell this command what you want to do:\nusing octal (base 8) codes\nusing short codes\nWhen using octal codes, you have to to create an octal number to tell chmod what you want to do. In this method,\n0\nmeans no access,\n1\nmeans execute,\n2\nmeans write and\n4\nmeans read. So if you want to give\nread\n+\nexecute\n, you have to give\n4\n+\n1\nwhich is\n5\n. The below table shows every possible combination:\nSymbolic\nOctal\nrwx\n7\nrw-\n6\nr-x\n5\nr--\n4\n-wx\n3\n-w-\n2\n--x\n1\n---\n0\nSo if you want to give\nrwx\nto the owner,\nrx\nto the group and only\nx\nto others, you have to use\n751\n:\n$ ls -ltrh myfile\n-rw-rw-r-- 1 jadi jadi 0 Feb  8 21:01 myfile\n$ chmod 751 myfile\n$ ls -ltrh myfile\n-rwxr-x--x 1 jadi jadi 0 Feb  8 21:01 myfile\nThis might look difficult but there are some commonly used combinations like\n755\nfor general executable files or\n600\nfor personal files.\nThere is also an\neasier\nmethod. In this method\nu\nmeans user,\ng\nmeans group and\no\nmeans others. You can append\n+x\nto give execute permission,\n+r\nto give read permission and\n+w\nto give write permission. For example\nu+x\nwill grant execute permission to user. If you want to remove a permission, use a\n-\nsign. For example\ng-r\nto prevent\ngroup\nmembers from\nread\ning the file.\n$ ls -ltrh myfile\n-rwxr-x--x 1 jadi jadi 0 Feb  8 21:01 myfile\n$ chmod u-x myfile\n$ ls -ltrh myfile\n-rw-r-x--x 1 jadi jadi 0 Feb  8 21:01 myfile\n$ chmod +x myfile\n$ chmod uo+xr myfile\n$ ls -ltrh myfile\n-rwxr-xr-x 1 jadi jadi 0 Feb  8 21:01 myfile\nOne very common switch on\nchmod\nis\n-R\nfor recursive\nchmod\ning on files. This will give\nread\npermission of all files inside /tmp/ to any user:\n# chmod -R o+r /tmp\nChanging owner and groups\nIf you need to change the ownership or group of a file or directory, use the\nchown\ncommand:\n$ ls -ltrh newfile\n-rw-rw-r-- 1 jadi jadi 0 Feb  8 21:38 newfile\n$ chown root:root newfile\nchown: changing ownership of ‘newfile’: Operation not permitted\n$ sudo chown root:root newfile\n[sudo] password for jadi:\n$ ls -ltrh newfile\n-rw-rw-r-- 1 root root 0 Feb  8 21:38 newfile\nA common switch is\n-R\nto\nchown\nrecursively.\nIf need to only change the group you may use\nchgrp\ncommand:\n$ sudo chgrp postgres newfile\n$ ls -ltrh newfile\n-rw-rw-r-- 1 root postgres 0 Feb  8 21:38 newfile\nIt is possible to assign more groups to a user via\nusermod\ncommand:\n$\nsudo\nusermod\n-aG\nsudo\njadi\n# will add jadi to the sudo group\nSince users can be a member of many groups, they might need to change their\ndefault group\nwhen creating files. To do so, check the groups with\ngroups\ncommand and set the default one with\nnewgrp\n:\n$ touch newfile\n$ ls -ltrh newfile\n-rw------- 1 jadi jadi 0 Feb  8 21:53 newfile\n$ groups\njadi adm cdrom sudo dip plugdev netdev lpadmin sambashare debian-tor\n$ newgrp adm\n$ touch newerfile\n$ ls -ltrh new*\n-rw------- 1 jadi jadi 0 Feb  8 21:53 newfile\n-rw------- 1 jadi adm  0 Feb  8 21:54 newerfile\nAccess modes\nA question for you: If we do not have write access to\n/etc/passwd\nor\n/etc/shadow\n, how is it possible to change our password then?\nNormally when you run a program, it runs with\nyour\naccess level. But what happens if you need to run a program with a higher access level? say to do changes in the password files? For this Linux sets two special bits for each file;\nsuid\n(set user id) and\nsgid\n(set group id). If these bits are set on a file, that file will be executed with the access of the\nowner\n(or\ngroup\n) of the file and not the user who is running it.\n$ ls -ltrh /usr/bin/passwd\n-rwsr-xr-x 1 root root 50K Jul 18  2014 /usr/bin/passwd\nKindly note the\ns\nin the\nexecutable bit\nfor the user permissions and also for the group? That means when any user runs this program, it will be run with the owner of the file access level (which is root) instead of that user's id.\nIt is possible to set/unset the\nsuid\nand\nsgid\nusing\nchmod\nand\n+s\nor\n-s\ninstead of\nx\n.\nWhile we are on this, let me introduce you to the last special bit. It is called\nsticky bit\nand if set, makes the file resistant to\ndeletion\n. If the sticky bit is set, ONLY the owner of the file will be able to delete it, even if others do have write access to it. This is useful for places like /tmp (everybody has write access on /tmp directory but we do not want others to delete our files).\nSticky bit is identified by\nt\nand will be shown on the last bit of a\nls -l\n:\n$ ls -dl /tmp\ndrwxrwxrwt 13 root root 77824 Feb  8 21:27 /tmp\nAs you can see the sticky bit is set and although all users have write access in this directory, they wont be able to delete each others files.\nLets review how you can set these access modes:\naccess mode\noctal\nsymbolic\nsuid\n4000\nu+s\nsgid\n2000\ng+s\nsticky\n1000\n+t\nguid on a directory will force any new file in that directory to have the guid of the directory itself.\numask\nAnother tricky question: what is the permissions of a newly created file? What happens if you\ntouch\na non-existing file? What will be its permissions? This is set by the\numask\n. This command tells the system what permissions (in addition to execute)\nshould not be given to\nnew files. In other words, imagine that all new files will have\n666\noctal permission (write + read for user, group & others), so a umask of 0002 (yes! 4 digits) will remove the 2 (write) for others (666-0002=664):\n$ umask\n0002\nIf we need to change umask, it can be done with the same command:\n$ umask\n0002\n$ touch newfile\n$ ls -ltrh newfile\n-rw-rw-r-- 1 jadi jadi 0 Feb  8 21:38 newfile\n$ mkdir newdir\n$ ls -ltrhd newdir\ndrwxrwxr-x 2 jadi jadi 4.0K Feb  8 21:38 newdir\n$ umask u=rw,g=,o=\n$ touch newerfile\n$ ls -l newerfile\n-rw------- 1 jadi jadi 0 Feb  8 21:41 newerfile\n$ umask\n0177\nNote how I used\nu=rw,g=,o=\nto tell\numask\nor\nchmod\nwhat I exactly wanted from it.\n← 104.4 Removed\nChapter List\n104.6 Create and change hard and symbolic links →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "104.6 Create and change hard and symbolic links",
    "url": "https://linux1st.com./1046-create-and-change-hard-and-symbolic-links.html",
    "extracted_title": "",
    "content": "weight: 2\nCandidates should be able to create and manage hard and symbolic links to a file.\nKey Knowledge Areas\nCreate links.\nIdentify hard and/or softlinks.\nCopying versus linking files.\nUse links to support system administration tasks.\nln\nunlink\nlinks\nOn a storage device, a file or directory is saved on some block and a reference to it is saved in the FAT, ext, ... allocation table alongside data about its owner, permissions, when it was last accessed, its size and such. As you already know, we can check this using the\nls\ncommand.\n$\nls\n-i\nscript.sh\n785379\nscript.sh\n$\nls\n-l\nscript.sh\n-rwxr--r-t\n1\njadi\nadm\n34\nMar\n5\n13\n:38\nscript.sh\n$\nls\n-R\n.:\ncheck_tr181_file.php\netc_apparmom.tar\nindex.html\nphp_checker\nscript.sh\ntest.csv\nw\n./php_checker:\ncheck_tr181_file.php\nindex.html\ntest.csv\n./w:\nBut it is also possible to create links. A link is simply an additional directory entry for a file or directory:\n$\nls\n-l\ntotal\n4\n-rwxr-xr-x\n1\njadi\nadm\n34\nMar\n5\n13\n:38\nscript.sh\n$\nln\n-s\nscript.sh\ncopy_of_script.sh\n$\nls\n-ltrh\ntotal\n4\n.0K\n-rwxr-xr-x\n1\njadi\nadm\n34\nMar\n5\n13\n:38\nscript.sh\nlrwxrwxrwx\n1\njadi\njadi\n9\nMar\n6\n11\n:31\ncopy_of_script.sh\n->\nscript.sh\n$\nls\n-i\n785349\ncopy_of_script.sh\n785379\nscript.sh\nA link is simply an additional directory entry for a file or directory, allowing two or more names for the same file. A\nhard link\nis a directory entry that points to an inode, while a\nsoft link or symbolic link\nis a directory entry that points to an inode that provides the name of another directory entry. The exact mechanism for storing the second name may depend on both the file system and the length of the name. Symbolic links are also called symlinks.\nSoft links, or symlinks, merely point to another file or directory by name rather than by inode. Soft links can cross file system boundaries.\n$\nvi\nnew_file\n$\nls\n-ltrh\ntotal\n4\n.0K\n-rw-------\n1\njadi\njadi\n9\nMar\n6\n11\n:37\nnew_file\n$\nln\nnew_file\nhard_link\n$\nln\n-s\nnew_file\nsoft_link\n$\nls\n-ltrh\ntotal\n8\n.0K\n-rw-------\n2\njadi\njadi\n9\nMar\n6\n11\n:37\nnew_file\n-rw-------\n2\njadi\njadi\n9\nMar\n6\n11\n:37\nhard_link\nlrwxrwxrwx\n1\njadi\njadi\n8\nMar\n6\n11\n:37\nsoft_link\n->\nnew_file\n$\nrm\nnew_file\n$\nls\n-ltrh\ntotal\n4\n.0K\n-rw-------\n1\njadi\njadi\n9\nMar\n6\n11\n:37\nhard_link\nlrwxrwxrwx\n1\njadi\njadi\n8\nMar\n6\n11\n:37\nsoft_link\n->\nnew_file\n$\ncat\nhard_link\nnew\nfile\n$\ncat\nsoft_link\ncat:\nsoft_link:\nNo\nsuch\nfile\nor\ndirectory\nNote the\nl\nas the first character in\nls -l\n's permission list when we have a symbolic link.\nYou can create hard links only for files, not for directories. The exception is the special directory entries in a directory for the directory itself and for its parent (\n.\nand\n..\n)\nYou will get an error if you attempt to create hard links that cross file systems or that are for directories.\n$\nln\nmydir\nlink2dir\n# ln: mydir: hard link not allowed for director\n$\nln\n-s\nmydir\nlink2dir\n# works just fine\nIf you are using relative names, you will usually want the current working directory to be the directory where you are creating the link; otherwise, the link you create will be relative to another point in the file system.\n$\nln\n-s\nmyfile.txt\nmydir/\n#broken link\n$\ncd\nmydir\n$\nln\n-s\n../myfile.txt\n.\nIt's recommended to use exact path for links.\n$\nln\n-s\n/tmp/myfile.txt\n/tmp/Foo/Bar/myfile.txt\n$\nls\n-l\n/tmp/Foo/Bar/myfile.txt\nlrwxrwxrwx.\n1\njadi\njadi\n9\nMar\n6\n12\n:37\n/tmp/Foo/Bar/myfile.txt\n->\n/tmp/myfile.txt\nwe can find symbolic links using the\nfind\ncommand:\n$\nfind\n.\n-type\nl\nThey are highly used to keep one specific name pointing to a changing binary name. For example we always need to be able to run\npython3\nso we point it to the latest installed python on the system:\n$\nwhich\npython3\n/usr/bin/python3\n$\nls\n-l\n/usr/bin/python3\nlrwxrwxrwx\n1\nroot\nroot\n10\nMar\n25\n2022\n/usr/bin/python3\n->\npython3.10\nTo remove links, you can use the\nrm\nor\nunlink\ncommand.\n← 104.5 Manage file permissions and ownership\nChapter List\n104.7 Find system files and place files in the correct location →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "104.7 Find system files and place files in the correct location",
    "url": "https://linux1st.com./1047-find-system-files-and-place-files-in-the-correct-location.html",
    "extracted_title": "",
    "content": "Weight: 2\nCandidates should be thoroughly familiar with the\nFilesystem Hierarchy Standard (FHS)\n, including typical file locations and directory classifications.\nKey Knowledge Areas\nUnderstand the correct locations of files under the FHS.\nFind files and commands on a Linux system.\nKnow the location and purpose of important file and directories as defined in the FHS.\nfind\nlocate\nupdatedb\nwhereis\nwhich\ntype\n/etc/updatedb.conf\nFHS\nFilesystem Hierarchy Standard (FHS) is a document describing the Linux/Unix file hierarchy. It is very useful to know these because it lets you easily find what you are looking for as a system admin.\ndirectory\nusage\n/\nPrimary hierarchy root and root directory of the entire file system hierarchy\n/bin\nEssential command binaries\n/boot\nStatic files of the boot loader\n/dev\nDevice files\n/etc\nHost-specific system configuration\n/lib\nEssential shared libraries and kernel modules\n/media\nMount point for removable media\n/mnt\nMount point for mounting a filesystem temporarily\n/opt\nAdd-on application software packages\n/sbin\nEssential system binaries\n/srv\nData for services provided by this system\n/tmp\nTemporary files\n/usr\nSecondary hierarchy\n/var\nVariable data\n/home\nUser home directories (optional)\n/lib\nAlternate format essential shared libraries (optional)\n/root\nHome directory for the root user (optional)\nThe\n/usr\nis the second level of the hierarchy. It containins shareable, read-only data. It can be shared between systems, although present practice does not often do this.\nThe\n/var\nfilesystem contains variable data files, including spool directories and files, administrative and logging data, and transient and temporary files. Some portions of /var are not shareable between different systems, but others, such as /var/mail, /var/cache/man, /var/cache/fonts, and /var/spool/news, may be shared.\nPath\nA general linux install has a lot of files; 741341 files in my case. So how the shell finds and runs a command? This is done by a variable called PATH:\n$ echo $PATH\n/home/jadi/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games;/home/jadi/bin/\nAnd for the root user:\n# echo $PATH\n/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\nAs you can see, this is the list of directories separated with colon. Obviously you can change your path with\nexport PATH=$PATH:/usr/new/dir\nor put this in\n.bashrc\nto make it permanent.\nLocating files\nwhich\n,\ntype\nand\nwhereis\nThe\nwhich\ncommand shows the first appearance of the command given in the path. In other words the\nwhich mkfs\nwill tell you what will be run if you issue this\nmkfs\ncommand.\n$ which mkfs\n/usr/bin/mkfs\njadi@ubuntuserver:~$ which ping\n/usr/bin/ping\njadi@ubuntuserver:~$ which -a ping\n/usr/bin/ping\n/bin/ping\nuse the\n-a\nswitch to show all appearance in the path and not only the first one.\nBut where is the\ncd\ncommand?\njadi\n@\nubuntuserver\n:\n~\n$\nwhich\ncd\njadi\n@\nubuntuserver\n:\n~\n$\ntype\ncd\ncd\nis\na\nshell\nbuiltin\nAs you can see,\nwhich\ndid not find anything for\ncd\n, so we tried it with\ntype\nto see what the h**l it is.\n$ type type\ntype is a shell builtin\n$ type for\nfor is a shell keyword\n$ type mkfs\nmkfs is /sbin/mkfs\n$ type chert\nbash: type: chert: not found\nThe\ntype\ncommand is more general than\nwhich\nand also understand and shows the\nbash keywords\n.\nAnother useful command in this category is\nwhereis\n. Unlike\nwhich\n,\nwhereis\nshows man pages and source codes of programs alongside their binary location.\n$ whereis mkfs\nmkfs: /usr/sbin/mkfs /usr/share/man/man8/mkfs.8.gz\ntip: there is also a\nwhatis\ncommand, try it.\nfind\nWe have already seen this command in\nchapter 103.7\nbut let's see a couple of new switches.\nThe\n-user\nand\n-group\nspecifies a specific user & group\nThe\n-maxdepth\ntells the find how deep it should go into the directories.\n$ find /tmp/ -maxdepth 1 -user jadi | head\n/tmp/1\n/tmp/2\nOr even find the files not belonging to any user/group with\n-nouser\nand\n-nogroup\n.\nLike other\ntests\n, you can add a\n!\njust before any phrase to negate it. So this will find files\nnot belonging\nto jadi:\nfind . ! -user jadi\nIt is also very common to use for files with specific strings in their names:\n$\nsudo\nfind\n/etc\n-iname\n\"*vmware*\"\n/etc/vmware-tools\n/etc/vmware-tools/scripts/vmware\nlocate & updatedb\nYou tries\nfind\nand loved it but there is an issue with it: it does a live active search! This can slow down your system or push too much pressure on your hard or on larger file systems take too long. To solve this, there is a faster command:\n$\nlocate\nnetworking\n/etc/cloud/cloud.cfg.d/subiquity-disable-cloudinit-networking.cfg\n/snap/core20/1408/usr/lib/python3/dist-packages/cloudinit/distros/networking.py\n/snap/core20/1408/usr/lib/python3/dist-packages/cloudinit/distros/__pycache__/networking.cpython-38.pyc\n/snap/core20/1826/usr/lib/python3/dist-packages/cloudinit/distros/networking.py\n/snap/core20/1826/usr/lib/python3/dist-packages/cloudinit/distros/__pycache__/networking.cpython-38.pyc\n/usr/lib/python3/dist-packages/cloudinit/distros/networking.py\n/usr/lib/python3/dist-packages/cloudinit/distros/__pycache__/networking.cpython-310.pyc\n/usr/lib/python3/dist-packages/sos/report/plugins/networking.py\n/usr/lib/python3/dist-packages/sos/report/plugins/__pycache__/networking.cpython-310.pyc\nAnd it is fast:\n$\ntime\nlocate\nkernel\n/\n|\nwc\n-l\n16989\nreal\n0m0.091s\nuser\n0m0.094s\nsys\n0m0.034s\nThis is fast because its data comes from a database created with\nupdatedb\n(its package is called\nplocate\non debian). Usually this command runs automatically (with a cronjob) on a daily basis. Its configuration file is\n/etc/updatedb.conf\nor\n/etc/sysconfig/locate\n:\n$\ncat\n/etc/updatedb.conf\nPRUNE_BIND_MOUNTS\n=\n\"yes\"\n# PRUNENAMES=\".git .bzr .hg .svn\"\nPRUNEPATHS\n=\n\"/tmp /var/spool /media /home/.ecryptfs\"\nPRUNEFS\n=\n\"NFS nfs nfs4 rpc_pipefs afs binfmt_misc proc smbfs autofs iso9660 ncpfs coda devpts ftpfs devfs mfs shfs sysfs cifs lustre tmpfs usbfs udf fuse.glusterfs fuse.sshfs curlftpfs ecryptfs fusesmb devtmpfs\"\nYou can update the  db by running\nupdatedb\nas root.\n← 104.6 Create and change hard and symbolic links\nChapter List\n105.1 Customize and use the shell environment →\nCategory\nLPIC1\nTags\n101\n19\nLPIC1\n42\nLPIC1-101-500\n22\nContact"
  },
  {
    "title": "105.1 Customize and use the shell environment",
    "url": "https://linux1st.com./1051-customize-and-use-the-shell-environment.html",
    "extracted_title": "",
    "content": "Weight: 4\nCandidates should be able to customize shell environments to meet users’ needs. Candidates should be able to modify global and user profiles.\nKey Knowledge Areas\nSet environment variables (e.g. PATH) at login or when spawning a new shell\nWrite Bash functions for frequently used sequences of commands\nMaintain skeleton directories for new user accounts\nSet command search path with the proper directory\nTerms\n.\nsource\n/etc/bash.bashrc\n/etc/profile\nenv\nexport\nset\nunset\n~/.bash\\_profile\n~/.bash\\_login\n~/.profile\n~/.bashrc\n~/.bash\\_logout\nfunction\nalias\nEnvironment variables\nShell Environment Variables are special variables that contain information and configuration about the shell. System shell uses them when it needs to show you a prompt, run a command, or search what to run. Different operating system distributions have different environment variables and you can add yours if you need so; or want so!\nenv\ncan set, remove or display variables or even run a command in a modified environment.\nSyntax\nenv [OPTION]... [NAME=VALUE]... [COMMAND [ARGS]...]\nOptions\n-u NAME\n--unset=NAME\nRemove variable NAME from the environment, if it was in the\nenvironment.\n-\n-i\n--ignore-environment\nStart with an empty environment, ignoring the inherited\nenvironment.\nYou can also use the more general\nprintenv\ncommand.\nset\nset\nallows you to change the values of shell options (variables) or to display the names and values of shell variables.\nUsing\nset\nwe can configure how bash works. These are some samples:\nswitch\nresult\n-b\nCause the status of terminated background jobs to be reported immediately, rather than before printing the next primary prompt.\n-e\nreturn in case a pipline, command, ... return non-zero\n-n\nRead commands but do not execute them; this may be used to check a script for syntax errors. This option is ignored by interactive shells.\n-t\nExit after reading and executing one command.\n-C\nPrevent output redirection using ‘>’, ‘>&’, and ‘<>’ from overwriting existing files.\nsetting environment variables\nBash environment variables can contain only letters (a to z or A to Z), numbers ( 0 to 9) or the underscore character\n_\nand cannot start with numbers. Traditionally we use UPPERCASE letters in our variable names.\nTo set a new environment variable do as follow:\n$\nname\n=\njadi\n$\ndesc\n=\n'A programmer who enjoys cycling and promotes freedom'\n$\necho\n$name\njadi\n$\necho\n$desc\nA\nprogrammer\nwho\nenjoys\ncycling\nand\npromotes\nfreedom\nNotes\n:\nThere should be no spaces around\n=\n.\nUse the quotes or double-quotes when your value do have spaces (or other special characters) in it.\nUse a dollar sign only when referring to a variable, and not when defining it.\nunset\nThis command unsets a variable or a function.\n$ name=jadi\n$ echo $name\njadi\n$ unset name\n$ echo $name\nexport\nWhen setting environment variables with a simple\n=\n, the variable is only available in the current shell. So even if you run a new command from the current shell the variable wont be valid there (because technically the new command will be run in a sub-shell). If you want your variable to be valid in the current shell and all its sub-shells, you have to\nexport\nit.\n$ export name=jadi\n$ echo $name\njadi\n$ bash\n$ echo $name\njadi\n.\n(and source)\nYes only a dot! This is a shortcut for the bash source command. You can find it in files like\n/etc/profile\n. It runs the executable in front of it as part of the current environment (and not in a sub-process).\nNote: If you just execute a file (without source or dot) bash creates a child, runs the executable there and then closes it.\nThe\nsource\ncommand is commonly used when you want to load new/updated environment variables or functions from a script.\nAliases\nThis is a way to define... um.. and\nalias\n. You can find them in your\n~/.bashrc\n:\nalias ll='ls -alF'\nalias la='ls -A'\nalias l='ls -CF'\nIt is a way to define a shortcut and you can add yours:\nalias testnet='ping 4.2.2.4'\nfunctions\nLike larger programming languages, Bash has functions, though in a somewhat limited implementation. A function is a subroutine, a code block that implements a set of operations, a \"black box\" that performs a specified task. Wherever there is repetitive code, when a task repeats with only slight variations in procedure, then consider using a function.\nfunnyls () {\nls -ltrh\necho \"This is a funny ls\"\n}\nDifferent shell envs\nThe shell (here bash) can be started in 3 different ways:\nWhen you\nlogin\ninto the shell, say after a ssh or when you site behind a terminal and login into a Linux machine. This is an interactive login session\nWhen you open a new terminal (say from a GUI env). This is also interactive but not a\nlogin\nshell.\nWhen a shell\nspawns\nwhen you run a command. Yes.. technically when you run a new command from a shell, a sup-shell starts, runs the commands and then returns back to your shell. This is called \"non interactive\" shell.\nWe will see how different default environment variables can be set in each of these modes.\nlogin shell\nThis is when you give your user and pass to enter a shell. In this case, these steps will define your shell environment:\n1-\n/etc/profile\nis run\n2- A line in\n/etc/profile\nruns whatever is in\n/etc/profile.d/\nNow the global profile is loaded and system will go for user specific profiles:\n3.1-\n/home/USERNAME/.bash_profile\n3.2-\n/home/USERNAME/.bash_login\n3.3-\n/home/USERNAME/.profile\nNote that only one of the 3, 4 & 5 will run. The system will go for\n.bash_profile\nand IF IT IS NOT THERE will try\n.bash_login\nand IF IT IS NOT THERE will try to run\n.profile\n. If any of these exists, the system wont look any further. So if you have only 4 & 5, only the 4 will be run.\nAt the end, the system loads:\n4-\n/home/USERNAME/.bashrc\nCommonly you will add whatever personal config you want into the\n~/.bashrc\n.\nInteractive (non-login) shell\nif you run a shell in an interactive mode (non-login) shell from a GUI or within another temrinal, only two file will handle the environment:\n/etc/bash.bashrc\n(or\n/etc/bashrc\nin some systems)\n/home/USERNAME/.bashrc\nNon Interactive Shell\nThere is no specific file to be used in this case. Instead we have the\nBASH_ENV\n. When a new non-interactive shell starts, it looks into this variable and if it points to a file, runs it.\nOn most Linux distributions, this environment value is not set by default.\nA few more files\n/etc/skel\nThis directory contains files which will be used as a starting template for each new user.\n.bash_logout\nThis runs when you logout from a login shell. In many distros it only clears the screen so the next person will not be able to watch what you were doing before you logout.\n← 104.7 Find system files and place files in the correct location\nChapter List\n105.2 Customize or write simple scripts →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "105.2 Customize or write simple scripts",
    "url": "https://linux1st.com./1052-customize-or-write-simple-scripts.html",
    "extracted_title": "",
    "content": "Weight: 4\nDescription\nCandidates should be able to customize existing scripts, or write simple new Bash scripts.\nKey Knowledge Areas:\nUse standard sh syntax (loops, tests).\nUse command substitution.\nTest return values for success or failure or other information provided by a command.\nExecute chained commands.\nPerform conditional mailing to the superuser.\nCorrectly select the script interpreter through the shebang (\n#!\n) line.\nManage the location, ownership, execution and suid-rights of scripts.\nTerms and Utilities\nfor\nwhile\ntest\nif\nread\nseq\nexec\n||\n&&\ncombining commands\nIf you want to run more than one command in oneline, separate them by a\n;\n. So the\ncd /tmp; ls\nwill run the\ncd /tmp\nand then\nls\n. But there are more advanced usages too.\nYou can use\n&&\n(as logical And) and\n||\n(as logical OR) chaining. In case of And, the execution will stop as soon as the first one fails to execute. In case of Or, the next command will only run if the first one fails. Just like in logic gates.\nConfusing? Let me explain again. The system will always try to\nevaluate\nthe outcome of your chain. So if you have\nA && B\nthen A fails, the system does not need to test B (because the overall result will be False anyway). Same logic works for\nA || B || C\n. If A works fine, the overall evaluation will be True so no need for testing B or C. But if A fails, system will try B and if B fails, we have to try C.\nWe use chaining to create logical flows. For example:\n$\ncp\nbackup.gzip\n/backups/\n&&\nrm\nbackup.gzip\nworks like this: copy the backup to this location and delete the file ONLY IF the previous copy was successful.\nShell Scripts\nWe can combine shell commands or programs and or some logic or loops to write large or small scripts. Shell scripts are useful when you want to\nautomate\nsome tasks in one larger command. Say a shell script called \"do_backup.sh\" may compress some files into a file, rename this file based on the current date and time and then save it on a remote site and at last delete the ones older than 1 month.\nShebang\nThere is a line at the beginning of scripts which starts with\n#!\nand continues with an executable who needs to run this script. It is called shebang and as mentioned, tells the shell which\ninterpreter\nmust be used to run this script.\nNote: In many programming languages (including Bash & Python), a\n#\nat the beginning of a line in script indicates\ncomments\n. Do not confuse it with the\nShebang\n(\n#!\n)\nCommonly we run shell scripts using\n#!/bin/bash\nor\n#!/bin/sh\nThe rest of a shell script can use most of the commands you already know in addition with some more \"programming\" specific commands like loops, tests and such. Here is a primitive sample:\n#!/bin/bash\necho\necho\n\"We are learning! Wowww...\"\necho\nThe\nsh\nis a more basic shell but it is compatible with most of the things we talk about. There are also other options like\nzsh\nand\ncsh\nbut the LPIC is based on\nbash\n.\nVariables\nAlready seen in the previous section. You can define variables like this\nVARNAME=VALUE\n. Here is a sample:\n#!/bin/bash\nNAME\n=\nJadi\necho\necho\n\"\n$NAME\nis learning! Wowww...\"\necho\nNote: you can also do NAME=\"Jadi the geeking guy\" if you need to have spaces in your values\nIf you want to access the command line arguments in your shell script, use\n$1\n,\n$2\n, .... You can find the number of command line arguments via\n$#\nvariable.\nCommand substitution\nSometimes you need to save the output of a command in a variable or use it in some way. To do so you can use\n$(command)\nor simply `command` (Backtick). Look at these two samples:\n➜\nFILES\n=\n$(\nls\n-1\n)\n# the $FILES variable contains the list of all files\n➜\n~\ndate\n+\n'%Y%m%d-%H%m'\n20230408\n-1604\n➜\n~\ntouch\nbackup_\n`\ndate\n+\n'%Y%m%d-%H%m'\n`\n.tar\n➜\n~\nls\nbackup_20230408-1604.tar\nexecuting scripts\nIn the Unix/Linux world, file should be executable to be executable! :D To do so use the\nchmod\ncommand with\n+x\n. After this step you can run your script by giving its path to shell. Please note that Linux by default does not looks into the current directory so if you are going to run a script at the current directory, you have to run\n./script_name.sh\n.\nAnother way to run a script is running\nsh\nor\nbash\nwith the shell scripts name as its argument. That is\nsh my_script.sh\n.\nIn both above methods, the scripts runs inside a child bash process and\nreturns\nback afterwards to the same shell. If you want to override this and\nreplace\nyour current shell with the program you are going to run, use the\nexec\nbuild-in command. The\n-c\nswitch will run the command in a clean environment.\nConditions\nUp to now, we were just running commands one by one. That is not very\nprogrammatic\n. If we are going to have some\nlogic\nin our programs, we need\nconditions\nand\nloops\n. First we will cover conditions, using the\nif\ncommand. Its usage is like this:\nif\n[\ncondition\n]\nthen\ndo\nsomething\ndo\nanother\nthing\nelse\ndo\nnew\nthings\neven\nfunnier\nthings\nfi\nNote: else part is optional,\nif\n,\nthen\n,\nfi\nis enough.\nConditions can be TRUE or FALSE. A very simple conditions is\nif [ \"Linux\" = \"Linux\" ]\n. Silly? I know but wait; we are learning the syntax only. Please give special attention to the\nspaces\nand\n=\nfor checking if two strings are equal.\n#!/bin/bash\nkernel\n=\n$(\nuname\n-s\n)\nif\n[\n$kernel\n=\n\"Linux\"\n]\nthen\necho\nYES.\nYou\nare\nusing\na\nLinux\nelse\necho\n\"Not a linux :(\"\nfi\nThe command to check conditions is the\ntest\ncommand but since it is used a lot, we have a shortcut for it. Instead of\ntest condition\nyou can write\n[ condition ]\n.\nconditions\nwhat is means\n\"a\" = \"b\"\nif two strings are equal (here it will return False)\n\"a\" != \"b\"\nstring a\nis not equal\nto string b\n4 -lt 40\nif 4 is\nlower   than\n40 (True)\n5 -gt 15\nif 5 is\ngreater than\n15 (False)\n5 -ge 5\nif 5 is\ngreater or equal\n5\n5 -le 3\nif 5 is\nlower or equal\nto 3\n9 -ne 2\n9 is\nnot equal\nwith 2 (True)\n-f FILENAME\nif file FILENAME exists\n-s FILENAME\nif file exists and its size is more than 0 (Zero)\n-x FILENAME\nif file exists and is executable\nread\nUsing\nread\nwe can read the user input. Look at this:\n#!/bin/sh\necho\n\"what is your name?\"\nread\nNAME\necho\n\"Hello\n$NAME\n\"\nif\n[\n$NAME\n=\n\"Jadi\"\n]\nthen\necho\n\"Oh I know you!\"\nelse\necho\n\"I wish I knew you\"\nfi\necho\n\"Bye\"\nYou can timeout the waiting using the\n-t\nand show a prompt using\n-p\n.\nif\nread\n-t\n10\n-p\n\"Server address?\"\nSERVER\nthen\necho\n\"Connecting to the\n$SERVER\n...\"\nelse\necho\necho\n\"Too late!\"\nfi\nloops\nIn programming loops are used to repeat part of the programs. We have 2 different loops in Bash;\nfor\nand\nwhile\n. The for loops lets us run part of a program for a specific number of iterations. The\nwhile\nloop is used when we want to repeat part of a program\nwhile\na specific condition became true.\nfor\nThe syntax is like this:\nfor\nVAR\nin\nSOME_LIST\n;\ndo\nsome\nstuff\nwith\n$VAR\nsome\nother\nstuff\ndone\nNote:  the\nin\n,\n;\n,\ndo\nand\ndone\n.\nOn each iteration, the VAR will be equal to one of the SOME_LIST elements. SOME_LIST can be numbers, name of files, words, ...\nfor\nNUM\nin\n1\n2\n3\n4\n5\n6\n;\ndo\necho\n$NUM\ndone\nBut what if you needed to run from 1 to 42? We have the\nseq\ncommand for that. The\nseq 1 42\nor its shorthand\n{1..42}\nwill let us run a loop 42 times.\nWe can also use non-numeric variables here. This is a common use case:\nfor\nFILE\nin\n$(\nls\n)\n;\ndo\necho\n$FILE\nwc\n-l\n$FILE\ndone\nwhile\nThis is the syntax:\nwhile\n[\ncondition\n]\ndo\ndo\nsomething\ndo\nanohter\nthing\ndone\nIf your condition stays true all the time, the\nwhile\nloop will run\nforever\n. This is called an\ninfinite loop\nand should be stopped by a\nCtrl+C\n.\nThis is sample:\nVAR\n=\n52\nwhile\n[\n$VAR\n-gt\n42\n]\ndo\necho\nVAR\nis\n$VAR\nand\nit\nis\nstill\ngreater\nthan\n42\nlet\nVAR\n=\nVAR-1\ndone\nNote the\nlet\nusage! If you just say\nVAR=1\nand then\nVAR=$VAR+1\n, then VAR will be equal to\n1+1\nas an string!.\nmailing the root user\nFor sending mail, you need to install\nmailutils\n. Then the\nmail\ncommand will send emails. You can send the mail to the root user by issuing this command:\njadi@funlife:~$\nmail\nroot\nCc:\nSubject:\nHi\nthere\nroot\nhello\nthere.\nThis\nis\nmy\nmail\nAnd root will get this email. She can read it using\nmail\ncommand.\nIf you need to send emails in a script, just do:\n$\necho\n\"Body!\"\n|\nmail\n-s\n\"Subject\"\nroot\nreturned values\nIn the Unix world, the programs return values when they are finished. If you have programmed C, this is the\nreturn 0\nat the end. Commonly a 0 means successful execution. This return value can be read / examined using\n$?\nvariable.\njadi@ubuntuserver:/etc/skel$\ntouch\n/chert\ntouch:\ncannot\ntouch\n'/chert'\n:\nPermission\ndenied\n$\necho\n$?\n1\n$\ntouch\n/tmp/11\n$\necho\n$?\n0\n$\ntest\n-e\n/\n$\necho\n$?\n0\n$\ntest\n-e\n/nonexist\n$\necho\n$?\n1\n$\ndummycommand\ndummycommand:\ncommand\nnot\nfound\n$\necho\n$?\n127\nTo return values from your shell scripts, use the\nexit\ncommand; say\nexit 0\nfor a successful exit.\nBonus\nJust found my old\ngeneral_backup.sh\nscript and\nuploaded it to github for you\n. Nothing fancy but shows you how a general bash script can help you on your daily tasks.\n← 105.1 Customize and use the shell environment\nChapter List\n105.3 Removed! →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "106.1 Install and configure X11",
    "url": "https://linux1st.com./1061-install-and-configure-x11.html",
    "extracted_title": "",
    "content": "Weight: 2\nCandidates should be able to install and configure X11.\nKey Knowledge Areas\nUnderstanding of the X11 architecture.\nBasic understanding and knowledge of the X Window configuration file.\nOverwrite specific aspects of Xorg configuration, such as keyboard layout.\nUnderstand the components of desktop environments, such as display managers and window managers.\nManage access to the X server and display applications on remote X servers.\nAwareness of Wayland.\nTerms and Utilities:\n/etc/X11/xorg.conf\n/etc/X11/xorg.conf.d/\n~/.xsession-errors\nxhost\nxauth\nDISPLAY\nX\nIntro\nMany people prefer to navigate and use their system via a Graphical User Interface (Or GUI in short). A GUI based operating system provides the user the Icons, mouse, windows & folders, a metaphor from our daily \"desktops\". But how does this happen? As many other things in the Unix world, this happens via layers of applications that are doing one thing well. This is a rough representation of this stack:\nOn the lower level we have the hardware (say your Monitor) and then the Linux kernel and its drivers. On top of that there is a software called \"Display Manager\" or \"Display Server\". This program can ask the operating system (the kernel) to perform what the desktop manager requests. In other words, the display server accepts the desires of UI (even via a network channel) and translates them to the language that Kernel (and drivers in it) understand.\nIn this section we are focusing on\nX\nwhich is one of the two main Display Servers and then will have a brief look at the other one; the modern\nWayland\n.\nX\nThe X Window System is a network transparent window system which runs on a wide range of computing and graphics machines; including in most GNU/Linux distributions when they need a graphical interfaces. Its history a bit long and started with\nXFree86\nthen the X.org started its own X Server which is called X11 nowadays.\nGoing down the rabbit hole,\nX Window System\n(or\nX\n), was the default windowing system for most Unix and Unix like systems during 1980s. X.Org server is the free and open-source implementation of the X Window System display server by the X.Org Foundation. These day when we say\nX\nwe are referring to the whole family of the network protocols describing how messages are exchanged between a client (application) and the display server; X11 being the 11th version of them.\n/etc/X11/xorg.conf\nThis used to be main configuration file for X. In recent days X configures itself when starting and does not need a config file. But if you want to make changes in the boot-up process, you can create a new\nxorg.conf.new\nfile by running the following command:\nXorg -configure\nand then moving it to the\n/etc/X11/xorg.conf\n. This file contains different sections. Lets have a look at some of them.\nSection \"Files\"\nFontPath    \"/usr/share/X11/fonts/misc\"\nFontPath    \"/usr/share/X11/fonts/100dpi/:unscaled\"\nFontPath    \"/usr/share/X11/fonts/75dpi/:unscaled\"\nFontPath    \"/usr/share/X11/fonts/Type1\"\nFontPath    \"/usr/share/X11/fonts/100dpi\"\nFontPath    \"/usr/share/X11/fonts/75dpi\"\nFontPath    \"/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType\"\nEndSection\nThis part is about Fonts. When X-Server is running it needs these files. FontPaths tell X11 where fonts are. It also can refer to an IP running a font-server which is not common these days. Font servers used to be responsible of rendering fonts to be shown on clients but nowadays computers are fast and can render their own fonts. Font servers are going out of fashion!\nSection \"Module\"\nLoad    \"bitmap\"\nLoad    \"ddc\"\nLoad    \"dri\"\nLoad    \"extmod\"\nLoad    \"freetype\"\nLoad    \"glx\"\nLoad    \"int10\"\nLoad    \"type1\"\nLoad    \"vbe\"\nLoad    \"dbe\"\nEndSection\nThese are modules. For example\nglx\ntakes care of\n3D graphical\neffects and we are asking X to load it alongside others.\nHere are the\nInputDevice\ns:\nSection \"InputDevice\"\nIdentifier    \"Generic Keyboard\"\nDriver        \"kbd\"\nOption        \"CoreKeyboard\"\nOption        \"XkbRules\"    \"xorg\"\nOption        \"XkbModel\"    \"pc105\"\nOption        \"XkbLayout\"    \"us\"\nEndSection\nSection \"InputDevice\"\nIdentifier    \"Configured Mouse\"\nDriver        \"mouse\"\nOption        \"CorePointer\"\nOption        \"Device\"        \"/dev/input/mice\"\nOption        \"Protocol\"        \"ImPS/2\"\nOption        \"Emulate3Buttons\"    \"true\"\nOption        \"ZAxisMapping\"        \"4 5\"\nEndSection\nSection \"InputDevice\"\nIdentifier      \"Synaptics Touchpad\"\nDriver          \"synaptics\"\nOption          \"SendCoreEvents\"        \"true\"\nOption          \"Device\"                \"/dev/psaux\"\nOption          \"Protocol\"              \"auto-dev\"\nOption        \"RightEdge\"        \"5000\"\nEndSection\nAs you can see each device has an\nIdentifier\n,\nDriver\nand some\noptions\n. Above we defined a mouse, a keyboard and a touchpad and gave them some names.\nSection \"Device\"\nIdentifier    \"ATI Technologies, Inc. Radeon Mobility 7500 (M7 LW)\"\nDriver        \"radeon\"\nBusID        \"PCI:1:0:0\"\nOption        \"DynamicClocks\"    \"on\"\nOption        \"CRT2HSync\"    \"30-80\"\nOption        \"CRT2VRefresh\"    \"59-75\"\nOption        \"MetaModes\"    \"1024x768 800x600 640x480 1024x768+1280x1024\"\nEndSection\nA graphic card! Again it has its identifies (name), its drivers and some options (like support resolutions, refresh rates, ...). This device needs a screen and a monitor:\nNote: The\nvesa\npoints to a low resolution, always working driver. It is used for troubleshooting.\nSection \"Monitor\"\nIdentifier    \"Generic Monitor\"\nOption        \"DPMS\"\nEndSection\nSection \"Screen\"\nIdentifier    \"Screen0\"\nDevice        \"Screen0 ATI Technologies, Inc. Radeon Mobility 7500 (M7 LW)\"\nMonitor        \"Generic Monitor\"\nDefaultDepth    24\nSubSection \"Display\"\nDepth        1\nModes        \"1024x768\"\nEndSubSection\nSubSection \"Display\"\nDepth        4\nModes        \"1024x768\"\nEndSubSection\nSubSection \"Display\"\nDepth        8\nModes        \"1024x768\"\nEndSubSection\nSubSection \"Display\"\nDepth        15\nModes        \"1024x768\"\nEndSubSection\nSubSection \"Display\"\nDepth        16\nModes        \"1024x768\"\nEndSubSection\nSubSection \"Display\"\nDepth        24\nModes        \"1024x768\"\nEndSubSection\nEndSection\nNote how the screen uses the already defined monitor (using its identifier \"Generic Monitor\") and an already defined graphic card. Also note the different color modes (say\n24bit 1024x768\n).\nAt the end we have to glue all of the above in one place as\nServerLayout\n:\nSection \"ServerLayout\"\nIdentifier    \"DefaultLayout\"\nScreen        \"Default Screen\"\nInputDevice    \"Generic Keyboard\"\nInputDevice    \"Configured Mouse\"\nInputDevice    \"Synaptics Touchpad\"\nEndSection\nWe have a layout with a screen and 3 input devices :)\nNote: Do not panic. A general understanding of xorg.conf is enough\n/etc/X11/xorg.conf.d/\nWhat happens if you edit the\n/etc/program.conf\nand then update the system? will the system overwrite your newly edited\nprogram.conf\nwith the latest version from the vendor? or omit the changes in the vendor in favor of your local edits? Both are\nbad\n.\nTo solve this issue, many programs are creating a new configurations directory as\n/etc/program/program.conf.d/\nand asking you to add your\nlocal\nconfigurations there. So the main configuration file from the vendor will be\n/etc/program/program.conf\nand all your new configurations will go into the\n/etc/program/program.conf.d/\nas separated files. Much easier to manage (because smaller atomic files per configuration) and no touching the vendors config by locals. Cool? yes... this is happening in X11 too. Your own configs should go into\n/etc/X11/xorg.conf.d/\nand the\n/etc/X11/xorg.conf\nshould remain untouched.\n~/.xsession-errors\nIn case of any issues during the start of running of X, the errors will go here. So if you ran into an issue on your GUI startup, this is the file you should check to see what went wrong.\nxhost\nThis command controls the access to the X server. If you are on a X server and run\nxhost\nit tells you the access status.\n$ xhost\naccess control enabled, only authorized clients can connect\nSI:localuser:jadi\nAs you can see only authorized clients can connect. To open it for all:\njadi@funlife:~$ xhost +\naccess control disabled, clients can connect from any host\nAnd for closing it again:\njadi@funlife:~$ xhost -\naccess control enabled, only authorized clients can connect\nOr open it for only one specific IP:\njadi@funlife:~$ xhost +192.168.42.85\n192.168.42.85 being added to access control list\njadi@funlife:~$ xhost\naccess control enabled, only authorized clients can connect\nINET:192.168.42.85    (no nameserver response within 5 seconds)\nSI:localuser:jadi\nNow the\n192.168.42.85\nmachine (REMOTE) can send its graphical requests to this machine. whats the usage? continue reading the next section (assuming this machine is called\n192.168.42.80\n(SERVER) and we opened the access from to its X11 for\n192.168.42.85\n(REMOTE) ).\nDISPLAY\nThis variable tells graphical programs where to send their graphical output. This is the default:\n$ echo $DISPLAY\n:0\nSo if I run any graphical program on my machine, its output will be displayed on the same machine.\nBut lets change it to the\n192.168.42.80\nmachine (SERVER).. if you remember we just told it that this machine (REMOTE) can connect to it.\n$ export DISPLAY=192.168.42.80:0\n$ xeyes # the eyes will be shown on 192.168.42.80 machine\nCool? yes. But this might not wonk on your setup. The X does not listen for remote connection in most distros because of security concerns.\nIn the next chapter, we will see how you can properly run graphical programs on remote servers and receive the GUI part on your side\nxauth\nThe\nxauth\nprogram is used to edit and display the authorization information used in connecting to the X server. On\nxhost\nyou see how you can open your X to remote IPs, using\nxauth\nyou can do the same based on a shared \"secret\".\nIn this method,\nX\ncreates an\n.XAuthority\nfile in your home and whoever knows about the contents, can contact X.\nIf your\nX\nis not working, one step might be\nrm\ning the\n.XAuthority\nfile and restarting the X.\nWayland\nX11\nis super old and is only usable via lots of patches and hacks. Thats why one of its developers started a modern display manager called\nWayland\n. In recent years many distros are switching from the default\nX11\nto\nWayland\nand keeping X11 as a fail-safe option. Wayland is more secure and much easier to maintain and I can assure you that in a couple of years we will see more and more of it.\n← 105.3 Removed!\nChapter List\n106.2 Graphical Desktops →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "106.2 Graphical Desktops",
    "url": "https://linux1st.com./1062-graphical-desktops.html",
    "extracted_title": "",
    "content": "Weight: 1\nCandidates should be aware of major Linux desktops. Furthermore, candidates should be aware of protocols used to access remote desktop sessions.\nKey Knowledge Areas\nAwareness of major desktop environments\nAwareness of protocols to access remote desktop sessions\nTerms and Utilities\nKDE\nGnome\nXfce\nX11\nXDMCP\nVNC\nSpice\nRDP\nDesktop Environments\nWhen your system boots in the graphical mode, you will see a graphical login page. This is based on the\nX Display Manager Control Protocol (XDMCP)\nwhich is responsible for the underlying login system. On top it different programs like GDM (for GNOME), SSDM (KDE) and a more general option XDM handle the theming and other aspects of login.\nAfter the successful login, you will be in your GUI. Generally this is a\nlarge\nsoftware package which manages your windows, mouse and has clickable icons and folder with drag and drop capability. There might even be a trashcan somewhere and lots of other softwares like calculators and an email client. These are called\nDesktop Environments\n. On the other hand, some people prefer to have a minimal window manager without all the bells and whistles and chose and add them based on their own preferences.\nA window manager is responsible for showing and managing windows on your GUI. Even the most minimalist GUI, needs a window manager to be function. But add more and more libraries and software to your window manager (say a calculator, calendar, email client, programming libs for that specific environment, maps, ...) and you will end up with what is called a Desktop Environment.\nIn this section we will review 3 of the most famous Desktop Environments and then will talk about \"remote access\" to desktop envs.\nGNOME\nStarted at 1999\nFocuses on productivity & Accessibility\nUsed by most GNU/Linux distros\nKDE [Plasma]\nStarted at 1996\nFrom version 5 (2016) re-branded to KDE Plasma\nHighly customizable\nUsed during the Mars mission in NASA\nCERN uses KDE\nXFCE\nStarted at 1999\nLightweight but beautiful\nModular\nRemote Connection to GUIs\nThere are many situation where you want to connect remotely to your GUI based system. This can be remote assistance to a friend, checking the status on your computer from your phone, use a GUI based program on a much stronger remote machine or as a colleague did, hide a laptop in the LAB and connect to it remotely and work from home when you should have been to the office (don't!).\nHere we will do a quick review on some of these methods.\nX Forwarding\nThis is not mentioned in this section in LPIC1 but it is super useful to know about. If you have an SSH server, you can connect to it and run GUI softwares there and get the GUI part of the program on your own machine. This is called X-Forwarding in ssh.\nFirst make sure that the\nX11Forwarding yes\nis configured in\n/etc/ssh/sshd_config\n(and [restart the service is needed]). Then do your ssh as follow:\n$\nssh\n-X\nserver_ip.address.net\n$\nxeyes\nAnd they eyes will appear on your own machine! You can do the same to run a browser or a cpu hungry simulation software.\nVNC\nVirtual Network Computer (VNC) started long time ago and is still active and alive. It is multi platform and uses RFB protocol. Its default port is 5900 + [display number, usually is 1 by default] so you need to use 5901 port to connect via VNC.\nThe good point about VNC is its flexibility and clients on all platform but it lacks security.\nSpice\nThe\nSimple Protocol for Independent Computing Environment\nstarted as a closed source software but become open source when RedHat bought the company in 2008. It can be used to connect to KVM virtual machines (a very common virtual machine system) and has some advantages like fast speeds similar to local connections and low CPU usage. There is one server implementation but you can find many clients, including GNOMEs boxes program.\nRDP\nUsing softwares like\nXrdp\nyou can start listening for Remote Desktop Protocol (RDP) connections on your machine on port 3389 by default. The traffic is encrypted by default and there are lots of free and open RDP clients available.\n← 106.1 Install and configure X11\nChapter List\n106.3 Accessibility →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "106.3 Accessibility",
    "url": "https://linux1st.com./1063-accessibility.html",
    "extracted_title": "",
    "content": "Weight: 1\nDemonstrate knowledge and awareness of accessibility technologies.\nKey Knowledge Areas\nBasic knowledge of visual settings and themes.\nBasic knowledge of assistive technology.\nTerms and Utilities\nHigh Contrast/Large Print Desktop Themes\nScreen Reader\nBraille Display\nScreen Magnifier\nOn-Screen Keyboard\nSticky/Repeat keys\nSlow/Bounce/Toggle keys\nMouse keys\nGestures\nVoice recognition\nLinux is for everyone\nSome people have physical complications. Some can not see well, some can not see at all and some can not user their finger as most people do. Linux have 3 answers:\n1- AccessX helps people with physical problems to use keyboard/mouse\n2- Visual Settings help people with vision problems by magnifying the screen and things like that\n3- Assistive Technologies are things like text-to-speech (tts) and reads the screen for people with visual problem\nThese options are available in display managers (login screen) and in major desktops (like GNOME, KDE Plasma, xfce, ...).\nIn Gnome the config is located at Settings ~ Universal Access. The configurations are categorized and are as follows:\nHigh Contrast\nZoom\nLarge text\nScreen Reader\nScreen Keyboard (show a keyboard on screen)\nVisual Alerts (instead Beeps, flash the screen )\nSticky Keys (Press shift, then press a -> capital A)\nSlow Keys (do not repeat keys after pressing a key for few seconds)\nBounce Keys (if you hit a key twice fast, it won't accept the second one)\nMouse Keys (Arrow keys on number path will work as a mouse)\nSimulate Secondary Click (by holding down the click)\nHover click (click by waiting on a button)\nTTS\nApplications like\nOrca\nor\nEmacspeak\ncan read the dialog boxes to you so you can decide what the answer only by hearing.\nAbove you can see a Braille Display. This device will output text as braille for visually impaired people, although using a modern Text To Speech or screen reader might be more practical when possible.\nVoice recognition\nAfter the recent advancements in Voice recognition, this is one of the best methods for people with disabilities to control their OSs.\n← 106.2 Graphical Desktops\nChapter List\n107.1 Manage user and group accounts and related system files →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "107.1 Manage user and group accounts and related system files",
    "url": "https://linux1st.com./1071-manage-user-and-group-accounts-and-related-system-files.html",
    "extracted_title": "",
    "content": "Weight: 5\nCandidates should be able to add, remove, suspend and change user accounts.\nKey Knowledge Areas\nAdd, modify and remove users and groups.\nManage user/group info in password/group databases.\nCreate and manage special purpose and limited accounts.\nTerms and Utilities\n/etc/passwd\n/etc/shadow\n/etc/group\n/etc/skel/\nchage\ngetent\ngroupadd\ngroupdel\ngroupmod\npasswd\nuseradd\nuserdel\nusermod\nPasswords\nChanging Passwords\nEach user can change her password using the\npasswd\ncommand:\n$ passwd\nChanging password for jadi.\n(current) UNIX password:\nNew password:\nRetype new password:\npasswd: password updated successfully\nIf the password is too short or too similar to the previous one or even a dictionary word, or equal to the username and such, the\npasswd\ncommand may refuse to change it. Also note that the\npasswd\ncommands asks for the\ncurrent password\nfirst to make sure that it is being changed by yourself.\nThe root user can change any users password to anything (weak passwords) without providing their current password:\n# passwd jadi\nNew password:\nBAD PASSWORD: it does not contain enough DIFFERENT characters\nBAD PASSWORD: is too simple\nRetype new password:\npasswd: password updated successfully\nUsers and groups\nLinux is a multi-user system and managing these users is part of system admin's job. As the first step, you should be able to\nadd\n,\nremove\nand\nmodify\nusers.\nLinux also has the concept of\ngroups\n. You can define groups, give privileges to them and add users to these groups. As you've already seen in the\nchmod\ncommand, you might give access the permission to read from\n/dev/cdrom\nto a group called\ncdrom\nand then add whoever needs to read from the CD-ROM to this group.\nPlease note that each user can be a member of many groups but only one of these will be her\nPrimary\ngroup. In contrast, each file can be owned only by one group.\nManaging Users\nAdding users\nTo add a new user to your system, use the\nuseradd\ncommand. These are the main switches:\nswitch\nmeaning\n-d\nhome directory (-d /home/user)\n-m\ncreate home directory\n-s\nspecify shell\n-G\nadd to additional groups\n-c\ncomment. most of the time, users actual name. Use quotes if comments has spaces or special characters in them\nOn some systems\nuseradd\ncreates the home directory and on some, you have to specify the\n-m\nswitch yourself. It is a good practice to use it all the time.\nWhen a new user directory is being created, the system will copy the contents of\n/etc/skel\nto their home dir.\n/etc/skel\nis used as a template for the home of users.\nAnother command to add users is\nadduser\n. It will ask for the password, home directory, etc.. and will create the user.\nModifying users\nTo modify a user, you should use the\nusermod\ncommand. It supports most of the\nuseradd\nswitches. For example you can change\njadi\n's login shell by issuing\nusermod -s /bin/csh jadi\n. But there are 3 more switches too:\nswitch\nmeaning\n-L\nlock this account\n-U\nUnlock the account\n-aG\nappend to more groups (say\nusermod -aG wheel jadi\n)\nNote: If you do\nusermod -G wheel,users jadi\n, jadi will be the member of these two groups ONLY. That is why we use\n-aG newgoup\nto\nappend to groups\nto add this group to jadi's groups.\n-G\nis like saying \"jadi's groups are ...\" and\n-aG\nis like \"add jadi to these groups too\".\nDeleting users\nIf you want to remove a user, use\nuserdel\n. Straight forward:\nuserdel jadi\nIf you add the\n-r\nswitch, the home directory and mail spool will be erased too!\nManaging Groups\nIt is kind of same as users, you can do\ngroupadd\n,\ngroupdel\nand\ngroupmod\n. Each group has an\nid\nand a\nname\n.\n# groupadd -g 1200 newgroup\nadds a group called\nnewgroup\nwith id 1200. If needed, the root user can change a groups ID (to 2000) by issuing\ngroupmod -g 2000 newgroup\nor deleting the group by\ngroupdel newgroup\n.\nObviously if root deletes a group with members, people wont be deleted! They will just wont be the members of that group anymore.\nIn most systems, the user id or group id's of the users and groups created by the admin will have the id of 1000, 1001, 1002, ...\nFiles related to users and groups\n/etc/passwd\nThis file contains all the user information on your system:\ntail /etc/passwd\nscard:x:491:489:Smart Card Reader:/var/run/pcscd:/usr/sbin/nologin\nsshd:x:493:491:SSH daemon:/var/lib/sshd:/bin/false\nstatd:x:488:65534:NFS statd daemon:/var/lib/nfs:/sbin/nologin\ntftp:x:496:493:TFTP account:/srv/tftpboot:/bin/false\nlightdm:x:10:14:Light Display Manager:/var/lib/lightdm:/bin/false\nwwwrun:x:30:8:WWW daemon apache:/var/lib/wwwrun:/bin/false\njadi:x:1000:100:jadi:/home/jadi:/bin/bash\nsvn:x:485:482:user for Apache Subversion svnserve:/srv/svn:/sbin/nologin\nprivoxy:x:484:480:Daemon user for privoxy:/var/lib/privoxy:/bin/false\nAs you can see the format is:\nusername:x:userid:primary group id:Name and comments:home dir:shell\nAs you can see, the 2nd field is shown as \"\nx\n\" here. In the old days the password or the hashed password of the user was shown in this file but nowadays that is moved to the\n/etc/shadow\nfile.\nNote: /etc/passwd should be readable to all users and this makes it a very bad place to keep users password! Thats why we see a\nx\ninstead of the password, this indicates that the main passwords should be looked up from\n/etc/shadow\nfile.\nNote how\nspecial users\nlike\nlightdm\nhave\n/bin/false\nas their shell; this prevents them from logging into the system for real. In old days hackers used to try these accounts to login.\n/etc/shadow\nThis file contains password (hashed passwords) of the users. See how the\n/etc/passwd\nis readable for all but\n/etc/shadow\nis only readable for root and members of the\nshadow\ngroup:\n# ls -ltrh /etc/passwd /etc/shadow\n-rw-r--r-- 1 root root   1.9K Oct 28 15:47 /etc/passwd\n-rw-r----- 1 root shadow  851 Oct 29 19:06 /etc/shadow\nBut what is in it?\n# tail /etc/shadow\nscard:!:16369::::::\nsshd:!:16369::::::\nstatd:!:16369::::::\ntftp:!:16369::::::\nuucp:*:16369::::::\nlightdm:*:16369::::::\njadi:$6$enk5I3bv$uSQrRpen7m9xDapYLgwgh3P/71OLZUgj31n8AwzgIM2lA5Hc/BmRVAMC0eswdBGkseuXSvmaz0lsYFtduvuqUo:16737:0:99999:7:::\nsvn:!:16736::::::\nprivoxy:!:19473::::::\nWow! Jadi has an encrypted password there. Some numbers are following that encrypted password too:\n16737:0:99999:7:::\n. What do the mean? The following table tells you.\nfiled\nmeaning\n19473\nWhen was the last time this password changes\n0\nUser wont be able to change the password 0 days after each change\n99999\nAfter this many days, the user HAVE to change his password\n7\n...and the user will be informed 7 days before the expiration to change his password\nNote: there numbers are \"days after 1st of January 1970\" or the Epoch time in days. For example 16737 means 16737 days after 1st Jan 1970. Strange but practical!\nBut we do not need to change these strange number manually. If needed, we can use the\nchage\ntool to change these numbers. If you issue the\nchage jadi\nthe system will prompt you for all the parameters one by one. Also it is possible to use switches to change specific parameters on command line.\nswitch\nmeaning\n-l\nlist information\n-E\nSet the expiration date. Date can be a number, in YYYY-MM-DD format or -1 which will mean\nnever\n# chage -l jadi\nLast password change                    : Apr 26, 2023\nPassword expires                    : never\nPassword inactive                    : never\nAccount expires                        : never\nMinimum number of days between password change        : 0\nMaximum number of days between password change        : 99999\nNumber of days of warning before password expires    : 7\nNote:\n!\nmeans the account is locked and the user can not login into the system using the account. On some systems (like RedHat) you may also see\n!!\nwhich means the account has never been used.\n/etc/group\nThis file contains the groups and their IDs.\n# tail /etc/group\navahi:x:486:\nkdm:!:485:\nmysql:x:484:\nwinbind:x:483:\nat:x:25:\nsvn:x:482:\nvboxusers:x:481:\ninput:x:1000:jadi,joe\nprivoxy:x:480:\nNote: See that\nx\nthere? Theoretically groups can have passwords but it is never used in any distro! The file is\n/etc/gshadow\nchecking user info\nPreviously you saw the\nchage -l jadi\nbut there are more commands for checking user status. One is\nid\n:\n# id jadi\nuid=1000(jadi) gid=100(users) groups=1000(input),100(users)\nAnother solution is\ngetent\n(for\nget entry\n). It can query important\ndatabases\nfor specific entries. These databases include\n/etc/passwd\n,\n/etc/hosts\n,\n/etc/shadow\n,\n/etc/group\n, ...\nfunlife:~ # getent group tor\ntor:x:479:\nfunlife:~ # getent passwd jadi\njadi:x:1000:100:jadi:/home/jadi:/bin/bash\nfunlife:~ # getent shadow jadi\njadi:$6$enk5I3bv$uSQrRpen7m9xDapYLgwgh3P/71OLZUgj31n8AwzgIM2lA5Hc/BmRVAMC0eswdBGkseuXSvmaz0lsYFtduvuqUo:16737:0:99999:7:::\n← 106.3 Accessibility\nChapter List\n107.2 Automate system administration tasks by scheduling jobs →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "107.2 Automate system administration tasks by scheduling jobs",
    "url": "https://linux1st.com./1072-automate-system-administration-tasks-by-scheduling-jobs.html",
    "extracted_title": "",
    "content": "Weight: 4\nCandidates should be able to use cron and systemd timers to run jobs at regular intervals and to use at to run jobs at a specific time.\nKey Knowledge Areas\nManage cron and at jobs.\nConfigure user access to cron and at services.\nUnderstand systemd timer units.\nTerms and Utilities\n/etc/cron.{d,daily,hourly,monthly,weekly}/\n/etc/at.deny\n/etc/at.allow\n/etc/crontab\n/etc/cron.allow\n/etc/cron.deny\n/var/spool/cron/\ncrontab\nat\natq\natrm\nsystemctl\nsystemd-run\nThere are many cases where we need to run some commands at specific times or intervals. For example you may want to run your backup process every morning at 03:00 or refresh the list of files on your web index on hourly basis.\nThere are different methods to do so in the Linux world. The most commons are the\ncrontab\nto run tasks on specific intervals,\nat\nto run a commands on specific time and also utilities provided by\nsystemd\n.\nCrontab format\nCrontab works with a configuration file which tells it when to run a command. For example you can say \"run my commands when the hour is 03 and the minute is 00\" or \"run my command when its Saturday and Hour is 10 and minute is 00\" or \"Run whenever the minute is 00\".\nEach crontab configuration line has 6 fields. The first 5 specify a specific interval and whatever after than is used as the \"command\".\nA    B    C    D    E    command and arguments\nfiled\nMeaning\nvalues\nA\nminute\n0-59\nB\nhour\n0-23\nC\nday of month\n1-31\nD\nmonth\n1-12 (or names, see below)\nE\nday of week\n0-7 (0 or 7 is Sunday, or use names)\nIf you replace a field with\n*\nit means \"whatever\" or \"all\" or \"any\". Also if you have\n@reboot\nor\n@daily\ninstead of time fields, the command will be run once after the reboot or daily. Lets see some examples:\n5 0 * * *       $HOME/bin/daily.job >> $HOME/tmp/out 2>&1\n# run at 2:15pm on the first of every month -- output mailed to paul\n15 14 1 * *     $HOME/bin/monthly\n# run at 10 pm on weekdays, annoy Joe\n0 22 * * 1-5    mail -s \"It's 10pm\" joe%Joe,%%Where are your kids?%\n23 0-23/2 * * * echo \"run 23 minutes after midn, 2am, 4am ..., everyday\"\n5 4 * * sun     echo \"run at 5 after 4 every sunday\"\n*/5 * * * *    echo \"each 5 mintues\"\n42 8,18 * * 1-5    echo \"8:42 and 18:42 and only on weekdays (monday till friday)\"\n@reboot        echo \"runs after the reboot\"\nAs you can see in above examples,\n/\ncan be used to slice the time (so\n*/5\nin minutes means every five minutes) or use the\n,\nto indicate more than one number (so\n8,18\nmeans 8 and 18).\nWhen using\n*\non the first filed, you are running your command on every minute.\nSomething like\n42 8 1 1 0\nruns ONLY when the 1st of Jan is a Sunday!\nWhen a cron runs, the output will be emailed to the owner of the cron.\nuser specific crons\nCron is a linux service. To see your crons you can use\ncrontab -l\n(list) and for editing them you can use\ncrontab -e\n(edit) which will open the cron files with a special editor and will validate and then load your crons after you are finished.\nThe files will be saved at\n/var/spool/cron/tabs/\nor\n/var/spool/crontabs\n:\n# cat /var/spool/cron/tabs/jadi\n# DO NOT EDIT THIS FILE - edit the master and reinstall.\n# (/tmp/crontab.khObLu installed on Thu Oct 29 22:04:43 2023)\n# (Cronie version 4.2)\n# Example of job definition:\n# .---------------- minute (0 - 59)\n# |  .------------- hour (0 - 23)\n# |  |  .---------- day of month (1 - 31)\n# |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...\n# |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat\n# |  |  |  |  |\n# *  *  *  *  * command to be executed\n* * * * * date >> /tmp/date.cron.txt\nnever edit these files directly; Use\ncrontab -e\ninstead.\nsystem wide cron\nThere is file called\n/etc/crontab\n. This looks like a normal user file opened with\ncrontab -e\nbut has one extra filed:\nA    B    C    D    E    USER    command and arguments\nThis file should be edited with an editor directly and we can mention which user runs this commands.\n# cat /etc/crontab\nSHELL=/bin/sh\nPATH=/usr/bin:/usr/sbin:/sbin:/bin:/usr/lib/news/bin\nMAILTO=root\n#\n# check scripts in cron.hourly, cron.daily, cron.weekly, and cron.monthly\n#\n-*/15 * * * *   root  test -x /usr/lib/cron/run-crons && /usr/lib/cron/run-crons >/dev/null 2>&1\nNote: Have a look at the first three lines. It configures the shell which will run the commands and the PATH variable plus who will get the output emails.\nAs you can see this default crontab runs other crons! These are hourly, daily, weekly and monthly crons. Lets have a look at them in the next section.\nSystem hourly, daliy, weekly, monthly, .. crons\nWe have some system level crontab files in\n/etc/cron.d/\ntoo. They look like general crontab files. For example this is one that\nmunin\nprogram creates:\n$\ncat\n/etc/cron.d/munin\n#\n# cron-jobs for munin\n#\nMAILTO\n=\nroot\n*/5\n*\n*\n*\n*\nmunin\nif\n[\n-x\n/usr/bin/munin-cron\n]\n;\nthen\n/usr/bin/munin-cron\n;\nfi\n14\n10\n*\n*\n*\nmunin\nif\n[\n-x\n/usr/share/munin/munin-limits\n]\n;\nthen\n/usr/share/munin/munin-limits\n--force\n--contact\nnagios\n--contact\nold-nagios\n;\nfi\n19\n:12:37\njadi@ocean:~$\ncat\n/etc/cron.weekly/man-db\nBut there are also directories called\ncron.hourly\n,\ncron.daily\n,\ncron.weekly\n&\ncron.monthly\n. As their name indicates, whatever script / file you put in them, will be run hourly, daily, weekly & monthly. This makes general cleanup, backup, ... tasks much cleaner. Its enough to copy your script in any of these directories and let them run on these intervals.\n$\nsudo\ntree\n/etc/cron*\n/etc/cron.d\n├──\nmunin\n├──\nmunin-node\n├──\nphp5\n└──\nsendmail\n/etc/cron.daily\n├──\napache2\n├──\napport\n├──\napt\n├──\naptitude\n├──\nbsdmainutils\n├──\ndpkg\n├──\nlogrotate\n├──\nman-db\n├──\nmlocate\n├──\npasswd\n├──\npopularity-contest\n├──\nsendmail\n├──\nupdate-notifier-common\n└──\nupstart\n/etc/cron.hourly\n/etc/cron.monthly\n/etc/crontab\n[\nerror\nopening\ndir\n]\n/etc/cron.weekly\n├──\napt-xapian-index\n├──\nfstrim\n├──\nman-db\n└──\nupdate-notifier-common\nLets have a look at one of the cron.d files:\n$\ncat\n/etc/cron.daily/mlocate\n#! /bin/bash\nset\n-e\n[\n-x\n/usr/bin/updatedb.mlocate\n]\n||\nexit\n0\nif\nwhich\non_ac_power\n>/dev/null\n2\n>\n&\n1\n;\nthen\nON_BATTERY\n=\n0\non_ac_power\n>/dev/null\n2\n>\n&\n1\n||\nON_BATTERY\n=\n$?\nif\n[\n\"\n$ON_BATTERY\n\"\n-eq\n1\n]\n;\nthen\nexit\n0\nfi\nfi\n# See ionice(1)\nif\n[\n-x\n/usr/bin/ionice\n]\n&&\n/usr/bin/ionice\n-c3\ntrue\n2\n>/dev/null\n;\nthen\nIONICE\n=\n\"/usr/bin/ionice -c3\"\nfi\nflock\n--nonblock\n/run/mlocate.daily.lock\n$IONICE\n/usr/bin/updatedb.mlocate\nat\nWe say that crontab runs commands on specific intervals but what will happen if you needed to run a command only once? Here\nat\nis your friend.\n$ at now + 1 min\nwarning: commands will be executed using /bin/sh\nat> touch /tmp/at\nat> <EOT>\njob 3 at Thu Oct 29 22:12:00 2015\nNote: As always, at the end of input we press Ctrl+D\nIf you want to check what is in the queue you can use\natq\nand then try\natrm 4\nto delete job number 4;\n$ at teatime\nwarning: commands will be executed using /bin/sh\nat> echo \"tea time is 4pm\"\nat> <EOT>\njob 4 at Fri Oct 30 16:00:00 2015\njadi@funlife:~$ at tomorrow\nwarning: commands will be executed using /bin/sh\nat> echo \"tomorrow this time\"\nat> <EOT>\njob 5 at Fri Oct 30 22:15:00 2015\njadi@funlife:~$ at 17:30\nwarning: commands will be executed using /bin/sh\nat> echo \"this is the first 17:30\"\nat> <EOT>\njob 6 at Fri Oct 30 17:30:00 2015\njadi@funlife:~$ atq\n5    Fri Oct 30 22:15:00 2015 a jadi\n4    Fri Oct 30 16:00:00 2015 a jadi\n6    Fri Oct 30 17:30:00 2015 a jadi\njadi@funlife:~$ atrm 4\njadi@funlife:~$ atq\n5    Fri Oct 30 22:15:00 2015 a jadi\n6    Fri Oct 30 17:30:00 2015 a jadi\nmanaging cron access\nTo control the access to the cron system, we have 4 files:\n/etc/cron.allow\n/etc/cron.deny\n/etc/at.allow\n/etc/at.deny\nIn most systems none of these files exist but if you create them, they will become active as follow:\nfile extension\nfunctionality\n.allow\nONLY users mentioned in this file are allowed to run this service. All other users will be denied\n.deny\nEverybody can use the service except the users mentioned in this file\nsystemd & systemd-run\nNowadays most GNU/Linux distributions use\nsystemd\nwhich has its own\ntimers\nas an alternative to cron to schedule your tasks. Timer unit files use the\n.timer\nsuffix, and for each of these there must be a corresponding unit file which describes the unit to be activated when the timer activates. By default, a timer activates a service with the same name, except for the suffix.\nTimers have a [Timer] section that specifies when scheduled jobs should run. There are two types of timers. One is the\nreadl-time timer\nwhich works with\nOnCalendar=\noption and defines kind of close to cron timers (based on calendar event expressions). This is the syntax:\nOnCalendar=DayOfWeek Year-Month-Day Hour:Minute:Second\nDayOfWeek is optional and you can use a 3 letter abbreviation (say Mon)\nThe\n*\n,\n/\nand\n,\nwork the same in systemd and cron configurations but in systemd you can also use\n..\nbetween two values to indicate a contiguous range.\nFor example, to run the service named\n/etc/systemd/system/myservice.service\nat 02:42 on the first Saturday of each month, this config line should be added to the\n/etc/systemd/system/myservice.timer\nunit file.\n[Unit]\nDescription\n=\nRun the blah blah service\n[Timer]\nOnCalendar\n=\nSat *-*-1..7 02:42:00\nPersistent\n=\ntrue\n[Install]\nWantedBy\n=\ntimers.target\nIt is also possible to define\nmonotonic\ntimers. They activate after some time has elapsed from a specific start point (say when the machine was booted up or when the timer itself is activated). You can chose between any of the following:\nconfig\nmeaning\nOnActiveSec\ntime after unit activation\nOnBootSec\ntime after system boot\nOnStartupSec\ntime after the service manager is started. For system services, this is almost equal to OnActiveSec. Use this for user services where the service manager is started at user login.\nOnUnitActiveSec\ntime after the corresponding service was last activated\nOnUnitInactiveSec\ntime after the  corresponding service was last deactivated\nAnd you can use any of usec, msec, seconds, minutes, hours, days, weeks, months, years in front. So for example the\n[Timer]\nOnUnitActiveSec\n=\n5minutes 20seconds\nwill activate the corresponding unit 5min and 20secs after the last activation of this unit service.\nPlease note that after adding any timer, you need to enable (and probably start) it:\n# systemctl enable myservice.timer\n# systemctl start myservice.timer\nAnd also do not forget to do a\nsystemctl daemon-reload\nafter each change.\nTo check all the scheduled jobs, run the\nsystemctl list-timers\ncommand. This will show you all the active timers. Use the\n--all\nswitch to check all.\nThere are few shortcuts for times too. You can use these instead of the cron format to set timers:\nshortcut\nwhen it runs\nhourly\nbeginning of each hour\ndaily\nOne a day at midnight\nweekly\nmidnight on Monday\nmonthly\nmidnight on the 1st of each month\nyearly\nmidnight on the 1st of Jan\nThis is one example from a recent Fedora installation:\n# cat system/timers.target.wants/plocate-updatedb.timer\n[Unit]\nDescription\n=\nUpdate the plocate database daily\n[Timer]\nOnCalendar\n=\ndaily\nRandomizedDelaySec\n=\n12h\nAccuracySec\n=\n20min\nPersistent\n=\ntrue\n[Install]\nWantedBy\n=\ntimers.target\nIf you want to check the output of your timers, you can use the\njournalctl\n.\nas any other\nsystemd\nactivity, use the\n--user\nswitch to use it on your user level and not systemwide.\nAt the end, you should know about the\nsystemd-run\ncommand. It can start a transient service or scope and run specific commands in it.\nSo a command like:\nsystemd-run --on-active=\"2hours\" --unit=\"helloworld.service\"\nWill run the helloworld.service every 2 hours or this:\nsudo systemd-run --on-active=\"2hours\" /usr/local/bin/helloworld.sh --language=en_US\nwill run that specific script with shown parameters every 2 hours.\nSince this is new and there are not much sources about it, refer to\nSuse docs\nto learn more.\n← 107.1 Manage user and group accounts and related system files\nChapter List\n107.3 Localisation and internationalisation →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "107.3 Localisation and internationalisation",
    "url": "https://linux1st.com./1073-localisation-and-internationalisation.html",
    "extracted_title": "",
    "content": "Weight: 3\nCandidates should be able to localise a system in a different language than English. As well, an understanding of why\nLANG=C\nis useful when scripting.\nKey Knowledge Areas\nConfigure locale settings and environment variables.\nConfigure timezone settings and environment variables.\nTerms and Utilities\n/etc/timezone\n/etc/localtime\n/usr/share/zoneinfo/\nLC_*\nLC_ALL\nLANG\nTZ\n/usr/bin/locale\ntzselect\ntimedatectl\ndate\niconv\nUTF-8\nISO-8859\nASCII\nUnicode\ntimezone\nThe earth is large and round so we have different\ntimezones\nand different\nlanguages\n! There are even talks about a time zone for Mars and if we encounter aliens, they might also have their own languages.\nThis makes a few problems:\n1. we may prefer our local language for our Linux\n2. we need to tell linux about our timezone\n3. programs may ask linux about our preferences on languages, keyboard configuration, and ..\n4. and even if you do not case about yourself, your machines needs your timezone to be able to run tasks on needed times\nIn this section I will show you the answers Linux has to overcome these issues. But lets start simple.\nOn linux systems you can use\ndate\nand\ncal\ncommands to check the date and the calendar. It is possible to print a custom date using\n+\nformatter:\n[\njadi@fedora ~\n]\n$\ndate\nFri\nJun\n2\n02\n:\n07\n:\n35\nPM\nEDT\n2023\n[\njadi@fedora ~\n]\n$\ndate\n+\n'%Y%m%d-%M'\n20230602\n-\n08\n[\njadi@fedora ~\n]\n$\ndate\n+\n'%Y%m%d-%H%M'\n20230602\n-\n1408\nto get more info you can try\ntimedatectl\n:\n[\nroot@fedora ~\n]\n#\ntimedatectl\nLocal\ntime\n:\nFri\n2023\n-\n06\n-\n02\n14\n:\n23\n:\n34\nEDT\nUniversal\ntime\n:\nFri\n2023\n-\n06\n-\n02\n18\n:\n23\n:\n34\nUTC\nRTC\ntime\n:\nSat\n2023\n-\n06\n-\n03\n02\n:\n37\n:\n51\nTime\nzone\n:\nAmerica\n/\nNew_York\n(\nEDT\n,\n-\n0400\n)\nSystem\nclock\nsynchronized\n:\nno\nNTP\nservice\n:\nactive\nRTC\nin\nlocal\nTZ\n:\nno\nTimezone determines what is your time difference comparing with a reference timezone. This way you can talk about times regardless of your location. In another words, I can tell you \"start the change request at 02:30 UTC\" and we both know when the change will be started in our own timezone (mine will be 1 hour ahead so I'll start at 3:30 my time).\nMost distributions will ask you about your time zone during the installation. You can change this later, either by a GUI in the system settings or using a text based user interface (TUI) like the older\ntzconfig\nor a newer\ntzselect\n.\n[\njadi\n@\nfedora\n~\n]\n$\ntzselect\nPlease\nidentify\na\nlocation\nso\nthat\ntime\nzone\nrules\ncan\nbe\nset\ncorrectly\n.\nPlease\nselect\na\ncontinent\n,\nocean\n,\n\"coord\"\n,\nor\n\"TZ\"\n.\n1\n)\nAfrica\n7\n)\nEurope\n2\n)\nAmericas\n8\n)\nIndian\nOcean\n3\n)\nAntarctica\n9\n)\nPacific\nOcean\n4\n)\nAsia\n10\n)\ncoord\n-\nI\nwant\nto\nuse\ngeographical\ncoordinates\n.\n5\n)\nAtlantic\nOcean\n11\n)\nTZ\n-\nI\nwant\nto\nspecify\nthe\ntimezone\nusing\nthe\nPosix\nTZ\nformat\n.\n6\n)\nAustralia\n#? 5\nPlease\nselect\na\ncountry\nwhose\nclocks\nagree\nwith\nyours\n.\n1\n)\nBermuda\n4\n)\nFaroe\nIslands\n7\n)\nSpain\n2\n)\nCape\nVerde\n5\n)\nPortugal\n3\n)\nFalkland\nIslands\n6\n)\nSouth\nGeorgia\n&\nthe\nSouth\nSandwich\nIslands\n#? 1\nThe\nfollowing\ninformation\nhas\nbeen\ngiven\n:\nBermuda\nTherefore\nTZ\n=\n'Atlantic/Bermuda'\nwill\nbe\nused\n.\nSelected\ntime\nis\nnow\n:\nFri\nJun\n2\n15\n:\n15\n:\n06\nADT\n2023.\nUniversal\nTime\nis\nnow\n:\nFri\nJun\n2\n18\n:\n15\n:\n06\nUTC\n2023.\nIs\nthe\nabove\ninformation\nOK\n?\n1\n)\nYes\n2\n)\nNo\n#? 1\nYou\ncan\nmake\nthis\nchange\npermanent\nfor\nyourself\nby\nappending\nthe\nline\nTZ\n=\n'Atlantic/Bermuda'\n;\nexport\nTZ\nto\nthe\nfile\n'.profile'\nin\nyour\nhome\ndirectory\n;\nthen\nlog\nout\nand\nlog\nin\nagain\n.\nHere\nis\nthat\nTZ\nvalue\nagain\n,\nthis\ntime\non\nstandard\noutput\nso\nthat\nyou\ncan\nuse\nthe\n/\nusr\n/\nbin\n/\ntzselect\ncommand\nin\nshell\nscripts\n:\nAtlantic\n/\nBermuda\nWhen finished this program will suggest you to set a variable called\nTZ\nas follow to set\nyour own\ntime zone, but not the systems:\nTZ='Atlantic/Bermuda'; export TZ\nor use it once to check time in a specific city:\n$\nenv\nTZ\n=\n'Asia/Tokyo'\ndate\nSat\nJun\n3\n03\n:25:40\nAM\nJST\n2023\nConfiguring timezone\nThe\n/usr/share/zoneinfo/\ndirectory contains all the timezone info. These are binary files. If you need to change your system-wide timezone you need to short link the\n/etc/localtime\nto one of these files:\n# ls -ltrh /etc/localtime\nlrwxrwxrwx\n.\n1\nroot\nroot\n38\nApr\n26\n09\n:\n41\n/\netc\n/\nlocaltime\n->\n..\n/\nusr\n/\nshare\n/\nzoneinfo\n/\nAmerica\n/\nNew_York\nThis file should be replaced by the correct file from\n/usr/share/zoneinfo/\n. It is nicer to make a symbolic link rather than copying the actual file. This will prevent the issues during next upgrades.\nConfiguring Languages\nTo check the status of current selected system language, use the\nlocale\ncommand:\n[\nroot@fedora ~\n]\n#\nlocale\nLANG\n=\nen_US\n.\nUTF\n-\n8\nLC_CTYPE\n=\n\"en_US.UTF-8\"\nLC_NUMERIC\n=\n\"en_US.UTF-8\"\nLC_TIME\n=\n\"en_US.UTF-8\"\nLC_COLLATE\n=\n\"en_US.UTF-8\"\nLC_MONETARY\n=\n\"en_US.UTF-8\"\nLC_MESSAGES\n=\n\"en_US.UTF-8\"\nLC_PAPER\n=\n\"en_US.UTF-8\"\nLC_NAME\n=\n\"en_US.UTF-8\"\nLC_ADDRESS\n=\n\"en_US.UTF-8\"\nLC_TELEPHONE\n=\n\"en_US.UTF-8\"\nLC_MEASUREMENT\n=\n\"en_US.UTF-8\"\nLC_IDENTIFICATION\n=\n\"en_US.UTF-8\"\nLC_ALL\n=\nThese are environment variables telling system what languages to use. Here I'm using\nLANG=en_US.UTF-8\nwhich means I'm using English with US variant and UTF-8 encoding.\nUTF-8 and other encodings will be discussed a bit later in this chapter\nOther variables you see above, tell the system how to show different things based on localisation systems. For example if we change the\nLC_TIME\nto\n\"en\\_GB.UTF-8\"\nthe time will be printed in Great Britain format.\nAnother important settings is\nLC_ALL\n. It can be used to change\nALL\nsettings. If you do a\nexport LC_ALL=fa_IR.UTF-8\n, all the settings will be set to that one, with no exception. It is always possible to\nunset LC_ALL\n.\nLANG=C\nThe\nLANG=C\nsettings is used in many programs and scripts to make sure that the system will create coherent and predictable results in all environments. For example to make sure that the sort order will be in Binary order and all language settings will be default (en.US).\nchanging or adding locales\nThis is not a part of LPIC exam but it is good to know that on a debian based machine, you can change, add or set your default\nlocales\nusing\ndpkg-reconfigure locales\n.\nThere is also this file:\n[\nroot@fedora ~\n]\n#\ncat\n/\netc\n/\nlocale\n.\nconf\nLANG\n=\n\"en_US.UTF-8\"\nand you can also add your desired\nLANG\nconfig to your\n~/.bash_profile\nor\n~/.profile\n.\non\nsystemd\nuse\nlocalectl\nto check locale or use\nlocalectl set-locale LANG=en_US.UTF-8\nto set it.\nCharacter Encoding\nACSII\nComputers used to work with 7bit characters encoding. That would give us 128 characters which was enough for numbers, punctuation and digits!\nISO-8859\nIt had more characters and a lots of sets for Thai, Arabic and other languages but still had ASCII character sets.\nUTF-8\nThe\nUnicode Transformation Format\nis the newest encoding method. It is a real universal encoding with characters not only for all written languages but also for fun characters like ¾, ♠, π and ⚤. It is backward compatible with the ASCII and uses 8 bit code units (\nnot 8 bit coding!\n). In most cases it is a good idea to use UTF-8 and be sure that your system will work in practically all cases.\niconv\nIf you needed to convert coding to each other, the command is\niconv\n. The\n-l\nswitch will show you all the available codings:\niconv -f WINDOWS-1258 -t UTF-8 /tmp/myfile.txt\nNote: -f is for \"from\" and -t is for \"to\". Easy to remember\nIn 2023 you will seldom need this command but it is a must to know it, specially if you are living in a non US country!\n← 107.2 Automate system administration tasks by scheduling jobs\nChapter List\n108.1 Maintain system time →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "108.1 Maintain system time",
    "url": "https://linux1st.com./1081-maintain-system-time.html",
    "extracted_title": "",
    "content": "Weight: 3\nCandidates should be able to properly maintain the system time and synchronize the clock via NTP.\nKey Knowledge Areas\nSet the system date and time.\nSet the hardware clock to the correct time in UTC.\nConfigure the correct timezone.\nBasic NTP configuration using\nntpd\nand\nchrony\n.\nKnowledge of using the\npool.ntp.org\nservice.\nAwareness of the\nntpq\ncommand.\nTerms and Utilities\n/usr/share/zoneinfo/\n/etc/timezone\n/etc/localtime\n/etc/ntp.conf\n/etc/chrony.conf\ndate\nhwclock\nntpd\nntpdate\nchronyc\npool.ntp.org\nHow a computer keeps its time\nThere is a clock in your computer; a hardware clock on your motherboard! It has its own battery and keeps the time even when the computer is off. When the system boots, the OS reads this\nhardware time\nand it sets it's own\nsystem time\nbased on the hardware clock and uses this clock whenever it needs to know the time.\nHardware clock can be the set on localtime (the time shown on your clock wherever you are) or UTC time (standard time). The\nhwclock\ncan be used to show the time based on the hwtime. See how it works based on the hardware time even after we DO CHANGE the system time:\n$\ndate\nFri\nJun\n23\n01\n:47:22\nPM\n+0330\n2023\n$\nsudo\ndate\n-s\n\"Jan 22 22:22:22 2022\"\nSat\nJan\n22\n10\n:22:22\nPM\n+0330\n2022\n$\ndate\nSat\nJan\n22\n10\n:22:29\nPM\n+0330\n2022\n$\nsudo\nhwclock\n2023\n-06-23\n13\n:47:41.160122+03:30\nEven when the hardware clock is set on UTC,\nhwclock\ndate shows the date in the localtime (time after adding the timezone to the UTC time)\nOlder OSs used to set the hardware clock on localtime zone instead of timezone. This can be achieved by:\n# hwclock --localtime --set --date=\"01/05/2023 22:04:00\"\nThe previous commands sets the hardware clock on that specific date and tell it that this is the localtime. If you want to change back to UTC time, issue:\n# hwclock -u -w\nHere,\n-w\ntells the\nhwclock\nto set the hardware time based on the current system time and\n-u\ntells the hwclock that we are using the UTC. This also sets the HWClock using UTC int he\n\\etc\\adjtime\nfile.\nIf you set a time on the hardware clock without mentioning it being UTC / Local, the\n/etc/adjtime\nwill decide this, if this file does not exists, the UTC will be used.\nYou already know about the\ntimedatectl\nand\ndate\nfrom the\nLocalization and globalization chapter\nso I wont repeat them here.\nTime Zones\nWe have seen time zones in previous chapters. But in short, there are two important files here.\nThe\n/etc/timezone\nis a text file, representing your timezone. This is used if a program wants to know about your time zone of show it. For example:\n$\ncat\n/etc/timezone\nAsia/Tehran\nBut the\n/etc/localtime\nis a binary file describing your timezone info to the system (for example the\ndate\nfile):\n$\nls\n-l\n/etc/localtime\nlrwxrwxrwx\n1\nroot\nroot\n31\nJun\n22\n11\n:19\n/etc/localtime\n->\n/usr/share/zoneinfo/Asia/Tehran\n$\nfile\n/usr/share/zoneinfo/Asia/Tehran\n/usr/share/zoneinfo/Asia/Tehran:\ntimezone\ndata,\nversion\n2\n,\nno\ngmt\ntime\nflags,\nno\nstd\ntime\nflags,\nno\nleap\nseconds,\n72\ntransition\ntimes,\n8\nabbreviation\nchars\nIn many cases, this is a soft link to a file located at\n/usr/share/zoneinfo/\nso it will be updated in case of system update.\nNTP\nNetwork Time Protocol\nis my personal favorite protocol. It is one of the coolest protocols ever if you dive into its details. But unfortunately for LPIC1 you do not need to dive into NTP depths. This protocol uses NTP servers to find out the accurate time shown by best atomic clocks on this planet. One of the most famous severs used by ntp people is\npool.ntp.org\n. If you check that website you will see that it is a\npool\nof ntp servers and by giving your NTP server the\npool.ntp.org\n, it will be redirected to one of the many ntp servers available on that pool.\nntpdate\nThe most straight forward command to set the systemclock is\nntpdate\nand used like this:\n$\nsudo\nntpdate\npool.ntp.org\n23\nJun\n14\n:49:55\nntpdate\n[\n160138\n]\n:\nadjust\ntime\nserver\n31\n.214.170.254\noffset\n+0.020196\nsec\nAfter this, we need to set the hwclock to the recently synced system time using\nsudo hwclock -w\n.\nntpd\nInstead of manually setting the time each time, you can use a linux service called\nntp\nto keep your time using some time servers (the most famous one is pool.ntp.org). Install the\nntp\nand start the server:\nIn Debian/Ubuntu:\n# apt install ntp\n# systemctl start ntp\nFun fact? you can not use both! Look at this:\nroot@funlife:~# ntpdate pool.ntp.org\n23 Jun 14:49:55 ntpdate[18670]: the NTP socket is in use, exiting\nAs you can see, now the\nntp\nis using the NTP port and\nntpdate\nhas problems starting up.\nMain configuration file of\nntp\nis located at\n/etc/ntp.conf\n:\n# cat /etc/ntp.conf\n# /etc/ntp.conf, configuration for ntpd; see ntp.conf(5) for help\ndriftfile /var/lib/ntp/ntp.drift\n# Enable this if you want statistics to be logged.\n#statsdir /var/log/ntpstats/\nstatistics loopstats peerstats clockstats\nfilegen loopstats file loopstats type day enable\nfilegen peerstats file peerstats type day enable\nfilegen clockstats file clockstats type day enable\n# You do need to talk to an NTP server or two (or three).\n#server ntp.your-provider.example\n# pool.ntp.org maps to about 1000 low-stratum NTP servers.  Your server will\n# pick a different set every time it starts up.  Please consider joining the\n# pool: <http://www.pool.ntp.org/join.html>\npool 0.debian.pool.ntp.org iburst\npool 1.debian.pool.ntp.org iburst\npool 2.debian.pool.ntp.org iburst\npool 3.debian.pool.ntp.org iburst\n# Access control configuration; see /usr/share/doc/ntp-doc/html/accopt.html for\n# details.  The web page <http://support.ntp.org/bin/view/Support/AccessRestrictions>\n# might also be helpful.\n#\n# Note that \"restrict\" applies to both servers and clients, so a configuration\n# that might be intended to block requests from certain clients could also end\n# up blocking replies from your own upstream servers.\n# By default, exchange time with everybody, but don't allow configuration.\nrestrict -4 default kod notrap nomodify nopeer noquery limited\nrestrict -6 default kod notrap nomodify nopeer noquery limited\n# Local users may interrogate the ntp server more closely.\nrestrict 127.0.0.1\nrestrict ::1\n# Needed for adding pool entries\nrestrict source notrap nomodify noquery\n# Clients from this (example!) subnet have unlimited access, but only if\n# cryptographically authenticated.\n#restrict 192.168.123.0 mask 255.255.255.0 notrust\n# If you want to provide time to your local subnet, change the next line.\n# (Again, the address is an example only.)\n#broadcast 192.168.123.255\n# If you want to listen to time broadcasts on your local subnet, de-comment the\n# next lines.  Please do this only if you trust everybody on the network!\n#disable auth\n#broadcastclient\nIf needed, you can change the ntp servers to the ones you want to use.\nReview the configuration and you will see cool things like providing your ntp service to other computers although you do not need these for passing LPIC.\nntpq\nThe\nntpq\nqueries the ntp service. One famous switch is\n-p\n(for Print) that shows the pool we are using to sync the clock:\nntpq -p\nremote           refid      st t when poll reach   delay   offset  jitter\n==============================================================================\n0.debian.pool.n .POOL.          16 p    -   64    0    0.000    0.000   0.000\n1.debian.pool.n .POOL.          16 p    -   64    0    0.000    0.000   0.000\n2.debian.pool.n .POOL.          16 p    -   64    0    0.000    0.000   0.000\n3.debian.pool.n .POOL.          16 p    -   64    0    0.000    0.000   0.000\n+46.209.14.1     192.168.5.2      4 u    7   64    1   58.300  -15.546  14.519\n-ntp.tums.ac.ir  195.161.115.4    4 u    4   64    1   30.636    2.485   4.025\n*194.225.150.25  194.190.168.1    2 u    5   64    1   31.478   -3.870  95.635\n+5.160.24.41     192.168.5.2      4 u    3   64    1   90.000  -28.328  21.643\nIn this output a\n*\nmeans that the ntp is using this server as the main reference,\n+\nmeans that this is a good server and\n-\nshows an out of range server which will be neglected.\nchrony\nAnother and a newer NTP protocol implemenation is the\nchrony\n. Compared to\nntpd\n, this tool provides better results at synchronize time difficult conditions such as intermittent network connections (such as laptops) and congested networks. Chrony is the default NTP client in RedHat 8, SUSE 15 and many other distributions. Another adavn\nHere is a sample\nchrony.conf\nfile:\n$\ncat\n/etc/chrony/chrony.conf\n# Welcome to the chrony configuration file. See chrony.conf(5) for more\n# information about usable directives.\n# Include configuration files found in /etc/chrony/conf.d.\nconfdir\n/etc/chrony/conf.d\n# This will use (up to):\n# - 4 sources from ntp.ubuntu.com which some are ipv6 enabled\n# - 2 sources from 2.ubuntu.pool.ntp.org which is ipv6 enabled as well\n# - 1 source from [01].ubuntu.pool.ntp.org each (ipv4 only atm)\n# This means by default, up to 6 dual-stack and up to 2 additional IPv4-only\n# sources will be used.\n# At the same time it retains some protection against one of the entries being\n# down (compare to just using one of the lines). See (LP: #1754358) for the\n# discussion.\n#\n# About using servers from the NTP Pool Project in general see (LP: #104525).\n# Approved by Ubuntu Technical Board on 2011-02-08.\n# See http://www.pool.ntp.org/join.html for more information.\npool\nntp.ubuntu.com\niburst\nmaxsources\n4\npool\n0\n.ubuntu.pool.ntp.org\niburst\nmaxsources\n1\npool\n1\n.ubuntu.pool.ntp.org\niburst\nmaxsources\n1\npool\n2\n.ubuntu.pool.ntp.org\niburst\nmaxsources\n2\n# Use time sources from DHCP.\nsourcedir\n/run/chrony-dhcp\n# Use NTP sources found in /etc/chrony/sources.d.\nsourcedir\n/etc/chrony/sources.d\n# This directive specify the location of the file containing ID/key pairs for\n# NTP authentication.\nkeyfile\n/etc/chrony/chrony.keys\n# This directive specify the file into which chronyd will store the rate\n# information.\ndriftfile\n/var/lib/chrony/chrony.drift\n# Save NTS keys and cookies.\nntsdumpdir\n/var/lib/chrony\n# Uncomment the following line to turn logging on.\n#log tracking measurements statistics\n# Log files location.\nlogdir\n/var/log/chrony\n# Stop bad estimates upsetting machine clock.\nmaxupdateskew\n100\n.0\n# This directive enables kernel synchronization (every 11 minutes) of the\n# real-time clock. Note that it can’t be used along with the 'rtcfile' directive.\nrtcsync\n# Step the system clock instead of slewing it if the adjustment is larger than\n# one second, but only in the first three clock updates.\nmakestep\n1\n3\n# Get TAI-UTC offset and leap seconds from the system tz database.\n# This directive must be commented out when using time sources serving\n# leap-smeared time.\nleapsectz\nright/UTC\nTo control the\nchrony\nservice, there is a CLI (Command Line Interface) which is called\nchronyc\n. It it used to monitor chronyd's performance and to change various operating parameters. If a \"command\" is passed to the\nchronyc\n, the results will be shown, otherwise you will get a command to issue your commands. Have a look:\n$\nchronyc\ntracking\nReference\nID\n:\n0FED61D6\n(\nparis.time.system76.com\n)\nStratum\n:\n3\nRef\ntime\n(\nUTC\n)\n:\nFri\nJun\n23\n12\n:44:20\n2023\nSystem\ntime\n:\n0\n.001574947\nseconds\nslow\nof\nNTP\ntime\nLast\noffset\n:\n+0.000513619\nseconds\nRMS\noffset\n:\n0\n.065126784\nseconds\nFrequency\n:\n8\n.705\nppm\nslow\nResidual\nfreq\n:\n+0.278\nppm\nSkew\n:\n14\n.972\nppm\nRoot\ndelay\n:\n0\n.180896595\nseconds\nRoot\ndispersion\n:\n0\n.013603540\nseconds\nUpdate\ninterval\n:\n128\n.6\nseconds\nLeap\nstatus\n:\nNormal\n$\nchronyc\nchrony\nversion\n4\n.2\nCopyright\n(\nC\n)\n1997\n-2003,\n2007\n,\n2009\n-2021\nRichard\nP.\nCurnow\nand\nothers\nchrony\ncomes\nwith\nABSOLUTELY\nNO\nWARRANTY.\nThis\nis\nfree\nsoftware,\nand\nyou\nare\nwelcome\nto\nredistribute\nit\nunder\ncertain\nconditions.\nSee\nthe\nGNU\nGeneral\nPublic\nLicense\nversion\n2\nfor\ndetails.\nchronyc>\nactivity\n200\nOK\n12\nsources\nonline\n0\nsources\noffline\n0\nsources\ndoing\nburst\n(\nreturn\nto\nonline\n)\n0\nsources\ndoing\nburst\n(\nreturn\nto\noffline\n)\n3\nsources\nwith\nunknown\naddress\nchronyc>\nsources\nMS\nName/IP\naddress\nStratum\nPoll\nReach\nLastRx\nLast\nsample\n===============================================================================\n^?\nprod-ntp-4.ntp4.ps5.cano>\n2\n7\n375\n20\n+5039us\n[\n+5039us\n]\n+/-\n85ms\n^?\nprod-ntp-5.ntp4.ps5.cano>\n2\n7\n377\n83\n+12ms\n[\n+15ms\n]\n+/-\n87ms\n^?\nprod-ntp-3.ntp4.ps5.cano>\n2\n7\n177\n22\n+13ms\n[\n+17ms\n]\n+/-\n91ms\n^?\nalphyn.canonical.com\n2\n7\n277\n22\n+3298us\n[\n+6616us\n]\n+/-\n185ms\n^?\nmail.stumpflee.com\n2\n7\n373\n19\n+6221us\n[\n+6221us\n]\n+/-\n117ms\n^?\nmeetbsd.ir\n2\n6\n377\n27\n-23ms\n[\n-20ms\n]\n+/-\n231ms\n^?\n188\n.121.119.122\n3\n7\n377\n26\n-27ms\n[\n-23ms\n]\n+/-\n131ms\n^+\nbrazil.time.system76.com\n2\n7\n377\n20\n-13ms\n[\n-13ms\n]\n+/-\n190ms\n^+\nohio.time.system76.com\n2\n7\n377\n21\n+23ms\n[\n+23ms\n]\n+/-\n171ms\n^+\noregon.time.system76.com\n2\n7\n377\n23\n+22ms\n[\n+26ms\n]\n+/-\n217ms\n^*\nparis.time.system76.com\n2\n7\n377\n24\n-4880us\n[\n-1560us\n]\n+/-\n109ms\n^+\nvirginia.time.system76.c>\n2\n7\n163\n19\n+5465us\n[\n+5465us\n]\n+/-\n148ms\nchronyc>\nexit\n$\nsudo\nchronyc\nmakestep\n200\nOK\nchrnoyc\nconnects to the chrony service using TCP or Unix sockets. Therefore, it is possible to use a local\nchronyc\nto connect to remote\nchrony\nand issue commands, although in this case you are limited to mainly monitoring commands for security reasons.\n← 107.3 Localisation and internationalisation\nChapter List\n108.2 System logging →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "108.2 System logging",
    "url": "https://linux1st.com./1082-system-logging.html",
    "extracted_title": "",
    "content": "Weight: 4\nCandidates should be able to configure rsyslog. This objective also includes configuring the logging daemon to send log output to a central log server or accept log output as a central log server. Use of the systemd journal subsystem is covered. Also, awareness of syslog and syslog-ng as alternative logging systems is included.\nKey Knowledge Areas\nBasic configuration of rsyslog.\nUnderstanding of standard facilities, priorities and actions.\nQuery the systemd journal.\nFilter systemd journal data by criteria such as date, service or priority.\nConfigure persistent systemd journal storage and journal size.\nDelete old systemd journal data.\nRetrieve systemd journal data from a rescue system or file system copy.\nUnderstand interaction of rsyslog with systemd-journald.\nConfiguration of logrotate.\nAwareness of syslog and syslog-ng.\nTerms and Utilities\n/etc/rsyslog.conf\n/var/log/\nlogger\nlogrotate\n/etc/logrotate.conf\n/etc/logrotate.d/\njournalctl\nsystemd-cat\n/etc/systemd/journald.conf\n/var/log/journal/\nHistory\nLogs are an important part of Unix philosophy and design. The Kernel, services, programs and most events (let it be a crash or a login attempt) will generate logs. These logs can be examines / monitored to gain insights about the system and its status. If you watch a Linux guy on a windows machine for 1 hour, you will hear \"where are the logs?\".\nIf every single program tries to handle its own logs we will face 2 issues (at least!); 1. programming will be difficult because you need to invent (or import) the wheel and 2. different programmers will generate different kinds, formats and location for their logs and it will be difficult to keep them  under your control. To overcome this, Unix world had its own solution: central logging service.\nThe older utility to manage logs was called\nsyslog\n, then we had\nsyslog-ng\n(new-generation) and later\nrsyslog\nwhich is what most distros were using till a couple of years ago.\nrsyslog\nis still present and is part of the GNU/Linux universe. It can receive logs from different programs (even over network) and save them in different places (files or files in network or even run some actions on them). It's logs are saved in the text format and can be managed by the tool of your choice, let it be\ngrep\n,\nless\n,\ntail\n,\nzless\n(less a compressed file without explicitly opening it),\nzcat\n(catting a file without explicitly opening it),\ngrep\n, ....\nBut these days\nsystemd\nis conquering most of the linux world and logs are not an exception. SystemDs logging service is called\njournald\nand we use the\njournalctl\ncommand to read its logs; unfortunately they are not text files anymore.\nYou should also know about a couple of other tools (like\nlogrotate\nto cleanup the older logs) and be familiar with some of more important system logs under GNU/Linux. So lets start.\nIts fun to know how the logs work in more depth. Here it is: whoever wants to log something eventually sends its messages to the\n/dev/log\nor\n/dev/kmsg\ndevices (often by using a helper tool). The logging tool (say\nrsyslog\n) will read from these devices and process the logs based on its configs; and now, the messages are logs!\ndmesg\nAs I told you, Linux loves logs and will be happy logging everything. But what about the boot process? What happens if the kernel wants to log something before the disks are ready? These logs are saved by the Kernel in the\nKernel Ring Buffer\n. You can access it using the\ndmesg\ncommand.\nlog rotation\nSo logs are being generated and saved! Someone need to clean them up to prevent the disk from getting full. The\nlogrotate\nutility takes care of this task.  The main configuration is at\n/etc/logrotate.conf\n:\nroot\n@\ndebian\n:\n#\ncat\n/\netc\n/\nlogrotate\n.\nconf\n#\nsee\n\"man logrotate\"\nfor\ndetails\n#\nglobal\noptions\ndo\nnot\naffect\npreceding\ninclude\ndirectives\n#\nrotate\nlog\nfiles\nweekly\nweekly\n#\nkeep\n4\nweeks\nworth\nof\nbacklogs\nrotate\n4\n#\ncreate\nnew\n(\nempty\n)\nlog\nfiles\nafter\nrotating\nold\nones\ncreate\n#\nuse\ndate\nas\na\nsuffix\nof\nthe\nrotated\nfile\n#\ndateext\n#\nuncomment\nthis\nif\nyou\nwant\nyour\nlog\nfiles\ncompressed\n#\ncompress\n#\npackages\ndrop\nlog\nrotation\ninformation\ninto\nthis\ndirectory\ninclude\n/\netc\n/\nlogrotate\n.\nd\n#\nsystem\n-\nspecific\nlogs\nmay\nalso\nbe\nconfigured\nhere\n.\nand specific services do create their logs in\n/etc/logrotate.d/\n:\nroot\n@\ndebian\n:\n# cat /etc/logrotate.d/apt\n/\nvar\n/\nlog\n/\napt\n/\nterm\n.\nlog\n{\nrotate\n12\nmonthly\ncompress\nmissingok\nnotifempty\n}\n/\nvar\n/\nlog\n/\napt\n/\nhistory\n.\nlog\n{\nrotate\n12\nmonthly\ncompress\nmissingok\nnotifempty\n}\nThese are the meaning of some of these parameters:\nparameter\nmeaning\nweekly\nrotate logs weekly\nmissingok\nit is fine if there is no log for this week\nrotate 52\nkeep the latest 52 logs and delete the older ones\ncompress\ncompress the logs\ncreate 0640 www-data adm\ncreate the files with this access and owners\npre & post rotate\nrun these scripts or commands before and after the rotation\nThis above configuration will create a zipped file for each week, keeping only 52 of them instead of a huge log file for this program.\nThe\nlogrotate\nruns using crons and does its job on a daily basis based on a configuration on\n/etc/cron.daily/logrotate\nsome famous log files\nGenerally logs are saved at\n/var/log\n. In case of any issue and if you do not know what to do, it is a common practice to run a\nls -ltrh /var/log/\nto see if any program generated a new log or not.\nBut lets have a look at some of the famous logs:\n/var/log/auth.log\n(in Debian Based)\nAuthentication processes will log here. Things like\ncron\njobs, failed logins,\nsudo\ninformations, ...\n/var/log/syslog\nA centralized place most of the logs received by\nrsyslogd\nif a specific logfile is not provided in\n/etc/rsyslog.conf\n/var/log/debug\nDebug information from programs.\n/var/log/kern.log\nKernel messages.\n/var/log/messages\nInformative messages from services. This is also the default place for logs for remote clients.\n/var/run/utmp\n&\n/var/log/wtmp\nSuccessful logins.\n/var/log/btmp\nFailed logins. You can check this to see if anyone is trying to guess your passwords!\n/var/log/faillog\nFailed authentication attempts.\n/var/log/lastlog\nDate and time of recent user logins.\nService logs\nService logs do create files or directories at\n/var/log\nand update their logs there. For example there might be a\n/var/log/apache2/\n(or\n/var/log/httpd\n) for the Apache HTTP server or a\n/var/log/mysql\nfor the MySQL DB.\nrsyslog\nThis is the newer generation of syslogs and is used in many environments. Its main configuration is located at\n/etc/rsyslog.conf\nand it also reads anything in\n/etc/rssylog.d/\ndirectory. Its configuration consists of 3 main sections:\nMODULES\n, modules used. For example to let the rsyslog use UDP connections\nGLOBAL DIRECTIVES\n, general configurations like directories accesses\nRULES\n, A combination of\nfacilities\n,\npriorities\nand\nactions\ntells the\nrsyslog\nwhat to do with each log.\nroot\n@\ndebian\n:\n~\n# cat /etc/rsyslog.conf\n# /etc/rsyslog.conf configuration file for rsyslog\n#\n# For more information install rsyslog-doc and see\n# /usr/share/doc/rsyslog-doc/html/configuration/index.html\n#################\n#### MODULES ####\n#################\nmodule\n(\nload\n=\n\"imuxsock\"\n)\n# provides support for local system logging\nmodule\n(\nload\n=\n\"imklog\"\n)\n# provides kernel logging support\n#module(load=\"immark\")  # provides --MARK-- message capability\n# provides UDP syslog reception\n#module(load=\"imudp\")\n#input(type=\"imudp\" port=\"514\")\n# provides TCP syslog reception\n#module(load=\"imtcp\")\n#input(type=\"imtcp\" port=\"514\")\n###########################\n#### GLOBAL DIRECTIVES ####\n###########################\n#\n# Set the default permissions for all log files.\n#\n$\nFileOwner\nroot\n$\nFileGroup\nadm\n$\nFileCreateMode\n0640\n$\nDirCreateMode\n0755\n$\nUmask\n0022\n#\n# Where to place spool and state files\n#\n$\nWorkDirectory\n/\nvar\n/\nspool\n/\nrsyslog\n#\n# Include all config files in /etc/rsyslog.d/\n#\n$\nIncludeConfig\n/\netc\n/\nrsyslog\n.\nd\n/*.\nconf\n###############\n#### RULES ####\n###############\n#\n# Log anything besides private authentication messages to a single log file\n#\n*.*\n;\nauth\n,\nauthpriv\n.\nnone\n-/\nvar\n/\nlog\n/\nsyslog\n#\n# Log commonly used facilities to their own log file\n#\nauth\n,\nauthpriv\n.*\n/\nvar\n/\nlog\n/\nauth\n.\nlog\ncron\n.*\n-/\nvar\n/\nlog\n/\ncron\n.\nlog\nkern\n.*\n-/\nvar\n/\nlog\n/\nkern\n.\nlog\nmail\n.*\n-/\nvar\n/\nlog\n/\nmail\n.\nlog\nuser\n.*\n-/\nvar\n/\nlog\n/\nuser\n.\nlog\n#\n# Emergencies are sent to everybody logged in.\n#\n*.\nemerg\n:\nomusrmsg\n:\n*\nAs you can see\nfacilities\ncould be things like:\nkern\n,\nuser\n,\nmail\n,\ndaemon\n,\ncron\n,\nauth\n,\nntp\n,\nsecurity\n,\nconsole\n,\nsyslog\n, ...\nThe\npriority\ncould be one of the below:\nemerg\n/\npanic\n,\nalert\n,\ncrit\n,\nerr\n/\nerror\n,\nwarn\n/\nwarning\n,\nnotice\n,\ninfo\nor\ndebug\n.\nOn the\naction\npart we can have things like these:\naction\nsample\nmeaning\nfilename\n/usr/log/logins.log\nwill write the log to this file\nusername\njadi\nwill notify that person on the screen\n@ip\n@192.168.1.100\nwill send this log to this log server and that log server will decide what to do with it based on its configs\nSo a line like this will show the kernel panics to a remote log server and also will log everything on every level to a log file:\nkern.panic      @192.168.1.100\n*.*             /var/log/messages\nIf you log some specific priority, all the\nmore important\nthings will be logged too! So if you write\ncron.notice /var/log/cron/cron.log\n, you are logging the\nemerg/panic\n,\nalert\n,\ncritical\n,\nerror\n,\nwarning\nand\nnotice\nlogs of the cron category too.\nPriority Levels (According to Syslog(3) and logger manpage):\nThis determines the importance of the message.  The levels are, in order of decreasing importance:\nemerge      system is unusable\nalert      action must be taken immediately\ncrit       critical conditions\nerror        error conditions\nwarning    warning conditions\nnotice     normal, but significant, condition\ninfo       informational message\ndebug      debug-level message\npanic      deprecated synonym for emerg\nerror      deprecated synonym for err\nwarn       deprecated synonym for warning\nIf you need to log ONLY one specific level, add an equal sign (=) before the priority like this\nlocal3.=alert /var/log/user.alert.log\n.\nIt is important to know that the binary which logs the\n*kern\ncategory is a standalone daemon. This daemon is called\nklogd\nand uses same configuration files. Why? so even after everything is crashed,\nklogd\nwill be able to log the kernel's crashes ;).\nlogger\nIf you need to send something toward the\nrsyslog\n, you can use the\nlogger\ntool.\nroot\n@\ndebian\n:\n# logger Testing my lovely tool\nroot\n@\ndebian\n:\n# logger local1.emerg Nothing emergent for sure\nroot\n@\ndebian\n:\n# tail -3 /var/log/syslog\n2023\n-\n06\n-\n30\nT06\n:\n05\n:\n01.325358\n-\n04\n:\n00\ndebian\nCRON\n[\n914\n]:\n(\nroot\n)\nCMD\n(\ncommand\n-\nv\ndebian\n-\nsa1\n>\n/\ndev\n/\nnull\n&&\ndebian\n-\nsa1\n1\n1\n)\n2023\n-\n06\n-\n30\nT06\n:\n13\n:\n27.671410\n-\n04\n:\n00\ndebian\nroot\n:\nTesting\nmy\nlovely\ntool\n2023\n-\n06\n-\n30\nT06\n:\n13\n:\n45.795158\n-\n04\n:\n00\ndebian\nroot\n:\nlocal1\n.\nemerg\nNothing\nemergent\nfor\nsure\njournald\nYou have seen the\nsystemd\nin various parts of this course. We have seen how it is part of the init process and how it handles the services and timers. All of these activities (and other logs reaching system journalying system) are logged in binary files, readable using\njournalctl\nwhich is part of the\nsystemd-journald\nutility.\nroot\n@\ndebian\n:\n~\n# systemctl status systemd-journald\n●\nsystemd\n-\njournald\n.\nservice\n-\nJournal\nService\nLoaded\n:\nloaded\n(\n/\nlib\n/\nsystemd\n/\nsystem\n/\nsystemd\n-\njournald\n.\nservice\n;\nstatic\n)\nActive\n:\nactive\n(\nrunning\n)\nsince\nFri\n2023\n-\n06\n-\n30\n05\n:\n28\n:\n50\nEDT\n;\n52\nmin\nago\nTriggeredBy\n:\n●\nsystemd\n-\njournald\n-\ndev\n-\nlog\n.\nsocket\n●\nsystemd\n-\njournald\n-\naudit\n.\nsocket\n●\nsystemd\n-\njournald\n.\nsocket\nDocs\n:\nman\n:\nsystemd\n-\njournald\n.\nservice\n(\n8\n)\nman\n:\njournald\n.\nconf\n(\n5\n)\nMain\nPID\n:\n261\n(\nsystemd\n-\njournal\n)\nStatus\n:\n\"Processing requests...\"\nTasks\n:\n1\n(\nlimit\n:\n4583\n)\nMemory\n:\n17.1\nM\nCPU\n:\n138\nms\nCGroup\n:\n/\nsystem\n.\nslice\n/\nsystemd\n-\njournald\n.\nservice\n└─\n261\n/\nlib\n/\nsystemd\n/\nsystemd\n-\njournald\nJun\n30\n05\n:\n28\n:\n50\ndebian\nsystemd\n-\njournald\n[\n261\n]:\nJournal\nstarted\nJun\n30\n05\n:\n28\n:\n50\ndebian\nsystemd\n-\njournald\n[\n261\n]:\nRuntime\nJournal\n(\n/\nrun\n/\nlog\n/\njournal\n/\nec22e43962c64359b9b25cfa650b025b\n)\nis\n4.9\nM\n,\nmax\n39.1\nM\n,\n>\nJun\n30\n05\n:\n28\n:\n50\ndebian\nsystemd\n-\njournald\n[\n261\n]:\nTime\nspent\non\nflushing\nto\n/\nvar\n/\nlog\n/\njournal\n/\nec22e43962c64359b9b25cfa650b025b\nis\n23.816\nms\n>\nJun\n30\n05\n:\n28\n:\n50\ndebian\nsystemd\n-\njournald\n[\n261\n]:\nSystem\nJournal\n(\n/\nvar\n/\nlog\n/\njournal\n/\nec22e43962c64359b9b25cfa650b025b\n)\nis\n28.2\nM\n,\nmax\n4.0\nG\n,\n>\nJun\n30\n05\n:\n28\n:\n50\ndebian\nsystemd\n-\njournald\n[\n261\n]:\nReceived\nclient\nrequest\nto\nflush\nruntime\njournal\n.\nNotice\n:\njournal\nhas\nbeen\nrotated\nsince\nunit\nwas\nstarted\n,\noutput\nmay\nbe\nincomplete\n.\nand here is the configuration file:\nroot\n@debian\n:\n~\n#\ncat\n/\netc\n/\nsystemd\n/\njournald\n.\nconf\n#\nThis\nfile\nis\npart\nof\nsystemd\n.\n#\n#\nsystemd\nis\nfree\nsoftware\n;\nyou\ncan\nredistribute\nit\nand\n/\nor\nmodify\nit\nunder\nthe\n#\nterms\nof\nthe\nGNU\nLesser\nGeneral\nPublic\nLicense\nas\npublished\nby\nthe\nFree\n#\nSoftware\nFoundation\n;\neither\nversion\n2.1\nof\nthe\nLicense\n,\nor\n(\nat\nyour\noption\n)\n#\nany\nlater\nversion\n.\n#\n#\nEntries\nin\nthis\nfile\nshow\nthe\ncompile\ntime\ndefaults\n.\nLocal\nconfiguration\n#\nshould\nbe\ncreated\nby\neither\nmodifying\nthis\nfile\n,\nor\nby\ncreating\n\"drop-ins\"\nin\n#\nthe\njournald\n.\nconf\n.\nd\n/\nsubdirectory\n.\nThe\nlatter\nis\ngenerally\nrecommended\n.\n#\nDefaults\ncan\nbe\nrestored\nby\nsimply\ndeleting\nthis\nfile\nand\nall\ndrop\n-\nins\n.\n#\n#\nUse\n'systemd-analyze cat-config systemd/journald.conf'\nto\ndisplay\nthe\nfull\nconfig\n.\n#\n#\nSee\njournald\n.\nconf\n(\n5\n)\nfor\ndetails\n.\n[\nJournal\n]\n#Storage\n=\nauto\n#Compress\n=\nyes\n#Seal\n=\nyes\n#SplitMode\n=\nuid\n#SyncIntervalSec\n=\n5\nm\n#RateLimitIntervalSec\n=\n30\ns\n#RateLimitBurst\n=\n10000\n#SystemMaxUse\n=\n#SystemKeepFree\n=\n#SystemMaxFileSize\n=\n#SystemMaxFiles\n=\n100\n#RuntimeMaxUse\n=\n#RuntimeKeepFree\n=\n#RuntimeMaxFileSize\n=\n#RuntimeMaxFiles\n=\n100\n#MaxRetentionSec\n=\n#MaxFileSec\n=\n1\nmonth\n#ForwardToSyslog\n=\nyes\n#ForwardToKMsg\n=\nno\n#ForwardToConsole\n=\nno\n#ForwardToWall\n=\nyes\n#TTYPath\n=/\ndev\n/\nconsole\n#MaxLevelStore\n=\ndebug\n#MaxLevelSyslog\n=\ndebug\n#MaxLevelKMsg\n=\nnotice\n#MaxLevelConsole\n=\ninfo\n#MaxLevelWall\n=\nemerg\n#LineMax\n=\n48\nK\n#ReadKMsg\n=\nyes\n#Audit\n=\nno\nquerying journal contents\nIf you run the\njournalctl\nyou will get all the logs... too much. So there are some useful switches:\nSwitch\nMeaning\n-r\nshow in reverse; newer on top\n-f\nkeep showing the tail\n-e\nshow and go to the end\n-n\nshow this many lines from the end (newest ones)\n-k\nshow kernel message (equal to\ndmesg\n)\n-b\nshow from a specific boot, -1 is the previous one, 0 is the current one. You can check the list using\n--list-boots\n-p\nfrom specific priority, say\n-p err\n-u\nfrom a specific systemd unit\nYou can also use the\n--since\nand\n--until\nto show a specific time range, It is possible to provide time as\nYYYY-MM-DD HH:MM:SS\nor use things like\nyesterday\n,\ntoday\n,\ntomorrow\n,\nnow\nor even\n--since \"10 minutes ago\"\nwhich is equals to\n--since \"-2 minutes\"\n.\nIf there are too many lines, push\n>\nto jump to the end (or\n<\nto go to the beginning)\nYou can also add the name of the program to the command to see the logs from that specific program; say\njournalctl /usr/bin/xrdp\nor use some fields like\nPRIORITY=\n,\n_PID=\nand provide values.\nsystemd-cat\nThis tools is used when you want to manually send logs to the journaling system. It sends its input to the journal or if provided, runs the command and sends the result to the journal.\nroot\n@\ndebian\n:\n~\n# echo \"This is my first test\" | systemd-cat\nroot\n@\ndebian\n:\n~\n# systemd-cat -p info uptime #sending priority too\nroot\n@\ndebian\n:\n~\n# journalctl -n 3\nJun\n30\n06\n:\n31\n:\n01\ndebian\nsystemd\n[\n1\n]:\nFinished\napt\n-\ndaily\n.\nservice\n-\nDaily\napt\ndownload\nactivities\n.\nJun\n30\n06\n:\n34\n:\n18\ndebian\ncat\n[\n1020\n]:\nThis\nis\nmy\nfirst\ntest\nJun\n30\n06\n:\n34\n:\n48\ndebian\nuptime\n[\n1022\n]:\n06\n:\n34\n:\n48\nup\n1\n:\n05\n,\n4\nusers\n,\nload\naverage\n:\n0.00\n,\n0.00\n,\n0.00\nmanaging storage\nThe systemd journals can keep their logs in memeory or write them to the disk or drop all the logs. This is determined by the configurations in\n/etc/systemd/journald.conf\n. But the default behaviour is as follow:\nThe system checks the\n/var/log/journal\n. If this directory, exists logs will be saved in a directory inside this. The name of the directory will be decided by looking at\n/etc/machine-id\nIf the\n/var/log/journal\nis not there, the logs will be saved in memory at\n/run/log/jouranl\nand in the directory decided by\n/etc/machine-id\n.\nBut you can overcome these configs by the following sections:\nStorage\n=\nvolatile\n#\nkeep\nthe\nlogs\nin\nmemory\nStorage\n=\npersistent\n#\nkeep\non\ndisk\n,\nif\nneeded\ncreate\nthe\ndirectories\nStorage\n=\nauto\n#\nwill\nwrite\nto\ndisk\nonly\nif\nthe\ndirectory\nexists\nStorage\n=\nnone\n#\ndo\nnot\nkeep\nlogs\nIf the logs are being written to disk, these variable will manage the disk usage:\nVariable Name\nUsage\nSystemMaxUse\nThe Maximum disk usage, say 500M. The default is on\n10%\nSystemKeepFree\nKeep at least this much free, say 1G. The default is 15%\nSystemMaxFileSize\nMaximum size of each individual file. The default is 1/8 of SystemMaxUse\nSystemMaxFiles\nMax number of non-currently-active files. The default is 100\nIf you are keeping the logs in\nmemory\n, the equivalent variables are\nRuntimeMaxUse\n,\nRuntimeKeepFree\n,\nRuntimeMaxFileSize\n, &\nRuntimeMaxFiles\n.\nIn case you need to do the clean-up manually (with the help of systemd tools for sure), you can run\njournalctl\nwith these switches:\nSwitch\nUsage\n--vacuum-time\nclean everything older than this. for example\n--vacuum-time=3months\nclean anything older than 3 months. You can use\ns\n,\nm\n,\nh\nfor seconds, minutes and days and\nd\n/\ndays\n,\nmonths\n,\nweeks\n/\nw\nand\nyears\n/\ny\n.\n--vacuum-size\neliminate till logs occupy a specific size; say 1G\n--vacuum-files\nOnly keep this much archive files\nchecking logs from a recovered system\nIf you have a crashed / non-booting system, you can still examine its logs; if the files are there. As you know the files are in\n/var/log/journal/{mchine-id}\nwhere machine-id is in\n/etc/machine-id\nof the crashed machine.\nYou can move these files to a directory after booting the crashed machine with a live linux or mount its hard on another machine or even examine them in place. The\n-D\n(or\n--directory\n) switch of\njournalctl\nindicates the location of the journal files. So if your crashed machine id is\nec22e43962c64359b9b25cfa650b025b\nand you've mounted its\n/var/\nunder your\n/mnt/var/\ndirectory, you can issue this command to read its logs and see what had happened:\njournalctl\n-\nD\n=/\nmnt\n/\nvar\n/\nlog\n/\njournal\n/\nec22e43962c64359b9b25cfa650b025b\n/\nYou can also use the\n--merge\nswitch to merge these logs into your machine or use\n--file\nto check only one specific journal file. Lastly if the exact location of journal files are not known, you can use\n--root /mnt\nand tell the\njournalctl\nto search there for journal files.\n← 108.1 Maintain system time\nChapter List\n108.3 Mail Transfer Agent (MTA) basics →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "108.3 Mail Transfer Agent (MTA) basics",
    "url": "https://linux1st.com./1083-mail-transfer-agent-mta-basics.html",
    "extracted_title": "",
    "content": "Weight: 3\nCandidates should be aware of the commonly available MTA programs and be able to perform basic forward and alias configuration on a client host. Other configuration files are not covered.\nKey Knowledge Areas\nCreate e-mail aliases.\nConfigure e-mail forwarding.\nKnowledge of commonly available MTA programs (\npostfix\n,\nsendmail\n,\nexim\n) (no configuration)\nTerms and Utilities\n~/.forward\nsendmail emulation layer commands\nnewaliases\nmail\nmailq\npostfix\nsendmail\nexim\nMTAs\nEmail is an integral part of many GNU/Linux and Unix systems. Each user do have a mail box and can send / receive email to other local users. This is done via MTAs (Mai Transfer Agents). In other words, MTAs are programs which handle emails in your operating system. They can receive and dispatch emails locally and over the network. There are different options for MTAs. In this section we will do a quick review on them and you will see how you can send emails to other uses (or over the internet) and how you can check your local mails.\nsendmail\nIs one of the oldest options available. It is huge and kind of difficult to configure and not that security oriented. Because of these, few systems use it as default their MTA.\nexim\nIt aims to be a general and flexible mailer with extensive facilities for checking incoming e-mail. It is feature rich with ACLs, authentication and many other features.\npostfix\nThis is a new alternative to\nsendmail\nand uses easy to understand configuration files. It supports multiple domains, encryption, etc. Postfix is what you see on most distros as the default MTA.\nMost desktop distros do not install MTAs by default. If you want, I suggest installing the\npostfix\n(and\nmailx\nor\nbsd-mailx\n) via your package manager.\nsendmail emulation layer\nAs you already know,\nsendmail\nis the oldest MTA alive and therefore, many other MTAs try to comply with it and has a\nsendmail emulation layer\nto keep themselves backward compatible with sendmail. Thats why you can type\nsendmail\non whatever distro you are or use the\nmailq\nand check your mail regardless of your MTA choice.\naliases\nThere are some mail aliases on the system. Defined in\n/etc/aliases\n.\n$ cat /etc/aliases\n#\n#  Aliases in this file will NOT be expanded in the header from\n#  Mail, but WILL be visible over networks or from /bin/mail.\n#\n#       >>>>>>>>>>      The program \"newaliases\" must be run after\n#       >> NOTE >>      this file is updated for any changes to\n#       >>>>>>>>>>      show through to sendmail.\n#\n# Basic system aliases -- these MUST be present.\nmailer-daemon:  postmaster\npostmaster:     root\n# General redirections for pseudo accounts.\nbin:            root\ndaemon:         root\nadm:            root\nlp:             root\nsync:           root\nshutdown:       root\nhalt:           root\nmail:           root\nnews:           root\nuucp:           root\noperator:       root\ngames:          root\nwww:            webmaster\nwebmaster:      root\n[ .... ]\nThis tells the system if there is a message for\nnews\n, it should be delivered to\nroot\nand if the email is written to\nwww\nit should be delivered to\nwebmaster\n.\nIn case of any change in this file, you need to run the\nnewaliases\ncommand.\nsending mail\nIt is possible to send an email from the command line using the\nmail\ncommand:\n[jadi@funlife ~]$ mail news\nSubject: Email to news user\nhahah.. we know where this will go.\nthis will go to root and then to jadi!\nHi Jadi!\nCc:\n[jadi@funlife ~]$ mail\nMail version 8.1.2 01/15/2001.  Type ? for help.\n\"/var/mail/jadi\": 12 messages 12 new\n>N  1 root@funlife       Sat Jan 02 08:50   39/1373  apt-listchanges: news for f\nN  2 root@funlife       Sat Jan 02 09:01  165/7438  apt-listchanges: news for f\nN  3 jadi@funlife       Sat Jan 02 19:58   18/640   *** SECURITY information fo\nN  4 jadi@funlife       Sat Jan 02 20:04   18/631   *** SECURITY information fo\nN  5 jadi@funlife       Sun Jan 03 10:15   18/664   *** SECURITY information fo\nN  6 root@funlife       Mon Jan 04 12:42   27/941   Cron <jadi@funlife> /home/j\nN  7 root@funlife       Mon Jan 04 17:11   26/845   apt-listchanges: news for f\nN  8 root@funlife       Tue Jan 05 18:42   27/945   Cron <jadi@funlife> /home/j\nN  9 root@funlife       Wed Jan 06 09:17   46/1788  apt-listchanges: news for f\nN 10 root@funlife       Thu Jan 07 12:42   27/945   Cron <jadi@funlife> /home/j\nN 11 root@funlife       Thu Jan 07 18:42   27/943   Cron <jadi@funlife> /home/j\nN 12 jadi@funlife       Thu Jan  7 19:53   17/478   Email to news user\n& 12\nMessage 12:\nFrom jadi@funlife  Thu Jan  7 19:53:08 2016\nX-Original-To: news\nTo: news@funlife\nSubject: Email to news user\nDate: Thu,  7 Jan 2016 19:53:08 +0330 (IRST)\nFrom: jadi@funlife (jadi)\nhahah.. we know where this will go.\nthis will go to root and then to jadi!\nHi Jadi!\n& d\n& q\nHeld 11 messages in /var/mail/jadi\nlocal forwards\nWe saw that it is possible to forward emails using the\n/etc/aliases\n. That file is not writable by normal users so what a normal user like\njadi\nshould do?\nEach user can create a\n.forward\nfile in her own directory and all mail targeted to that user will be forwarded to that address.\nYou can even put a complete email address like\n[email protected]\nin your\n.forward\nfile.\nIt also can send email from the command line or even within your scripts by issuing something like\necho -e \"email content\" | mail -s \"email subject\" \"\n[email protected]\n\"\n.\nmailq\nThis command lists the mail queue. Each entry shows the queue file ID, message size, arrival time, sender, and the recipients that still need to be delivered. If mail could not be delivered upon the last attempt, the reason for failure is shown. The sysadmin can use this command to check the status of emails still in the queues.\n$ mailq\n-Queue ID- --Size-- ----Arrival Time---- -Sender/Recipient-------\nAA52C228E6B      468 Thu Jan  7 19:59:41  jadi@funlife\n(connect to alt2.gmail-smtp-in.l.google.com[2404:6800:4003:c01::1a]:25: Network is unreachable)\n[email protected]\n-- 0 Kbytes in 1 Request.\n← 108.2 System logging\nChapter List\n108.4 Manage printers and printing →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "108.4 Manage printers and printing",
    "url": "https://linux1st.com./1084-manage-printers-and-printing.html",
    "extracted_title": "",
    "content": "Weight: 2\nCandidates should be able to manage print queues and user print jobs using CUPS and the LPD compatibility interface.\nKey Knowledge Areas\nBasic CUPS configuration (for local and remote printers).\nManage user print queues.\nTroubleshoot general printing problems.\nAdd and remove jobs from configured printer queues.\nTerms and Utilities\nCUPS configuration files, tools and utilities\n/etc/cups/\nlpd legacy interface (lpr, lprm, lpq)\nCUPS\nMost Linux distributions use the CUPS package for printing. You may need to install it via your package manager and start its service using the systemd or the init system your system use.\n$\nsudo\napt\ninstall\ncups\n[\nsudo\n]\npassword\nfor\njadi\n:\nReading\npackage\nlists\n...\nDone\nBuilding\ndependency\ntree\n...\nDone\nReading\nstate\ninformation\n...\nDone\nThe\nfollowing\nadditional\npackages\nwill\nbe\ninstalled\n:\nacl\navahi\n-\ndaemon\ncolord\ncolord\n-\ndata\ncups\n-\nbrowsed\ncups\n-\nclient\ncups\n-\ncommon\ncups\n-\ncore\n-\ndrivers\ncups\n-\ndaemon\ncups\n-\nfilters\ncups\n-\nfilters\n-\ncore\n-\ndrivers\ncups\n-\nipp\n-\nutils\ncups\n-\nppdc\ncups\n-\nserver\n-\ncommon\nfonts\n-\ndroid\n-\nfallback\nfonts\n-\nnoto\n-\nmono\nfonts\n-\nurw\n-\nbase35\nghostscript\nipp\n-\nusb\nlibavahi\n-\ncore7\nlibavahi\n-\nglib1\nlibcolorhug2\nlibcupsfilters1\nlibdaemon0\nlibexif12\nlibfontembed1\nlibgphoto2\n-\n6\nlibgphoto2\n-\nl10n\nlibgphoto2\n-\nport12\nlibgs\n-\ncommon\nlibgs10\nlibgs10\n-\ncommon\nlibgusb2\nlibidn12\nlibieee1284\n-\n3\nlibijs\n-\n0.35\nlibjbig2dec0\nlibjson\n-\nglib\n-\n1.0\n-\n0\nlibjson\n-\nglib\n-\n1.0\n-\ncommon\nliblouis\n-\ndata\nliblouis20\nliblouisutdml\n-\nbin\nliblouisutdml\n-\ndata\nliblouisutdml9\nlibltdl7\nlibnss\n-\nmdns\nlibpaper\n-\nutils\nlibpaper1\nlibpoppler\n-\ncpp0v5\nlibpoppler\n-\nglib8\nlibpoppler126\nlibqpdf29\nlibsane\n-\ncommon\nlibsane1\nlibsnmp\n-\nbase\nlibsnmp40\nlynx\nlynx\n-\ncommon\nmailcap\npoppler\n-\ndata\npoppler\n-\nutils\nsane\n-\nairscan\nsane\n-\nutils\nupdate\n-\ninetd\nusb\n.\nids\nSuggested\npackages\n:\navahi\n-\nautoipd\ncolord\n-\nsensor\n-\nargyll\ncups\n-\nbsd\ncups\n-\npdf\nfoomatic\n-\ndb\n-\ncompressed\n-\nppds\n|\nfoomatic\n-\ndb\nsmbclient\nantiword\ndocx2txt\nimagemagick\nfonts\n-\nnoto\nfonts\n-\nfreefont\n-\notf\n|\nfonts\n-\nfreefont\n-\nttf\nfonts\n-\ntexgyre\ngphoto2\nooo2dbk\nrtf2xml\navahi\n-\nautoipd\n|\nzeroconf\nhplip\nsnmp\n-\nmibs\n-\ndownloader\nfonts\n-\njapanese\n-\nmincho\n|\nfonts\n-\nipafont\n-\nmincho\nfonts\n-\narphic\n-\nukai\nfonts\n-\narphic\n-\numing\nfonts\n-\nnanum\nunpaper\nThe\nfollowing\nNEW\npackages\nwill\nbe\ninstalled\n:\nacl\navahi\n-\ndaemon\ncolord\ncolord\n-\ndata\ncups\ncups\n-\nbrowsed\ncups\n-\nclient\ncups\n-\ncommon\ncups\n-\ncore\n-\ndrivers\ncups\n-\ndaemon\ncups\n-\nfilters\ncups\n-\nfilters\n-\ncore\n-\ndrivers\ncups\n-\nipp\n-\nutils\ncups\n-\nppdc\ncups\n-\nserver\n-\ncommon\nfonts\n-\ndroid\n-\nfallback\nfonts\n-\nnoto\n-\nmono\nfonts\n-\nurw\n-\nbase35\nghostscript\nipp\n-\nusb\nlibavahi\n-\ncore7\nlibavahi\n-\nglib1\nlibcolorhug2\nlibcupsfilters1\nlibdaemon0\nlibexif12\nlibfontembed1\nlibgphoto2\n-\n6\nlibgphoto2\n-\nl10n\nlibgphoto2\n-\nport12\nlibgs\n-\ncommon\nlibgs10\nlibgs10\n-\ncommon\nlibgusb2\nlibidn12\nlibieee1284\n-\n3\nlibijs\n-\n0.35\nlibjbig2dec0\nlibjson\n-\nglib\n-\n1.0\n-\n0\nlibjson\n-\nglib\n-\n1.0\n-\ncommon\nliblouis\n-\ndata\nliblouis20\nliblouisutdml\n-\nbin\nliblouisutdml\n-\ndata\nliblouisutdml9\nlibltdl7\nlibnss\n-\nmdns\nlibpaper\n-\nutils\nlibpaper1\nlibpoppler\n-\ncpp0v5\nlibpoppler\n-\nglib8\nlibpoppler126\nlibqpdf29\nlibsane\n-\ncommon\nlibsane1\nlibsnmp\n-\nbase\nlibsnmp40\nlynx\nlynx\n-\ncommon\nmailcap\npoppler\n-\ndata\npoppler\n-\nutils\nsane\n-\nairscan\nsane\n-\nutils\nupdate\n-\ninetd\nusb\n.\nids\n0\nupgraded\n,\n66\nnewly\ninstalled\n,\n0\nto\nremove\nand\n7\nnot\nupgraded\n.\nNeed\nto\nget\n40.7\nMB\nof\narchives\n.\nAfter\nthis\noperation\n,\n163\nMB\nof\nadditional\ndisk\nspace\nwill\nbe\nused\n.\nDo\nyou\nwant\nto\ncontinue\n?\n[\nY/n\n]\n...\n...\nCUPS stands for Common Unix Printing System and as you can see, it installs many related packages and even suggests some more. This is because CUPS need lots of information about different printers and uses many tools to print. When installed, you need to start the service:\n$\nsudo\nsystemctl\nstart\ncups\n.\nservice\n$\nsudo\nsystemctl\nstatus\ncups\n.\nservice\n●\ncups\n.\nservice\n-\nCUPS\nScheduler\nLoaded\n:\nloaded\n(\n/\nlib\n/\nsystemd\n/\nsystem\n/\ncups\n.\nservice\n;\nenabled\n;\npreset\n:\nenabled\n)\nActive\n:\nactive\n(\nrunning\n)\nsince\nSun\n2023\n-\n07\n-\n16\n13\n:\n50\n:\n20\nEDT\n;\n27\ns\nago\nTriggeredBy\n:\n●\ncups\n.\npath\n●\ncups\n.\nsocket\nDocs\n:\nman\n:\ncupsd\n(\n8\n)\nMain\nPID\n:\n2366\n(\ncupsd\n)\nStatus\n:\n\"Scheduler is running...\"\nTasks\n:\n1\n(\nlimit\n:\n4583\n)\nMemory\n:\n2.8\nM\nCPU\n:\n400\nms\nCGroup\n:\n/\nsystem\n.\nslice\n/\ncups\n.\nservice\n└─\n2366\n/\nusr\n/\nsbin\n/\ncupsd\n-\nl\nJul\n16\n13\n:\n50\n:\n20\ndebian\nsystemd\n[\n1\n]:\nStarting\ncups\n.\nservice\n-\nCUPS\nScheduler\n...\nJul\n16\n13\n:\n50\n:\n20\ndebian\nsystemd\n[\n1\n]:\nStarted\ncups\n.\nservice\n-\nCUPS\nScheduler\n.\nTo access the CUPS services, there are different ways, including a web based interface, GUI programs on the graphical modes and even command line tools. CUPS is designed to be simple and able to use different printers from various vendors.\nconfiguration files\nAs most other linux program, CUPS saves its configuration at\n/etc\ndirectory.\n#\nls\n/\netc\n/\ncups\n/\ncups\n-\nbrowsed\n.\nconf\ncups\n-\nfiles\n.\nconf\nppd\nraw\n.\nconvs\nsnmp\n.\nconf\nsubscriptions\n.\nconf\ncupsd\n.\nconf\ninterfaces\nprinters\n.\nconf\nraw\n.\ntypes\nssl\nsubscriptions\n.\nconf\n.\nO\nThe main configuration file is the\ncupsd.conf\n. Take a look at it; it is very easy to understand. For example the\nListen localhost:631\nline tells the CUPS to listen on localhost port 631. Here is a sample:\n$\ncat\n/\netc\n/\ncups\n/\ncupsd\n.\nconf\n#\n# Configuration file for the CUPS scheduler.  See \"man cupsd.conf\" for a\n# complete description of this file.\n#\n# Log general information in error_log - change \"warn\" to \"debug\"\n# for troubleshooting...\nLogLevel\nwarn\nPageLogFormat\n# Specifies the maximum size of the log files before they are rotated.  The value \"0\" disables log rotation.\nMaxLogSize\n0\n# Default error policy for printers\nErrorPolicy\nretry\n-\njob\n# Only listen for connections from the local machine.\nListen\nlocalhost\n:\n631\nListen\n/\nrun\n/\ncups\n/\ncups\n.\nsock\n# Show shared printers on the local network.\nBrowsing\nYes\nBrowseLocalProtocols\ndnssd\n# Default authentication type, when authentication is required...\nDefaultAuthType\nBasic\n# Web interface setting...\nWebInterface\nYes\n# Timeout after cupsd exits if idle (applied only if cupsd runs on-demand - with -l)\nIdleExitTimeout\n60\n# Restrict access to the server...\n<\nLocation\n/>\nOrder\nallow\n,\ndeny\n</\nLocation\n>\n# Restrict access to the admin pages...\n<\nLocation\n/\nadmin\n>\nOrder\nallow\n,\ndeny\n</\nLocation\n>\n# Restrict access to configuration files...\n<\nLocation\n/\nadmin\n/\nconf\n>\nAuthType\nDefault\nRequire\nuser\n@\nSYSTEM\nOrder\nallow\n,\ndeny\n</\nLocation\n>\n# Restrict access to log files...\n<\nLocation\n/\nadmin\n/\nlog\n>\nAuthType\nDefault\nRequire\nuser\n@\nSYSTEM\nOrder\nallow\n,\ndeny\n</\nLocation\n>\n# Set the default printer/job policies...\n<\nPolicy\ndefault\n>\n# Job/subscription privacy...\nJobPrivateAccess\ndefault\nJobPrivateValues\ndefault\nSubscriptionPrivateAccess\ndefault\nSubscriptionPrivateValues\ndefault\n# Job-related operations must be done by the owner or an administrator...\n<\nLimit\nCreate\n-\nJob\nPrint\n-\nJob\nPrint\n-\nURI\nValidate\n-\nJob\n>\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n<\nLimit\nSend\n-\nDocument\nSend\n-\nURI\nHold\n-\nJob\nRelease\n-\nJob\nRestart\n-\nJob\nPurge\n-\nJobs\nSet\n-\nJob\n-\nAttributes\nCreate\n-\nJob\n-\nSubscription\nRenew\n-\nSubscription\nCancel\n-\nSubscription\nGet\n-\nNotifications\nReprocess\n-\nJob\nCancel\n-\nCurrent\n-\nJob\nSuspend\n-\nCurrent\n-\nJob\nResume\n-\nJob\nCancel\n-\nMy\n-\nJobs\nClose\n-\nJob\nCUPS\n-\nMove\n-\nJob\nCUPS\n-\nGet\n-\nDocument\n>\nRequire\nuser\n@\nOWNER\n@\nSYSTEM\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n# All administration operations require an administrator to authenticate...\n<\nLimit\nCUPS\n-\nAdd\n-\nModify\n-\nPrinter\nCUPS\n-\nDelete\n-\nPrinter\nCUPS\n-\nAdd\n-\nModify\n-\nClass\nCUPS\n-\nDelete\n-\nClass\nCUPS\n-\nSet\n-\nDefault\nCUPS\n-\nGet\n-\nDevices\n>\nAuthType\nDefault\nRequire\nuser\n@\nSYSTEM\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n# All printer operations require a printer operator to authenticate...\n<\nLimit\nPause\n-\nPrinter\nResume\n-\nPrinter\nEnable\n-\nPrinter\nDisable\n-\nPrinter\nPause\n-\nPrinter\n-\nAfter\n-\nCurrent\n-\nJob\nHold\n-\nNew\n-\nJobs\nRelease\n-\nHeld\n-\nNew\n-\nJobs\nDeactivate\n-\nPrinter\nActivate\n-\nPrinter\nRestart\n-\nPrinter\nShutdown\n-\nPrinter\nStartup\n-\nPrinter\nPromote\n-\nJob\nSchedule\n-\nJob\n-\nAfter\nCancel\n-\nJobs\nCUPS\n-\nAccept\n-\nJobs\nCUPS\n-\nReject\n-\nJobs\n>\nAuthType\nDefault\nRequire\nuser\n@\nSYSTEM\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n# Only the owner or an administrator can cancel or authenticate a job...\n<\nLimit\nCancel\n-\nJob\nCUPS\n-\nAuthenticate\n-\nJob\n>\nRequire\nuser\n@\nOWNER\n@\nSYSTEM\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n<\nLimit\nAll\n>\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n</\nPolicy\n>\n# Set the authenticated printer/job policies...\n<\nPolicy\nauthenticated\n>\n# Job/subscription privacy...\nJobPrivateAccess\ndefault\nJobPrivateValues\ndefault\nSubscriptionPrivateAccess\ndefault\nSubscriptionPrivateValues\ndefault\n# Job-related operations must be done by the owner or an administrator...\n<\nLimit\nCreate\n-\nJob\nPrint\n-\nJob\nPrint\n-\nURI\nValidate\n-\nJob\n>\nAuthType\nDefault\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n<\nLimit\nSend\n-\nDocument\nSend\n-\nURI\nHold\n-\nJob\nRelease\n-\nJob\nRestart\n-\nJob\nPurge\n-\nJobs\nSet\n-\nJob\n-\nAttributes\nCreate\n-\nJob\n-\nSubscription\nRenew\n-\nSubscription\nCancel\n-\nSubscription\nGet\n-\nNotifications\nReprocess\n-\nJob\nCancel\n-\nCurrent\n-\nJob\nSuspend\n-\nCurrent\n-\nJob\nResume\n-\nJob\nCancel\n-\nMy\n-\nJobs\nClose\n-\nJob\nCUPS\n-\nMove\n-\nJob\nCUPS\n-\nGet\n-\nDocument\n>\nAuthType\nDefault\nRequire\nuser\n@\nOWNER\n@\nSYSTEM\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n# All administration operations require an administrator to authenticate...\n<\nLimit\nCUPS\n-\nAdd\n-\nModify\n-\nPrinter\nCUPS\n-\nDelete\n-\nPrinter\nCUPS\n-\nAdd\n-\nModify\n-\nClass\nCUPS\n-\nDelete\n-\nClass\nCUPS\n-\nSet\n-\nDefault\n>\nAuthType\nDefault\nRequire\nuser\n@\nSYSTEM\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n# All printer operations require a printer operator to authenticate...\n<\nLimit\nPause\n-\nPrinter\nResume\n-\nPrinter\nEnable\n-\nPrinter\nDisable\n-\nPrinter\nPause\n-\nPrinter\n-\nAfter\n-\nCurrent\n-\nJob\nHold\n-\nNew\n-\nJobs\nRelease\n-\nHeld\n-\nNew\n-\nJobs\nDeactivate\n-\nPrinter\nActivate\n-\nPrinter\nRestart\n-\nPrinter\nShutdown\n-\nPrinter\nStartup\n-\nPrinter\nPromote\n-\nJob\nSchedule\n-\nJob\n-\nAfter\nCancel\n-\nJobs\nCUPS\n-\nAccept\n-\nJobs\nCUPS\n-\nReject\n-\nJobs\n>\nAuthType\nDefault\nRequire\nuser\n@\nSYSTEM\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n# Only the owner or an administrator can cancel or authenticate a job...\n<\nLimit\nCancel\n-\nJob\nCUPS\n-\nAuthenticate\n-\nJob\n>\nAuthType\nDefault\nRequire\nuser\n@\nOWNER\n@\nSYSTEM\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n<\nLimit\nAll\n>\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n</\nPolicy\n>\n# Set the kerberized printer/job policies...\n<\nPolicy\nkerberos\n>\n# Job/subscription privacy...\nJobPrivateAccess\ndefault\nJobPrivateValues\ndefault\nSubscriptionPrivateAccess\ndefault\nSubscriptionPrivateValues\ndefault\n# Job-related operations must be done by the owner or an administrator...\n<\nLimit\nCreate\n-\nJob\nPrint\n-\nJob\nPrint\n-\nURI\nValidate\n-\nJob\n>\nAuthType\nNegotiate\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n<\nLimit\nSend\n-\nDocument\nSend\n-\nURI\nHold\n-\nJob\nRelease\n-\nJob\nRestart\n-\nJob\nPurge\n-\nJobs\nSet\n-\nJob\n-\nAttributes\nCreate\n-\nJob\n-\nSubscription\nRenew\n-\nSubscription\nCancel\n-\nSubscription\nGet\n-\nNotifications\nReprocess\n-\nJob\nCancel\n-\nCurrent\n-\nJob\nSuspend\n-\nCurrent\n-\nJob\nResume\n-\nJob\nCancel\n-\nMy\n-\nJobs\nClose\n-\nJob\nCUPS\n-\nMove\n-\nJob\nCUPS\n-\nGet\n-\nDocument\n>\nAuthType\nNegotiate\nRequire\nuser\n@\nOWNER\n@\nSYSTEM\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n# All administration operations require an administrator to authenticate...\n<\nLimit\nCUPS\n-\nAdd\n-\nModify\n-\nPrinter\nCUPS\n-\nDelete\n-\nPrinter\nCUPS\n-\nAdd\n-\nModify\n-\nClass\nCUPS\n-\nDelete\n-\nClass\nCUPS\n-\nSet\n-\nDefault\n>\nAuthType\nDefault\nRequire\nuser\n@\nSYSTEM\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n# All printer operations require a printer operator to authenticate...\n<\nLimit\nPause\n-\nPrinter\nResume\n-\nPrinter\nEnable\n-\nPrinter\nDisable\n-\nPrinter\nPause\n-\nPrinter\n-\nAfter\n-\nCurrent\n-\nJob\nHold\n-\nNew\n-\nJobs\nRelease\n-\nHeld\n-\nNew\n-\nJobs\nDeactivate\n-\nPrinter\nActivate\n-\nPrinter\nRestart\n-\nPrinter\nShutdown\n-\nPrinter\nStartup\n-\nPrinter\nPromote\n-\nJob\nSchedule\n-\nJob\n-\nAfter\nCancel\n-\nJobs\nCUPS\n-\nAccept\n-\nJobs\nCUPS\n-\nReject\n-\nJobs\n>\nAuthType\nDefault\nRequire\nuser\n@\nSYSTEM\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n# Only the owner or an administrator can cancel or authenticate a job...\n<\nLimit\nCancel\n-\nJob\nCUPS\n-\nAuthenticate\n-\nJob\n>\nAuthType\nNegotiate\nRequire\nuser\n@\nOWNER\n@\nSYSTEM\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n<\nLimit\nAll\n>\nOrder\ndeny\n,\nallow\n</\nLimit\n>\n</\nPolicy\n>\njadi\n@\ndebian\n:~\n$\nBroadcast\nmessage\nfrom\nroot\n@\ndebian\non\npts\n/\n3\n(\nSun\n2023\n-07\n-16\n20\n:\n54\n:\n04\nEDT\n)\n:\nThe\nsystem\nwill\npower\noff\nnow\n!\nConnection\nto\n192.168.64.7\nclosed\nby\nremote\nhost\n.\nConnection\nto\n192.168.64.7\nclosed\n.\n➜\nlpic1book\nssh\njadi\n@192.168.64.7\njadi\n@192.168.64.7\n'\ns\npassword\n:\nLinux\ndebian\n6.1.0\n-9\n-\narm64\n#\n1\nSMP\nDebian\n6.1.27\n-1\n(\n2023\n-05\n-08\n)\naarch64\nThe\nprograms\nincluded\nwith\nthe\nDebian\nGNU\n/\nLinux\nsystem\nare\nfree\nsoftware\n;\nthe\nexact\ndistribution\nterms\nfor\neach\nprogram\nare\ndescribed\nin\nthe\nindividual\nfiles\nin\n/\nusr\n/\nshare\n/\ndoc\n/*/copyright.\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nYou have no mail.\nLast login: Mon Jul 17 08:13:13 2023\njadi@debian:~$ sudo su -\n[sudo] password for jadi:\nroot@debian:~# cd /etc/cups/\nroot@debian:/etc/cups# ls\ncups-browsed.conf  cups-files.conf  ppd        raw.convs  snmp.conf  subscriptions.conf\ncupsd.conf     interfaces       printers.conf  raw.types  ssl    subscriptions.conf.O\nroot@debian:/etc/cups# cd\nroot@debian:~# ls /etc/cups/\ncups-browsed.conf  cups-files.conf  ppd        raw.convs  snmp.conf  subscriptions.conf\ncupsd.conf     interfaces       printers.conf  raw.types  ssl    subscriptions.conf.O\nroot@debian:~# cat /etc/cups/cupsd.conf\n#\n# Configuration file for the CUPS scheduler.  See \"man cupsd.conf\" for a\n# complete description of this file.\n#\n# Log general information in error_log - change \"warn\" to \"debug\"\n# for troubleshooting...\nLogLevel warn\nPageLogFormat\n# Specifies the maximum size of the log files before they are rotated.  The value \"0\" disables log rotation.\nMaxLogSize 0\n# Default error policy for printers\nErrorPolicy retry-job\n# Only listen for connections from the local machine.\nListen localhost:631\nListen /run/cups/cups.sock\n# Show shared printers on the local network.\nBrowsing Yes\nBrowseLocalProtocols dnssd\n# Default authentication type, when authentication is required...\nDefaultAuthType Basic\n# Web interface setting...\nWebInterface Yes\n# Timeout after cupsd exits if idle (applied only if cupsd runs on-demand - with -l)\nIdleExitTimeout 60\n# Restrict access to the server...\n<Location />\nOrder allow,deny\n</Location>\n# Restrict access to the admin pages...\n<Location /admin>\nOrder allow,deny\n</Location>\n# Restrict access to configuration files...\n<Location /admin/conf>\nAuthType Default\nRequire user @SYSTEM\nOrder allow,deny\n</Location>\n# Restrict access to log files...\n<Location /admin/log>\nAuthType Default\nRequire user @SYSTEM\nOrder allow,deny\n</Location>\n# Set the default printer/job policies...\n<Policy default>\n# Job/subscription privacy...\nJobPrivateAccess default\nJobPrivateValues default\nSubscriptionPrivateAccess default\nSubscriptionPrivateValues default\n# Job-related operations must be done by the owner or an administrator...\n<Limit Create-Job Print-Job Print-URI Validate-Job>\nOrder deny,allow\n</Limit>\n<Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job CUPS-Get-Document>\nRequire user @OWNER @SYSTEM\nOrder deny,allow\n</Limit>\n# All administration operations require an administrator to authenticate...\n<Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default CUPS-Get-Devices>\nAuthType Default\nRequire user @SYSTEM\nOrder deny,allow\n</Limit>\n# All printer operations require a printer operator to authenticate...\n<Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs>\nAuthType Default\nRequire user @SYSTEM\nOrder deny,allow\n</Limit>\n# Only the owner or an administrator can cancel or authenticate a job...\n<Limit Cancel-Job CUPS-Authenticate-Job>\nRequire user @OWNER @SYSTEM\nOrder deny,allow\n</Limit>\n<Limit All>\nOrder deny,allow\n</Limit>\n</Policy>\n# Set the authenticated printer/job policies...\n<Policy authenticated>\n# Job/subscription privacy...\nJobPrivateAccess default\nJobPrivateValues default\nSubscriptionPrivateAccess default\nSubscriptionPrivateValues default\n# Job-related operations must be done by the owner or an administrator...\n<Limit Create-Job Print-Job Print-URI Validate-Job>\nAuthType Default\nOrder deny,allow\n</Limit>\n<Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job CUPS-Get-Document>\nAuthType Default\nRequire user @OWNER @SYSTEM\nOrder deny,allow\n</Limit>\n# All administration operations require an administrator to authenticate...\n<Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default>\nAuthType Default\nRequire user @SYSTEM\nOrder deny,allow\n</Limit>\n# All printer operations require a printer operator to authenticate...\n<Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs>\nAuthType Default\nRequire user @SYSTEM\nOrder deny,allow\n</Limit>\n# Only the owner or an administrator can cancel or authenticate a job...\n<Limit Cancel-Job CUPS-Authenticate-Job>\nAuthType Default\nRequire user @OWNER @SYSTEM\nOrder deny,allow\n</Limit>\n<Limit All>\nOrder deny,allow\n</Limit>\n</Policy>\n# Set the kerberized printer/job policies...\n<Policy kerberos>\n# Job/subscription privacy...\nJobPrivateAccess default\nJobPrivateValues default\nSubscriptionPrivateAccess default\nSubscriptionPrivateValues default\n# Job-related operations must be done by the owner or an administrator...\n<Limit Create-Job Print-Job Print-URI Validate-Job>\nAuthType Negotiate\nOrder deny,allow\n</Limit>\n<Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job CUPS-Get-Document>\nAuthType Negotiate\nRequire user @OWNER @SYSTEM\nOrder deny,allow\n</Limit>\n# All administration operations require an administrator to authenticate...\n<Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default>\nAuthType Default\nRequire user @SYSTEM\nOrder deny,allow\n</Limit>\n# All printer operations require a printer operator to authenticate...\n<Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs>\nAuthType Default\nRequire user @SYSTEM\nOrder deny,allow\n</Limit>\n# Only the owner or an administrator can cancel or authenticate a job...\n<Limit Cancel-Job CUPS-Authenticate-Job>\nAuthType Negotiate\nRequire user @OWNER @SYSTEM\nOrder deny,allow\n</Limit>\n<Limit All>\nOrder deny,allow\n</Limit>\n</Policy>\nAll the printer data is saved at\n/etc/cups/printers.conf\n. The web interface or any other GUI is actually editing this file.\n#\ncat\n/etc/cups/printers.conf\n#\nPrinter\nconfiguration\nfile\nfor\nCUPS\nv2.4.2\n#\nWritten\nby\ncupsd\n#\nDO\nNOT\nEDIT\nTHIS\nFILE\nWHEN\nCUPSD\nIS\nRUNNING\nNextPrinterId\n2\n<Printer\nMyPrinter\n>\nPrinterId\n1\nUUID\nurn:uuid:cea56d60-93a0-31bf-443b-5a7288e2cd51\nInfo\nMy\nPrinter\nLocation\nother\nroom\nMakeModel\nHP\nDesignJet\n600\npcl,\n1.0\nDeviceURI\nhttp://thatprinter:631/ipp/\nState\nIdle\nStateTime\n1689596391\nConfigTime\n1689596367\nType\n8450116\nAccepting\nYes\nShared\nYes\nJobSheets\nnone\nnone\nQuotaPeriod\n0\nPageLimit\n0\nKLimit\n0\nOpPolicy\ndefault\nErrorPolicy\nretry-job\n</Printer>\nAnother important configuration directory is located at\n/etc/cups/ppd/\n. This directory contains the PostScript printer Description (PPD) files. These let printers which use them to function properly.\nTo find the CUPS logs, check the\n/var/log\ndirectory:\n# ls /var/log/cups/\naccess_log\nerror_log\nCUPS web interface\nTo enable CUPS's web interface, you have to enable the following configuration in the\n/etc/cups/cupsd.conf\n:\nWebInterface Yes\nThen you will have access to the GUI via port\n631\n. So it will be enough to access the\nlocalhost:631\nor\n127.0.0.1:631\n(or the server's\nIP\naddress on port\n631\n) from your browser.\nThere are some of the important sections on the above page:\nSection\nUsage\nAdministration\nAdding printers, managing jobs and configuring the CUPS server\nJobs\nChecking the active, pending & completed jobs\nPrinters\nList or search in the installed printers\nBy default, system users can view printers and queued jobs ,but changes (like adding printers) will need more access. This is configured at the bottom part of\ncupsd.conf\nfile. For example, the below configuration provides\nCUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Set-Defaul\naccess to anyone in\n@printer_admin\ngroup.\n<Limit\nCUPS-Add-Modify-Printer\nCUPS-Delete-Printer\nCUPS-Set-Default\n>\nAuthType\nDefault\nRequire\nuser\n@printer_admin\nOrder\ndeny,allow\n</Limit>\nCUPS has most of the common printer drivers installed. You just need to choose the printer from the dropdown menu to add it.\nlegacy tools\nJust like the\nMTA\nprograms, CUPS support all the legacy command line programs too. These used to be printing commands in the BSD world so you may need to install the\ncups-bsd\npackage to let them work under your CUPS environment. The table below lists the BSD printing compatibility commands:\ncommand\nusage\nlpr\nprint a file\nlpq\nshow print queue/jobs\nlprm\nrm/remove a file from priner queue\nlpc\nprinter control / troubleshooting program\nlpq\nThe\nq\nstands for\nqueue\n. Therefor\nlpq\nshows the printer queue and is used when you want to see the printing jobs. If you use the\n-a\nswitch,\nlpq\nwill list the jobs from\nall\nprinters. Alternatively you can use the\n-P\nswitch to show the jobs of a specific printer. So the following command will show the jobs of a printer called Apple-Dot-Matrix:\n# lpq -PApple-Dot-Matrix\nApple-Dot-Matrix is ready and printing\nRank    Owner   Job     File(s)                         Total Size\nactive  unknown 1       unknown                         7168 bytes\n1st     unknown 2       unknown                         2048 bytes\nThere should be no spaces between the\n-P\nand the printer's name; strange? yes :D\nlpr\nThis command sends a job to a printer. The printer is specified via the\n-P\nswitch.\n$\nlpr\n-PApple-Dot-Matrix\nfor_print.txt\n$\nlpq\nApple-Dot-Matrix\nis\nready\nand\nprinting\nRank\nOwner\nJob\nFile\n(\ns\n)\nTotal\nSize\nactive\njadi\n1\nUntitled\nDocument\n1\n7168\nbytes\n1st\njadi\n2\nUntitled1\n2048\nbytes\n2nd\njadi\n3\nfor_print.txt\n1024\nbytes\nIf no printer is specified, the default printer will be used\nlprm\nThe\nrm\nstands for\nremove\n. Therefor the\nlprm\ncommand removes jobs from the queue. Obviously, you have to provide the\nJob ID\n.\n$\nlpq\nApple-Dot-Matrix\nis\nready\nand\nprinting\nRank\nOwner\nJob\nFile\n(\ns\n)\nTotal\nSize\nactive\njadi\n1\nUntitled\nDocument\n1\n7168\nbytes\n1st\njadi\n2\nUntitled1\n2048\nbytes\n2nd\njadi\n3\nfor_print.txt\n1024\nbytes\njadi@funlife:/tmp$\nlprm\n2\njadi@funlife:/tmp$\nlpq\nApple-Dot-Matrix\nis\nready\nand\nprinting\nRank\nOwner\nJob\nFile\n(\ns\n)\nTotal\nSize\nactive\njadi\n1\nUntitled\nDocument\n1\n7168\nbytes\n1st\njadi\n3\nfor_print.txt\n1024\nbytes\nOnly root can remove other peoples print jobs\nIf you need to remove ALL the jobs of a specific printer, you can go with\n-Pprinter_name -\n. Yes! That is only one dash (\n-\n) after the printer name; that's why this is called a legacy command.\nthe\nlprm -\nwill remove all the print jobs\nlpc\nThe\nc\nstands for\ncontrol\n. Therefor\nlpc\nlets you control, check the status (via\nlpc status\n) and troubleshoot your printers.\n$ lpc status\nApple-Dot-Matrix:\nprinter is on device 'ipp' speed -1\nqueuing is enabled\nprinting is enabled\n2 entries\ndaemon present\nIn the above response,\nqueuing is enabled\ntell us that the queue can accept new print jobs. If the queue is disabled, you can not even send new jobs to the printer.\nprinting is enabled\nmeans that the printer is actually can print on the paper. This will be on the disable state if the printer is out of ink or paper or experiencing a paper jam.\nIf you are having problems with your printer or need to prevent it from accepting new jobs or let it accept jobs but not do the actual printing, these four commands can help:\ncommand\nusage\ncupsaccept\ntells the printer queue to accept new jobs\ncupsreject\ntells the printer to reject any new job\ncupsenable\nenables the actual/physical printing of the jobs\ncupsdisable\ndisables the physical printing of the jobs\nIn all cases, you have to provide the printer name of the printer. It is also possible to provide a reason using\n-r\nswitch.\n$\ncupsdisable\nApple-Dot-Matrix\n-r\n\"need more paper\"\n$\nlpc\nstatus\nApple-Dot-Matrix:\nprinter\nis\non\ndevice\n'ipp'\nspeed\n-1\nqueuing\nis\nenabled\nprinting\nis\ndisabled\n2\nentries\ndaemon\npresent\n← 108.3 Mail Transfer Agent (MTA) basics\nChapter List\n109.1 Fundamentals of internet protocols →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "109.1 Fundamentals of internet protocols",
    "url": "https://linux1st.com./1091-fundamentals-of-internet-protocols.html",
    "extracted_title": "",
    "content": "Weight: 4\nCandidates should demonstrate a proper understanding of TCP/IP network fundamentals.\nKey Knowledge Areas\nDemonstrate an understanding of network masks and CIDR notation.\nKnowledge of the differences between private and public \"dotted quad\" IP addresses.\nKnowledge about common TCP and UDP ports and services (20, 21, 22, 23, 25, 53, 80, 110, 123, 139, 143, 161, 162, 389, 443, 465, 514, 636, 993, 995).\nKnowledge about the differences and major features of UDP, TCP and ICMP.\nKnowledge of the major differences between IPv4 and IPv6.\nKnowledge of the basic features of IPv6.\nTerms and Utilities\n/etc/services\nIPv4, IPv6\nSubnetting\nTCP, UDP, ICMP\nTCP/IP\nThe\nTransmission Control Protocol/Internet Protocol\n(or TCP/IP in short) is stack or protocols which powers the most of communications on the Internet (and many other networks). Although it is generally called TCP, it also includes UDP, ICMP, DNS and many others.\nIP\nInternet Protocol or IP is a way to logically pointing to a host on the Internet. When a device has an IP Address, it is possible to send data toward it. The IP addresses should be unique so the network will know where each packet is intended to go. There are 2 active versions of the IP protocol; 4 & 6.\nAn IPv4 is in the form of A.B.C.D where A, B, C & D are between 0-255. The followings are all valid IP addresses:\n1.2.3.4\n1.1.1.1\n100.0.0.100\n192.168.1.4\neach part of an IP address is called an Octet since it is constructed of an 8 bit number (0..255) and can be shown in binary or hex or any notation, but Decimal format is more common.\nHaving in mind that each octet can be between 0 to 255, in total we can have 256 * 256 * 256 * 256 = 4294967296 IPv4 addresses; That is around 4.3 billion - only! Thats why we are switching to IPv6.\nPrivate IPs\nIP addresses should be uniq on a network so people should get their IP addresses from a central authority called Internet Assigned Numbers Authority (IANA). The available IP addresses are grouped in 3 classes:\nClass\nFirst Octet\nRange\nA\n1-126\n1.0.0.0\nto\n126.255.255.255\nB\n128-191\n128.0.0.0\nto\n191.255.255.255\nC\n192-223\n192.0.0.0\nto\n223.255.255.255\nNormally if you are creating a server on your service provider, that service provider will give you an IP address purchased from IANA (via smaller regional registries). But what happens if you want to assign an IP to your laptop or mobile phone of tablet\ninside\nyour home? These devices are not visible directly on the Internet and you are not going to purchase IPs for them.\nHere the\nPrivate IP Address\nranges come to play. The below ranges are called \"private\" addresses and anyone can assign them to any device they want, as long as they are not visible on the open internet.\nrange\nNumber of IPs in this range\n192.168.0-255.0-255\n65K IPs\n172.16-31.0-255.0-255\n1M IPs\n10.0-255.0-255.0-255\n16M IPs\nAny one can use any of these IPs on her devices as long as it is not connected directly to the internet. Have a look at this example:\nXXXXXX\nXXXXXX   XXXXX    XXX    XX\n+--------+                                              X     XXXXX   XXXXXX       XX\n+--------+172.16. |                                             XX                           X\n|        |1.1     |                                             X                            X\n+--------+    |        |                                             X                           XX\n|192.168.|    +--------+                                           XXX  Internet, Only         XX\n|2.100   |         |           +-----------------+              XXXXX   uses Public          XXXX\n|        |         |           |                 |           XXX        IP Addresses        XX\n+--------+    Private Network  | NAT, Translates |Public IP XX                              X\n|             +-----------+ between Public  +---------+X      Devices with Private IPs  XX\n|             |           | and Private IPs | 87.3.91.4 XX     reach the Internet via     X\n+--------+     +--------+      |                 |           XX    the Public IP configured   XX\n|192.168.|     |        |      |                 |            XXX    on their NAT device.     X\n|2.200   |     |172.16. |      +-----------------+               XX                          XX\n|        |     |1.2     |                                      XXX                           X\n+--------+     |        |                                     XX                             XX\n+--------+                                     X                               XX\nX                              XXX\nXX                           XXX\nXX    XXXXXXX     XXXXXXXXXX\nXXXXXX     XXXXXXX\nIn the middle you can see a\nNetwork Address Translation\nor\nNAT\ndevice. It is connected to the Internet using only one public IP (It might be 87.3.91.4). On the left side of the NAT box, there are 4 devices with Private IPs. Each time any of these devices targets an address on the Internet (a public IP), the NAT device will use its own public IP to request that IP and when the answer is ready, will provide it to the\nNatted\ndevice - the device behind the NAT. This way we can create huge networks behind a NAT device. In this scenario, all the devices can reach the Internet but no-one from the Internet can directly reach any of them, directly; Unless we've configured an DMZ.\nSubnetting (and Netmask)\nOK! We have around 4B addresses in IPv4. But what happens if I send a packet to another IP? Say I try to print a document on the\nlocal\nprinter using its private IP as you learned in previous section? Who should listen for this packet? Does the whole Internet passes it hand to hand? Obviously not! Only my\nlocal\nnetwork should be able to receive that packet and in this specific case, only they printer should receive it on its local IP.\nThis is achieved by subnetting. The purpose of subnetting is to create\nsub\n-\nnetworks\nin your IP address range. You have already seen this times and times when talking about your Netmask (the 255.255.255.0 is a famous one) or its CIDR notation which is\n/24\n. Lets have a deeper look.\nCIDR stands for Classless Inter-Domain Routing\nWhen speaking about networks, you have to decide on\nHow many bits of my IP address is going to be shared between all my devices (network)\nHow many bits of my IP address is going to differentiate my devices in this network (hosts)\nFor example if you assign the\n192.168.1.1\nto your router and set the Netmask on\n/24\n, you are claiming 24 (left hand bits) of\n192.168.1.1\nas your Network (so\n192.168.1.\nbecause 245 = 8 * 3) and 8 bits as your Host (last octet). In this network you can assign these IPs to your devices:\n192.168.1.10\n,\n192.168.1.2\n,\n192.168.1.200\nand they will see each other correctly.\nThere are 2 methods to talk about Netmask bits. The CIDR\n/24\nmethod and Decimal Netmask (255.255.255.0) method. In CIDR we are saying how many bits are 1 (the network section of an IP address) and in Decimal method, we are representing these 1 bits in an IP address format. Have a look at the following table:\nDecimal\nCIDR\nBinary\n255.0.0.0\n/8\n11111111.00000000.00000000.00000000\n255.255.0.0\n/16\n11111111.11111111.00000000.00000000\n255.255.255.0\n/24\n11111111.11111111.11111111.00000000\nIn above table I'm just showing the easy ones ;) If you are taking an CCNA exam, you should be able to calculate the Network/Host section for something like /13; which is not difficult now that you know the concept.\nAny time any packets tries to reach any IP in my\nsubnet\n(that is 192.168.1.0-255), my router routes the packets correctly to the destination. But If any devices tries to reach anything out of my subnet (say a public IP), my router will use its NAT functionality (or other methods) to send the packets over the Internet (or the correct network based on the routing table).\nfor a better understanding of subnetting, have a look at\nCisco document\nNetwork and Broadcast Address\nWhen having the IP address and the Network Mask, we can calculate the network address and the broadcast address.\nThe network address is a Logical AND between the IP address and the networkmask. The broadcast address is the network address with a Logical OR when all the host bits are changed to 1.\nConfusing... yes. Because talking about maths is difficult. Say we have the\n192.168.4.12\nas our IP Address and our CIDR is /24 (that is 255.255.255.0). Lets calculate the network and broadcast addresses.\nipcalc\na useful utility you can use.\nIP\n:\n11000000.10101000\n.\n00000100.00001100\n(\n192.168\n.\n4.12\n)\nNetmask\n:\n11111111.11111111\n.\n11111111.00000000\n(\n255.255\n.\n255.0\n)\nNetwork\n:\n11000000.10101000\n.\n00000100.00000000\n(\n192.168\n.\n4.0\n)\nBroadcast\n:\n11000000.10101000\n.\n00000100.11111111\n(\n192.168\n.\n4.255\n)\nBinary to Decimal Conversion\nYou are probably familiar with binary base - it is the basis of anything related to computers. If not I highly recommend you to do a google search and study it from another source since this book assumes you already know it. In short when writing numbers on binary format (base 2), the only used digits are 0 and 1. An easy way for conversion is using the following table to convert 0 and 1s to our\nnormal\ndecimal format. Its enough to know the value of each bit and add up the ones having 1 in them.\n128\n64\n32\n16\n8\n4\n2\n1\nDecimal\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n128\n1\n0\n0\n0\n0\n0\n0\n1\n129\n0\n0\n1\n0\n0\n0\n0\n0\n32\n1\n0\n0\n0\n0\n1\n0\n0\n132\n0\n0\n0\n0\n0\n1\n1\n0\n6\n1\n0\n1\n1\n0\n0\n1\n1\n179\n1\n1\n1\n1\n1\n1\n1\n1\n255\nSo\n11000000.10101000.00000001.00001111\nequals to\n192.168.1.15\n.\nCommunication Protocols\nWhen computers communicate, they use Protocols. This protocols are designed to let computers speak in different ways for fulfilling different needs. Here we will have a look at three of the most popular protocols on the Internet: TCP / UDP / ICMP.\nTCP\nTransmission Control Protocol or TCP is designed to make sure that both parties are\nspeaking\nwith each other without loosing any information. In this protocol the receiver will get anything the sender sends, exactly as it is sent. When you are downloading a program from the Internet, TCP is the best option because you need the file to be downloaded\nexactly\nas it is stored on the server. The TCP communication is kind of like this:\nA- Are you ready?\nB- Yes\nA- Please share with me the file XYZ\nB- Ok. Are you ready?\nA- Yes. Start sending\nB- OK. This is the part 1 of XYZ\nA- OK I got it based on these criteria?\nB- Good. Now is it correct?\nA- Yes. Please send the second part\nB- OK. Are you ready for the second part?\nA- Yes.\nB- Here comes the second part\nA- ...\nB- ...\nAs you can see, TCP needs a lot of communications and spends time (or even retransmits data) to make sure that the receiver is getting the exact correct data available on the server. Strangely in some cases this is not what we are looking for. If you are watching a movie or having a phone call or enjoying a game stream, you prefer to continue watching live in case of a 1s issue in your network. Thats why we also have the UDP.\nUDP\nYou are video-chatting with a friend and network fluctuates. What is a better choice?\nA) retransmitting the missing packets and/or reestablishing the connection and continue the whole conversation with a 2s delay or ...\nB) just show the newer packets we got and continue the live vide-conference and just forget about that 2 second fluctuation (missed data)? If your choice is B, it is better if you use UDP (User Datagram Protocol) for your chat program. UDP is less reliable: the sender sends packets without communicating much and hearing back from the receiver and receiver listens for packets without negotiating the exact details with the sender. It is much faster than TCP but you can not be sure that 100% of packets will be received by the B party.\nICMP\nInternet Control Messaging Protocol or ICMP is a specific purpose protocol used to check the connectivity of the servers by the\nping\ncommand. The first computer just tells \"are you there?\" and the second will answer \"yes I'm here\". Have a look at this practical example:\n[jadi@funlife ~]$ ping google.com\nPING google.com (173.194.32.135) 56(84) bytes of data.\n64 bytes from 173.194.32.135: icmp_seq=1 ttl=48 time=239 ms\n64 bytes from 173.194.32.135: icmp_seq=2 ttl=48 time=236 ms\n^C\n--- google.com ping statistics ---\n2 packets transmitted, 2 received, 0% packet loss, time 1001ms\nrtt min/avg/max/mdev = 236.707/238.174/239.642/1.546 ms\nAs you can see, we are pinging (send ICMP packets) to a server and it answers are back (replying to our ICMP packets).\nICMP is used for network troubleshooting and DOES NOT transfers user data\nPort\nAny computer has an address but there are many programs running on that computer. By using an IP address you can tell the Internet the destination of your packets but how can you decide which program on that computer should answer to your packet? We know that a computer with the address of 5.1.23.1 has a webserver and a ftp server on it but how can we reach it and tell it \"i want the index.html of your webserver\" or \"deliver me the XYZ file from your FTP server\"? This is done using PORTs. Ports are numbers where a program LISTENS to. For example port 80 is reserved for webservers so if I connect to 5.1.23.1:80 I'm sure that I'm talking with the webserver. In the same way, when the file transport protocol (FTP) starts, it starts listening on port 20 & 21 and if I use a FTP client to reach that computer, I will automatically connect to port 21 which is reserved for FTP.\nDifferent ports can use different transmission protocols (UDP or TCP). The default port of some protocols are as follow. These are very important and most admins know them.\nport\nusage\n20, 21\nFTP (one data, one control)\n22\nSSH\n23\nTelnet\n25\nSMTP\n53\nDNS\n80\nHTTP\n110\nPOP3\n123\nNTP\n139\nNetBIOS\n143\nIMAP\n161, 162\nSNMP\n389\nLDAP\n443\nHTTPS\n465\nSMTPS\n636\nLDAPS\n993\nIMAPS\n995\nPOP3S\nNote that in this table all ports above 400 ends with S, which stands for\nS\necure\nYou can find all of the above ports and many many others in\n/etc/services\nIPv6\nWe saw that there are only around 4B IPv4s available. Just consider that we are around 7B people on the planet earth so there is not even enough IP for every person on IPv4 range. Add to this the latest demands from all the mobile phones, cars, fridges, clocks, TVs, camera, ...! They all want to be on the Internet; this is called Internet Of Things. What should be done? We saw one solution called NAT but the permanent solution is a new version of the IP; IP version 6. In version 6 IPs are not limited to 4 octets anymore.\nEach IPv6 has 128 bits. They are grouped in 8, 16 bit groups and are normally written in Hex (base 16) format. A sample IPv6 address looks like\n2001:0db8:0a0b:12f0:0000:0000:0000:0001\nand it can be shortened to\n2001:db8:a0b:12f0::1\n. Here we have decimal numbers from\n0000\nto\nFFFF\nand\n8\nfields which are separated by\n:\n.\nIPv6 provides us around 3.4*(10^38) IPs which is enough for whatever we can imagine at the moment. Just imagine that it can allocate 2^52 addresses for every observable star in the known universe.\n← 108.4 Manage printers and printing\nChapter List\n109.2 Persistent network configuration →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "109.2 Persistent network configuration",
    "url": "https://linux1st.com./1092-persistent-network-configuration.html",
    "extracted_title": "",
    "content": "Weight: 4\nCandidates should be able to view, change and verify configuration settings on client hosts.\nKey Knowledge Areas\nUnderstand basic TCP/IP host configuration\nConfigure ethernet and wi-fi network configuration using NetworkManager\nAwareness of systemd-networkd\nTerms and Utilities\n/etc/hostname\n/etc/hosts\n/etc/nsswitch.conf\n/etc/resolv.conf\nnmcli\nhostnamectl\nifup\nifdown\nIntro\nAs we saw in the previous section, every PC, server, laptop, phone, .. should have an IP configuration (IP, Netmask, Default gateway, DNS, ..) to work properly in the network. This can be done in various ways. Some devices like laptops are changing their network all the time and should be able to keep up with the changes. Some servers remain in the same location (physical and network wise) all their life and should persist this configuration after restarts, outages, upgrade and HW changes.\nIn this section we will see how this can be achieved in modern GNU/Linux systems.\nNetwork Interface\nThe NIC (or Network Interface Card) is the physical network hardware in your computer. This can be the chip+antenna in your mobile phone or an Ethernet Card connected to a network cable on your PC.\nIn older systems, these were called things like\neth0\n,\neth1\n,\neth2\n, ... where 0, 1 & 2 were decided by the kernel - mostly based on the order of loading the drivers. In recent Linux machines the NICs are called by\nwlan0\n,\neno1\n,\nens1\n,\nenp3s2\nand such. This is based on some more concrete data like being an\nwireless\nor\nethernet\n, PCI (\nens\n) or bus like (\nenp\n).\nThe\nip\ncommand can show these:\n➜  ~ ip link show\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000\nlink/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n2: wlp108s0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP mode DORMANT group default qlen 1000\nlink/ether 00:bb:60:97:6b:07 brd ff:ff:ff:ff:ff:ff\n3: docker0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default\nlink/ether 02:42:75:d3:e6:ff brd ff:ff:ff:ff:ff:ff\nThe\nlo\nis a virtual network adapter called the\nloopback\ndevice. It is always there and points to \"this device or 127.0.0.1 as IPv4 calls it\".\nConfiguring NICs\nIn older distributions, the\nifconfig\nwas used to check / configure the IP settings on NICs. Have a look:\n$ ifconfig\nenp0s25: flags=4099<UP,BROADCAST,MULTICAST>  mtu 1500\nether f0:de:f1:62:c5:73  txqueuelen 1000  (Ethernet)\nRX packets 0  bytes 0 (0.0 B)\nRX errors 0  dropped 0  overruns 0  frame 0\nTX packets 0  bytes 0 (0.0 B)\nTX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\ndevice interrupt 20  memory 0xd1500000-d1520000\nlo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536\ninet 127.0.0.1  netmask 255.0.0.0\ninet6 ::1  prefixlen 128  scopeid 0x10<host>\nloop  txqueuelen 1  (Local Loopback)\nRX packets 560719  bytes 339937974 (324.1 MiB)\nRX errors 0  dropped 0  overruns 0  frame 0\nTX packets 560719  bytes 339937974 (324.1 MiB)\nTX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\nwlp3s0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\ninet 192.168.1.35  netmask 255.255.255.0  broadcast 192.168.1.255\ninet6 fe80::8ea9:82ff:fe7b:8906  prefixlen 64  scopeid 0x20<link>\nether 8c:a9:82:7b:89:06  txqueuelen 1000  (Ethernet)\nRX packets 2325385  bytes 2629859900 (2.4 GiB)\nRX errors 0  dropped 0  overruns 0  frame 0\nTX packets 2023796  bytes 510997240 (487.3 MiB)\nTX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\nIt is also possible to use\nifconfig\nto change the network configurations, but you should have root access:\n$  sudo ifconfig enp0s25 192.168.42.42\npassword for jadi:\n$ ifconfig enp0s25\nenp0s25: flags=4099<UP,BROADCAST,MULTICAST>  mtu 1500\ninet 192.168.42.42  netmask 255.255.255.0  broadcast 192.168.42.255\nether f0:de:f1:62:c5:73  txqueuelen 1000  (Ethernet)\nRX packets 0  bytes 0 (0.0 B)\nRX errors 0  dropped 0  overruns 0  frame 0\nTX packets 0  bytes 0 (0.0 B)\nTX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\ndevice interrupt 20  memory 0xd1500000-d1520000\n$\nIn case you want to change the netmask of an interface, do\nifconfig eth0 netmask 255.255.0.0\nor as most of us used to do, issue both in one command:\n# ifconfig eth0 192.168.42.42 netmask 255.255.255.0\nIt is also possible to turn the interfaces\nup\nand\ndown\n(on and off) using predefined configurations by:\n$ sudo ifconfig enp0s25 down\n[sudo] password for jadi:\n$ ifconfig\nlo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536\ninet 127.0.0.1  netmask 255.0.0.0\ninet6 ::1  prefixlen 128  scopeid 0x10<host>\nloop  txqueuelen 1  (Local Loopback)\nRX packets 562273  bytes 340257228 (324.4 MiB)\nRX errors 0  dropped 0  overruns 0  frame 0\nTX packets 562273  bytes 340257228 (324.4 MiB)\nTX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\nwlp3s0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\ninet 192.168.1.35  netmask 255.255.255.0  broadcast 192.168.1.255\ninet6 fe80::8ea9:82ff:fe7b:8906  prefixlen 64  scopeid 0x20<link>\nether 8c:a9:82:7b:89:06  txqueuelen 1000  (Ethernet)\nRX packets 2330388  bytes 2634026235 (2.4 GiB)\nRX errors 0  dropped 0  overruns 0  frame 0\nTX packets 2027352  bytes 511549072 (487.8 MiB)\nTX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\nAs you can see, downing the interface removed it from the list of active interfaces, using switch\n-a\nwill tell the\nifconfig\nto show ALL interfaces, even if they are down.\nIn many systems there are\nifup\nand\nifdown\ncommands directly to up and down interfaces easily. They work just like\nifup eth0\n.\nThese predefined configs are located at\n/etc/network/interfaces\non Debian based machines and at\n/etc/sysconfig/network-scripts/\nin RPM based distro.\nThis is a sample of such file on a RedHat based distro:\n$ cat /etc/sysconfig/network-scripts/ifcfg-eth0\nDEVICE=eth0\nONBOOT=yes\nTYPE=Ethernet\nIPADDR=192.168.1.10\nNETMASK=255.255.255.0\nDNS1=4.2.2.4\nOn RPM systems, the default gateway is configured via the below file:\ncat /etc/sysconfig/network\nNETWORKING=yes\nHOSTNAME=lpictest\nGATEWAY=192.168.1.1\nOn Debian based systems (including Ubuntu) the main configuration file for network interfaces is\n/etc/network/interfaces\n. This one file has the configuration for all the interfaces. Have a look:\nauto lo\niface lo inte loopback\nauto eth0\n#ifconfig eth0 inet dhcp\niface eth0 inet static\naddress 192.168.1.10\nnetmask 255.255.255.0\ngateway 192.168.1.1\ndns-nameservers 4.2.2.4\nip\nRecent distributions are mostly using the\nip\ncommand. This command can do lots of things including and not limited to showing and configuring the IP addresses, netmasks, default gateways & routing rules.\nip\naddr\nadd\n172.19.1.10\n/\n24\ndev\neth2\n#\ntemporary\nadding\nan\nIP\nip\naddr\nshow\neth2\nip\naddr\ndel\n172.19.1.10\n/\n24\ndev\neth2\n#\ndeleting\nan\nIP\naddress\nip\nlink\nset\neth2\nup\n#\nbrining\na\nNIC\nup\nip\nroute\nshow\nip\nroute\nadd\ndefault\nvia\n192.168.1.1\n#\nadd\ndefault\ngateway\nPlease note that above commands do temporary changes which will be lost after restarting the\nNetworkManager\nservice. If you need permanent changes, it should be done using the configuration files or Network Manager interfaces.\nNetworkManager &\nnmcli\nIn recent years,\nNetworkManager\nservices has gained a lot of popularity. This service can \"watch\" the status of network and various configuration and configure the network cards (specially the wifi ones) accordingly. This is what makes our laptop connected whenever we open it in an area with a known WiFi or ask about the password if we want to connect to a new network or assign IP addresses as soon as we connect the cable to our Ethernet card. This IP assignment might happen via the \"permanent IP configuration\" on your device or a protocol called DHCP. When using DHCP (Dynamic Host Configuration Protocol), your computer asks a DHCP server (say your home's wifi router) about the IP, Netmask, Default gateway, DNS and other stuff and sets them.\nBy default, NetworkManager  daemon controls the networks which are not mentioned in\n/etc/network/interfaces\n. This service is running in the background and controls the NICs which are not configured there. Various frontend GUI (graphical user interface) or TUI (textual user interface. try\nnmtui\n) or CLI (command line interfaces) programs exists to control or configure the NetworkManager daemon. If you are using a Desktop Linux, you've probably already used / know one (say the network manager applet). Here I will show you how to use the\nnmcli\nfrom the command line.\nWe always call the\nnmcli\nwith one of it various commands, here is a list:\nCommand\nUsage\ngeneral\nNetworkManager’s general status and operations.\nnetworking\nOverall networking control.\nradio\nNetworkManager radio switches.\nconnection\nControlling the connection\ndevice\nDevices controlled by NetworkManager\nagent\nsecret or polkit agent\nmonitor\nMontor the changes\nFor example, we can check the current status with the\ngeneral\ncommand:\n➜  ~ nmcli general\nSTATE      CONNECTIVITY  WIFI-HW  WIFI     WWAN-HW  WWAN\nconnected  full          enabled  enabled  missing  enabled\nOr if you want to check the devices or list of Wi-Fi connections:\n➜  ~ nmcli device\nDEVICE            TYPE      STATE                   CONNECTION\nwlp108s0          wifi      connected               Sharm Bar Sansoor 5\ndocker0           bridge    connected (externally)  docker0\nlo                loopback  connected (externally)  lo\np2p-dev-wlp108s0  wifi-p2p  disconnected            --\n➜  ~ nmcli device wifi\nIN-USE  BSSID              SSID                 MODE   CHAN  RATE        SIGNAL  BARS  SECURITY\n6C:AD:EF:38:13:38  AxLTE                Infra  3     270 Mbit/s  84      ▂▄▆█  WPA2\n00:E0:4C:93:1D:B8  Lanat Be Sansoorchi  Infra  6     130 Mbit/s  59      ▂▄▆_  WPA2\n*\n24:F5:A2:42:DE:CE  Sharm Bar Sansoor 5  Infra  36    540 Mbit/s  47      ▂▄__  WPA2\n30:A2:20:DD:8B:54  AvinaAmin            Infra  7     270 Mbit/s  29      ▂___  WPA1 WPA2\n30:85:A9:8C:71:2C  bahram               Infra  11    65 Mbit/s   29      ▂___  WPA2\nTo connect to a Wi-Fi network, you're a do:\nnmcli\ndevice\nwifi\nconnect\nAxLTE\npassword\nAFunkyPassword\nFancy Names for Computers\nhostname\nRemembering IP addresses are easy for robots but not for humans. Thats why we have \"hostname\"s. A hostname is a like a contact list where you just tell \"call Jadi\" and the system known my phone number. If you check your\n/etc/hostname\n, you will see your machines name there. Although you can change it temporarily (or permanently). The command is\nhostnamectl\n.\n[funlap ~]# hostnamectl set-hostname mycoolmachine\n[funlap ~]# hostname\nmycoolmachine\n[funlap ~]# cat /etc/hostname\nmycoolmachine\n[funlap ~]# bash\n[mycoolmachine ~]#\nOr you can change it as\ntransient\n, which is a temporary change using the\n--transient\nswitch.\nIt is also possible to define a \"pretty\" name for your computer so other systems might show it in their interfaces more nicely:\n[mycoolmachine ~]# hostnamectl --pretty set-hostname \"LAN Shared Storage\"\n[mycoolmachine ~]# hostnamectl status\nStatic hostname: mycoolmachine\nPretty hostname: LAN Shared Storage\nIcon name: computer-convertible\nChassis: convertible\nMachine ID: 0b126c4b6f4347168140eaa6202ce8be\nBoot ID: 675eff37f42648c6bdea31177596557f\nOperating System: Manjaro Linux\nKernel: Linux 6.1.38-1-MANJARO\nArchitecture: x86-64\nHardware Vendor: Dell Inc.\nHardware Model: Latitude 7390 2-in-1\nFirmware Version: 1.30.0\n/etc/hosts\nThis file contains a list of IPs and their corresponding names, including your own computers.\n[\nmycoolmachine\n~\n]#\nhead\n-\n20\n/\netc\n/\nhosts\n##\n#\nHost\nDatabase\n#\n#\nlocalhost\nis\nused\nto\nconfigure\nthe\nloopback\ninterface\n#\nwhen\nthe\nsystem\nis\nbooting\n.\nDo\nnot\nchange\nthis\nentry\n.\n##\n127\n.\n0\n.\n0\n.\n1\nlocalhost\nfunlife\ndb\n255\n.\n255\n.\n255\n.\n255\nbroadcasthost\n::\n1\nlocalhost\n##\n#\nHost\nDatabase\n#\n#\nlocalhost\nis\nused\nto\nconfigure\nthe\nloopback\ninterface\n#\nwhen\nthe\nsystem\nis\nbooting\n.\nDo\nnot\nchange\nthis\nentry\n.\n##\n198\n.\n74\n.\n56\n.\n50\njobs\n.\njadi\n.\nnet\n192\n.\n168\n.\n1\n.\n22\namoledtesting\n67\n.\n217\n.\n170\n.\n72\nvps\nSo when you need to reach a machine by its name, your OS will now which IP to reach.\nDNS configuration\nDNS (which stands for Domain Name System) is a server which translates human-readable domain names (or more technically, text based domain names) to the corresponding IP addresses. You have to configure your computer to use a DNS so it will know which IP to contacted if you wanted to reach\nlinux1st.com\n(and\ndonate\nmaybe).\nThis configuration can be found in\n/etc/resolve.conf\n.\nnameserver 192.168.1.1\nnameserver 4.2.2.4\ndomain jadi.net\nsearch jadi.net company.com\nHere I'm telling my computer to contact the DNS on my home network (192.168.1.1) or a DNS located at 4.2.2.4 if it needed to translate an address to an IP.\nThe\ndomain\nconfiguration sets a local domain name so the machines in this domain will be able to use a short name (tv, instead of tv.jadi.net) and the\nsearch\nconfig does kind the same and tells the resolver to search for\ntv.jadi.net\nand\ntv.company.com\nif it was trying to resolve\ntv\n.\nnsswitch\nThe\n/etc/nsswitch.conf\nfile is used to configure which services are to be used to determine information such as hostnames, password files, and group files. Mine is\n# cat /etc/nsswitch.conf\n# Begin /etc/nsswitch.conf\npasswd: files\ngroup: files\nshadow: files\npublickey: files\nhosts: files dns myhostname\nnetworks: files\nprotocols: files\nservices: files\nethers: files\nrpc: files\nnetgroup: files\n# End /etc/nsswitch.conf\nSo if someone wants to check a password, the system will try the password\nfile\non the system. Or if they want to check an ip address of a hostname, my config says\nhosts: files dns myhostname\nso the computer first tries the files (/etc/hosts) and then goes for DNS. If I reverse these and change the line to\nhosts:      dns files\nAny resolve request will be sent to a DNS server first and the /etc/hosts will be used only if the DNS servers answers \"I don't know!\"\n← 109.1 Fundamentals of internet protocols\nChapter List\n109.3 Basic network troubleshooting →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "109.3 Basic network troubleshooting",
    "url": "https://linux1st.com./1093-basic-network-troubleshooting.html",
    "extracted_title": "",
    "content": "Weight: 4\nCandidates should be able to troubleshoot networking issues on client hosts.\nKey Knowledge Areas\nManually configure network interfaces, including viewing and changing the configuration of network interfaces using iproute2.\nManually configure routing, including viewing and changing routing tables and setting the default route using iproute2.\nDebug problems associated with the network configuration.\nAwareness of legacy\nnet-tools\ncommands.\nTerms and Utilities\nip\nhostname\nss\nping\nping6\ntraceroute\ntraceroute6\ntracepath\ntracepath6\nnetcat\nifconifg\nnetstat\nroute\nTroubleshooting network problems\nWhen a network related problem is reported to you, you have to take a lot of steps to find out where the root cause of the problem is. For example, if the report says \"I can not open webpages\", you have to start from checking if the network interface has an ip, if it is up, its the routing is OK and if the DNS works fine and if everything is OK, you have to try reaching a server on the Internet via\nping\ncommand and if you see any problems, you have to use\ntraceroute\nto see where your traffic is going wrong. In this lesson, we will review these basic steps.\nifconfig & ip\nAs you already know,\nifconfig\nand\nip\ncommands can be used to check the IP address of your interfaces. If a network card is going to work, it needs a correct IP address and netmask. Let me check my own computer to see it has an IP address:\n[jadi@debian ~]$ ip addr show\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default\nlink/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\ninet 127.0.0.1/8 scope host lo\nvalid_lft forever preferred_lft forever\ninet6 ::1/128 scope host\nvalid_lft forever preferred_lft forever\n2: wlp3s0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc pfifo_fast state DOWN group default qlen 1000\nlink/ether f0:de:f1:62:c5:73 brd ff:ff:ff:ff:ff:ff\n3: enp0s25: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000\nlink/ether 8c:a9:82:7b:89:06 brd ff:ff:ff:ff:ff:ff\ninet 192.168.1.35/24 brd 192.168.1.255 scope global dynamic wlp3s0\nvalid_lft 254836sec preferred_lft 254836sec\ninet6 fe80::8ea9:82ff:fe7b:8906/64 scope link\nvalid_lft forever preferred_lft forever\n[jadi@debian ~]$\n[jadi@debian ~]$\n[jadi@debian ~]$\n[jadi@debian ~]$ ifconfig\nenp0s25   Link encap:Ethernet  HWaddr f0:de:f1:62:c5:73\ninet addr:192.168.1.35  Bcast:192.168.1.255  Mask:255.255.255.0\ninet6 addr: fe80::8ea9:82ff:fe7b:8906/64 Scope:Link\nUP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\nRX packets:231586 errors:0 dropped:0 overruns:0 frame:0\nTX packets:200220 errors:0 dropped:0 overruns:0 carrier:0\ncollisions:0 txqueuelen:1000\nRX bytes:198053888 (198.0 MB)  TX bytes:51583154 (51.5 MB)\nlo        Link encap:Local Loopback\ninet addr:127.0.0.1  Mask:255.0.0.0\ninet6 addr: ::1/128 Scope:Host\nUP LOOPBACK RUNNING  MTU:65536  Metric:1\nRX packets:221752 errors:0 dropped:0 overruns:0 frame:0\nTX packets:221752 errors:0 dropped:0 overruns:0 carrier:0\ncollisions:0 txqueuelen:0\nRX bytes:150859909 (150.8 MB)  TX bytes:150859909 (150.8 MB)\nBoth commands show that my IP address is OK. This is assigned to may be the Wi-Fi modem and 192.168.1.35 as IP and 255.255.255.0 looks reasonable.\nPlease note that you can get a full help on\nip\nusing the\nman ip\nor get manual of a specific section using the\nman ip-address\n(or any other subcommand)\nping & ping6\nThis is the most common tool when troubleshooting a network problem. It sends an ICMP packet to a destination and if it gets back an answer, will inform you about not only it, but all the stats. Below, I will check my default route and will try to ping it. You should always be able to ping your default router, although sometimes paranoid sysadmins block the ICMP on the network and although you are connected, you won't get back answers.\njadi@debian:~$ ip route show\ndefault via 192.168.70.1 dev enp0s1\n172.17.0.0/16 dev docker0 proto kernel scope link src 172.17.0.1 linkdown\n192.168.70.0/24 dev enp0s1 proto kernel scope link src 192.168.70.2\njadi@debian:~$ ping 192.168.70.1\nPING 192.168.70.1 (192.168.70.1) 56(84) bytes of data.\n64 bytes from 192.168.70.1: icmp_seq=1 ttl=64 time=1.11 ms\n64 bytes from 192.168.70.1: icmp_seq=2 ttl=64 time=0.855 ms\n^C\n--- 192.168.70.1 ping statistics ---\n2 packets transmitted, 2 received, 0% packet loss, time 1002ms\nrtt min/avg/max/mdev = 0.855/0.984/1.113/0.129 msec\nI can ping my gateway, but is it possible to reach a server on the Internet using its IP address. To find the answer, let's ping 4.2.2.4; it is very well known server on the Internet and many people use it to check their IP connectivity.\n[jadi@debian ~]$ ping 4.2.2.4\nPING 4.2.2.4 (4.2.2.4) 56(84) bytes of data.\n64 bytes from 4.2.2.4: icmp_seq=1 ttl=50 time=108 ms\n64 bytes from 4.2.2.4: icmp_seq=2 ttl=50 time=111 ms\n64 bytes from 4.2.2.4: icmp_seq=3 ttl=50 time=113 ms\n^C\n--- 4.2.2.4 ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2003ms\nrtt min/avg/max/mdev = 108.160/111.233/113.717/2.338 ms\nThis is also working fine. But can I ping google.com too?\n[jadi@debian ~]$ ping google.com\nping: unknown host google.com\nAha! We found the problem. In this case I have a correct IP address on my machine, I can ping my default gateway and I can ping 4.2.2.4, but I can not ping google.com. The error message is \"unknown host\". This means my computer can not translate google.com to its IP address; this is a DNS issue:\n[jadi@debian ~]$ cat /etc/resolv.conf\n# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)\n#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN\nNo wonder, we had problems with surfing the WWW. There is no active DNS in my computer so no one will be able to reach sites by their domain names! This should be fixed by adding a DNS to my configuration file.\nrouting problems\nIn some situations you can not reach the Internet (say 4.2.2.4 or 8.8.8.8) but you can ping your gateway. Have a look:\n[jadi@debian ~]$ ping 8.8.8.8\nconnect: Network is unreachable\n[jadi@debian ~]$ ping 192.168.1.1\nPING 192.168.1.1 (192.168.1.1) 56(84) bytes of data.\n64 bytes from 192.168.1.1: icmp_seq=1 ttl=254 time=3.03 ms\n64 bytes from 192.168.1.1: icmp_seq=2 ttl=254 time=3.31 ms\n^C\n--- 192.168.1.1 ping statistics ---\n2 packets transmitted, 2 received, 0% packet loss, time 1001ms\nrtt min/avg/max/mdev = 3.039/3.174/3.310/0.146 ms\nWhat is going on here? Let's see, what clues do I have:\n1) I can reach the gateway.\n2) when asking for the Internet, my computer does not know what to do.\nIn this case the\ndefault gateway\nis missing: the computer does not know what to do if a packet is outside its network mask. You know that we can set the default gateway using the\n/etc/network/interfaces\nconfig file, but there is also a\nroute\n(or the newer\nip route\nsubcommand) to show and change the routing configurations on the fly.\nRoutes added or changed via\nip route\n(or\nroute\n) will be lost after a reboot! Permanent configurations should come from configuration files.\nLets check our current routing state using\nroute\ncommand as root.\njadi@debian:~$ ip route show\ndefault via 192.168.70.1 dev enp0s1\n172.17.0.0/16 dev docker0 proto kernel scope link src 172.17.0.1 linkdown\n192.168.70.0/24 dev enp0s1 proto kernel scope link src 192.168.70.2\njadi@debian:~$ sudo ip route del default\n[sudo] password for jadi:\njadi@debian:~$ ip route show\n172.17.0.0/16 dev docker0 proto kernel scope link src 172.17.0.1 linkdown\n192.168.70.0/24 dev enp0s1 proto kernel scope link src 192.168.70.2\njadi@debian:~$ ping 4.2.2.4\nping: connect: Network is unreachable\njadi@debian:~$ ip route add default via 192.168.70.1\nRTNETLINK answers: Operation not permitted\njadi@debian:~$ sudo ip route add default via 192.168.70.1\njadi@debian:~$ ping 4.2.2.4\nPING 4.2.2.4 (4.2.2.4) 56(84) bytes of data.\n64 bytes from 4.2.2.4: icmp_seq=1 ttl=55 time=316 ms\n64 bytes from 4.2.2.4: icmp_seq=2 ttl=55 time=434 ms\n^C\n--- 4.2.2.4 ping statistics ---\n2 packets transmitted, 2 received, 0% packet loss, time 1002ms\nrtt min/avg/max/mdev = 316.253/375.282/434.311/59.029 ms\nWe were able to ping the Internet after adding a default gateway using\nip route\ncommand. It is important to know that we can define even more routes and control exactly where our packets should go based on their destinations.\ntracepath & traceroute\nThis is a more advanced troubleshooting tool. It is like pinging all the servers between you and your destination one by one and see where our packets go wrong. Lets check how I reach google.com.\njadi@debian:~$ traceroute 4.2.2.4\ntraceroute to 4.2.2.4 (4.2.2.4), 30 hops max, 60 byte packets\n1  192.168.70.1 (192.168.70.1)  0.619 ms *  0.673 ms\n2  10.192.0.1 (10.192.0.1)  421.898 ms  728.657 ms  728.617 ms\n3  162.221.202.253 (162.221.202.253)  728.597 ms  728.564 ms  728.552 ms\n4  * * *\n5  207.35.48.241 (207.35.48.241)  728.289 ms  728.265 ms  728.251 ms\n6  agg2-vancouverbg_5-2-0.net.bell.ca (64.230.122.250)  728.344 ms agg1-vancouverbg_5-2-0.net.bell.ca (64.230.122.248)  612.097 ms  922.055 ms\n7  * * *\n8  bx6-seattle_et-0/0/13_ae1.net.bell.ca (64.230.76.157)  921.662 ms  921.635 ms  921.566 ms\n9  ae96.edge6.Seattle1.Level3.net (4.16.2.13)  921.511 ms  921.372 ms  921.317 ms\n10  * * ae6.4.edge2.SanJose1.level3.net (4.69.220.185)  920.786 ms\n11  d.resolvers.level3.net (4.2.2.4)  601.295 ms  921.003 ms  920.970 ms\nOn the first step (1) I reach my own router. On the 2nd step, I'm at my ISPs local network and then will reach 162.blah.blah.blah. You can see in some cases the traceroute were able to do a\nreverse DNS lookup\nand find the hostname of the IPs and show them. After 11 hops, I reached my destination. The traceroute is a very useful tool in troubleshooting network and routing issues or checking the status of your network and paths.\nIn some routers, the ping traffic is blocked, and you will see\n* * *\nat some steps because those servers are blocking ICMP traffic.\nThere is another command called\ntracepath\nwhich is very similar to\ntraceroute\n. For the LPIC1 level, they are essentially the same!\nss & netstat\nThese commands can show a wide range of information about our network. The\nss\nis the newer one and\nnetstat\nis the older one. The two commands are replaceable in most cases and does the same things and even have similar option in most use cases. You can use the\nnetstat\nto check your routing table:\njadi@debian:~$ netstat -nr\nKernel IP routing table\nDestination     Gateway         Genmask         Flags   MSS Window  irtt Iface\n0.0.0.0         192.168.70.1    0.0.0.0         UG        0 0          0 enp0s1\n172.17.0.0      0.0.0.0         255.255.0.0     U         0 0          0 docker0\n192.168.70.0    0.0.0.0         255.255.255.0   U         0 0          0 enp0s1\nOr use the\nss\nto see which port is in the LISTENING mode:\njadi@debian:~$ ss -na | grep LISTEN | grep tcp\ntcp   LISTEN 0      128                                       127.0.0.1:631              0.0.0.0:*\ntcp   LISTEN 0      100                                         0.0.0.0:25               0.0.0.0:*\ntcp   LISTEN 0      128                                         0.0.0.0:22               0.0.0.0:*\ntcp   LISTEN 0      100                                            [::]:25                  [::]:*\ntcp   LISTEN 0      128                                            [::]:22                  [::]:*\ntcp   LISTEN 0      128                                           [::1]:631                 [::]:*\nThe\n-na\nswitch will show all the open ports (including sockets) and here I'm checking only for the tcp ones in the LISTEN status.\nIn these switches,\n-n\nstands for\nnumeric\n,\n-a\nstands for\nall ports\nand\n-r\nstands for\nroutes\n.\nA super common combination is the\n-tulpn\noption set:\njadi\n@debian\n:\n~\n$\nss\n-\ntulpn\nNetid\nState\nRecv\n-\nQ\nSend\n-\nQ\nLocal\nAddress\n:\nPort\nPeer\nAddress\n:\nPort\nProcess\nudp\nUNCONN\n0\n0\n0.0.0.0\n:\n68\n0.0.0.0\n:\n*\nudp\nUNCONN\n0\n0\n0.0.0.0\n:\n631\n0.0.0.0\n:\n*\nudp\nUNCONN\n0\n0\n0.0.0.0\n:\n58120\n0.0.0.0\n:\n*\nudp\nUNCONN\n0\n0\n0.0.0.0\n:\n5353\n0.0.0.0\n:\n*\nudp\nUNCONN\n0\n0\n[\n::\n]\n:\n39822\n[\n::\n]\n:\n*\nudp\nUNCONN\n0\n0\n[\n::\n]\n:\n5353\n[\n::\n]\n:\n*\ntcp\nLISTEN\n0\n128\n127.0.0.1\n:\n631\n0.0.0.0\n:\n*\ntcp\nLISTEN\n0\n100\n0.0.0.0\n:\n25\n0.0.0.0\n:\n*\ntcp\nLISTEN\n0\n128\n0.0.0.0\n:\n22\n0.0.0.0\n:\n*\ntcp\nLISTEN\n0\n100\n[\n::\n]\n:\n25\n[\n::\n]\n:\n*\ntcp\nLISTEN\n0\n128\n[\n::\n]\n:\n22\n[\n::\n]\n:\n*\ntcp\nLISTEN\n0\n128\n[\n::1\n]\n:\n631\n[\n::\n]\n:\n*\nnetcat\nThe\nnc\n(or netcat) utility is used for just about anything under the sun involving TCP, UDP, or UNIX-domain sockets. It can open TCP connections, send UDP packets, listen on arbitrary TCP and UDP ports, do port scanning, and deal with both IPv4 and IPv6. Unlike\ntelnet\n,\nnc\ncan be used easily in the scripts and separates error messages onto standard error instead of sending them to standard output, as telnet does with some. This is a very capable command, and it is enough for you to be familiar with its general concept.\nHere I'm creating a tcp listener on port 1337:\njadi\n@debian\n:\n~\n$\nnc\n-\nl\n1337\nAnd here I'm opening a connection to that port and sending some data:\njadi\n@debian\n:\n~\n$\nnc\nlocalhost\n1337\nAre\nyou\nenjoying\nthe\nLPIC\n?\nAnd the message should be visible on the listening\nnc\n.\ndig\nThe\ndig\ncommand is a DNS lookup tool. If you are having a problem with a domain name, you can check how it is being resolved to IPs; and by whom.\n[jadi@debian ~]$ dig google.com\n; <<>> DiG 9.9.5-11ubuntu1.3-Ubuntu <<>> google.com\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 50032\n;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0\n;; QUESTION SECTION:\n;google.com.            IN    A\n;; ANSWER SECTION:\ngoogle.com.        293    IN    A    216.58.214.46\n;; Query time: 120 msec\n;; SERVER: 4.2.2.4#53(4.2.2.4)\n;; WHEN: Fri Apr 01 22:00:05 IRDT 2016\n;; MSG SIZE  rcvd: 44\nYou can see that SERVER 4.2.2.4 is resolving google.com to 216.58.214.46.\n← 109.2 Persistent network configuration\nChapter List\n109.4 Configure client side DNS →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "109.4 Configure client side DNS",
    "url": "https://linux1st.com./1094-configure-client-side-dns.html",
    "extracted_title": "",
    "content": "Weight: 2\nCandidates should be able to configure DNS on a client host.\nKey Knowledge Areas\nQuery remote DNS servers.\nConfigure local name resolution and use remote DNS servers.\nModify the order in which name resolution is done.\nDebug errors related to name resolution\nAwareness of systemd-resolved\nTerms and Utilities\n/etc/hosts\n/etc/resolv.conf\n/etc/nsswitch.conf\nhost\ndig\ngetent\nDNS\nWe already know a lot about Domain Name System; A service which translates domain names (say yahoo.com) to IP addresses (say 206.190.36.45). A DNS server is used when you ping a server using its domain name. You have seen the config files for DNS and should know that the actual DNS server which is being used by the computer can be checked / changed (temporarily) from\n/etc/resolv.conf\n:\n$ cat /etc/resolv.conf\n# Generated by NetworkManager\nnameserver 192.168.1.1\nnameserver 4.2.2.4\n$ ping x.org\nPING x.org (131.252.210.176) 56(84) bytes of data.\n64 bytes from annarchy.freedesktop.org (131.252.210.176): icmp_seq=1 ttl=45 time=338 ms\n64 bytes from  annarchy.freedesktop.org (131.252.210.176): icmp_seq=2 ttl=45 time=333 ms\n^C\n--- x.org ping statistics ---\n2 packets transmitted, 2 received, 0% packet loss, time 1000ms\nrtt min/avg/max/mdev = 333.088/335.612/338.136/2.524 ms\nhost\nThis is a simple program to lookup DNS queries. This is a sample with no arguments:\n$\nhost\nkernel.org\nkernel.org\nhas\naddress\n139\n.178.84.217\nkernel.org\nhas\nIPv6\naddress\n2604\n:1380:4641:c500::1\nkernel.org\nmail\nis\nhandled\nby\n10\nsmtp1.kernel.org.\nkernel.org\nmail\nis\nhandled\nby\n10\nsmtp2.kernel.org.\nkernel.org\nmail\nis\nhandled\nby\n10\nsmtp3.kernel.org.\nAs you can see, the\nhost\ncommand returns all the records it can find for a specific domain. In this case it returns IPv4 (A), IPv6 (AAAA) and two Mail (MX) records.\nif you want to check only a specific record, you can provide it via\n-t\nswtich. So the\n-t A\nwill only return back the IPv4 records.\ndig\nThe\ndig\ntool is specifically build to query DNS servers. If you want to find out where x.org points to, you can do:\n$ dig x.org\n; <<>> DiG 9.10.3-P4-RedHat-9.10.3-12.P4.fc23 <<>> x.org\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 7483\n;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 512\n;; QUESTION SECTION:\n;x.org.                IN    A\n;; ANSWER SECTION:\nx.org.            1625    IN    A    131.252.210.176\n;; Query time: 35 msec\n;; SERVER: 192.168.1.1#53(192.168.1.1)\n;; WHEN: Sun Apr 17 12:45:02 IRDT 2016\n;; MSG SIZE  rcvd: 50\nAs you can see,\ndig\ndid an\nip lookup\nfor\nx.org\nand told me that its IP is 131.252.210.176. The\n1625\nis called the\nTTL\nor\nTime To Live\nand show how many seconds this answer will be considered valid in cache. This command also tells us which server is used to query the answer (last 4 lines) and when and how long it took.\nThere is also a way to tell\ndig\ncommand what server it should use as the DNS vi\n@<DNS-SERVER>\n:\n$ dig @8.8.8.8 google.com\n; <<>> DiG 9.10.3-P4-RedHat-9.10.3-12.P4.fc23 <<>> @8.8.8.8 google.com\n; (1 server found)\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 24313\n;; flags: qr rd ra; QUERY: 1, ANSWER: 11, AUTHORITY: 0, ADDITIONAL: 1\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 512\n;; QUESTION SECTION:\n;google.com.            IN    A\n;; ANSWER SECTION:\ngoogle.com.        112    IN    A    173.194.32.133\ngoogle.com.        112    IN    A    173.194.32.136\ngoogle.com.        112    IN    A    173.194.32.132\ngoogle.com.        112    IN    A    173.194.32.129\ngoogle.com.        112    IN    A    173.194.32.137\ngoogle.com.        112    IN    A    173.194.32.130\ngoogle.com.        112    IN    A    173.194.32.134\ngoogle.com.        112    IN    A    173.194.32.135\ngoogle.com.        112    IN    A    173.194.32.128\ngoogle.com.        112    IN    A    173.194.32.131\ngoogle.com.        112    IN    A    173.194.32.142\n;; Query time: 238 msec\n;; SERVER: 8.8.8.8#53(8.8.8.8)\n;; WHEN: Sun Apr 17 13:03:38 IRDT 2016\n;; MSG SIZE  rcvd: 215\nHere I have asked dig to use\n8.8.8.8\nas its DNS and query\ngoogle.com\n. You can see that I've got more than one answer (actually much more than one answer). My computer can randomly contact any of those IPs to reach the\ngoogle.com\n. In other words, google.com is using more than one server/IP and\n8.8.8.8\nprovides all of them when queried for that domain.\n/etc/hosts\nThis file contains IP addresses and their correspondive names. This is kind of an static name resolution on your computer. Let's have a look:\n$ head /etc/hosts\n127.0.0.1    funlife localhost.localdomain    localhost clickadu.com\n::1    funlife localhost6.localdomain6    localhost6\n10.159.32.155 nsproxy\n172.16.12.134 linuxclass wonderland\n193.40.12.135 salma\n87.106.233.90 gratis.vps\n192.168.59.231 mass1\nThis file can be changed by root and will map some domain names (localhost, mass1, gratis.vps, ...) to some IP addresses. If I ping\nmass1\non this computer.. lets see:\n$ dig mass1\n; <<>> DiG 9.10.3-P4-RedHat-9.10.3-12.P4.fc23 <<>> mass1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NXDOMAIN, id: 39464\n;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 1\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 512\n;; QUESTION SECTION:\n;mass1.                IN    A\n;; AUTHORITY SECTION:\n.            600    IN    SOA    a.root-servers.net. nstld.verisign-grs.com. 2016041700 1800 900 604800 86400\n;; Query time: 516 msec\n;; SERVER: 192.168.1.1#53(192.168.1.1)\n;; WHEN: Sun Apr 17 13:15:07 IRDT 2016\n;; MSG SIZE  rcvd: 109\n$ ping mass1\nPING mass1 (192.168.59.231) 56(84) bytes of data.\nFrom 85-15-16-103.shatel.ir (85.15.16.103) icmp_seq=1 Packet filtered\nFrom 85-15-16-103.shatel.ir (85.15.16.103) icmp_seq=2 Packet filtered\nMy computer pings 192.168.59.231 when I go for mass1 even when the DNS can not find this name because that is defined in\n/etc/hosts\n.\nnsswitch\nThe\n/etc/nsswitch.conf\nfile tells the system about the priority of lookups, password checks, .... Lets have a look to make it clear:\n$ cat /etc/nsswitch.conf\n#\n# /etc/nsswitch.conf\n#\n# An example Name Service Switch config file. This file should be\n# sorted with the most-used services at the beginning.\n#\n# The entry '[NOTFOUND=return]' means that the search for an\n# entry should stop if the search in the previous entry turned\n# up nothing. Note that if the search failed due to some other reason\n# (like no NIS server responding) then the search continues with the\n# next entry.\n#\n# Valid entries include:\n#\n#    nisplus            Use NIS+ (NIS version 3)\n#    nis            Use NIS (NIS version 2), also called YP\n#    dns            Use DNS (Domain Name Service)\n#    files            Use the local files\n#    db            Use the local database (.db) files\n#    compat            Use NIS on compat mode\n#    hesiod            Use Hesiod for user lookups\n#    [NOTFOUND=return]    Stop searching if not found so far\n#\n# To use db, put the \"db\" in front of \"files\" for entries you want to be\n# looked up first in the databases\n#\n# Example:\n#passwd:    db files nisplus nis\n#shadow:    db files nisplus nis\n#group:     db files nisplus nis\npasswd:     files sss\nshadow:     files sss\ngroup:      files sss\n#hosts:     db files nisplus nis dns\nhosts:      files mdns4_minimal [NOTFOUND=return] dns myhostname mymachines\n# Example - obey only what nisplus tells us...\n#services:   nisplus [NOTFOUND=return] files\n#networks:   nisplus [NOTFOUND=return] files\n#protocols:  nisplus [NOTFOUND=return] files\n#rpc:        nisplus [NOTFOUND=return] files\n#ethers:     nisplus [NOTFOUND=return] files\n#netmasks:   nisplus [NOTFOUND=return] files\nbootparams: nisplus [NOTFOUND=return] files\nethers:     files\nnetmasks:   files\nnetworks:   files\nprotocols:  files\nrpc:        files\nservices:   files sss\nnetgroup:   files sss\npublickey:  nisplus\nautomount:  files sss\naliases:    files nisplus\nOn the DNS line I have\nhosts: files mdns4_minimal [NOTFOUND=return] dns myhostname mymachines\n. This means when the system wants to find the IP address of a name, it first go for the\nfiles\n(/etc/hosts) and then for m\ndns\n4_minimal and then\ndns\nand so on. In this case if I add the\nfacebook.com\nto my\n/etc/hosts\nlike this:\n127.0.0.1 facebook.com\nAnd then point my browser to facebook.com, my computer will try to connect to the webserver on 127.0.0.1 instead of the real IP of Facebook.\ngetent\nThe\ngetent\ncommand is a utility to get entries from Name Service Switch libraries (read /etc/nsswitch.conf). If you want to check what is the config of your hosts, you can do as follow.\n$ getent hosts\n127.0.0.1       funlife localhost.localdomain localhost clickadu.com\n127.0.0.1       funlife localhost6.localdomain6 localhost6\n10.159.32.155   nsnproxy\n172.16.12.134   linuxclass wonderland\n193.40.12.135   salma\n87.106.233.90   gratisvps\n192.168.59.231  mass1\n192.168.59.232  mass2\n192.168.59.233  mass3\n192.168.59.234  mass4\n192.168.59.235  mass5\n192.168.59.236  mass6\n192.168.59.237  mass7\n192.168.59.238  mass8\n192.168.59.239  mass9\n127.0.0.1       frctlstartupfailure localtodoer localdeliv\n127.0.0.1       frctlmeth\nsystemd-resolved\nIt should be noted that the\nsystemd\nprovides a DNS called\nsystemd-resolved\n. It listens for DNS requests on\n127.0.0.53\nand answers back after consulgint the\n/etc/systemd/resolv.conf\nor\n/etc/resolv.conf\n.\nRead more\nHere\nabout\nsystemd-resolved\n.\n← 109.3 Basic network troubleshooting\nChapter List\n110.1 Perform security administration tasks →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "110.1 Perform security administration tasks",
    "url": "https://linux1st.com./1101-perform-security-administration-tasks.html",
    "extracted_title": "",
    "content": "Weight: 3\nCandidates should know how to review system configuration to ensure host security in accordance with local security policies.\nKey Knowledge Areas\nAudit a system to find files with the suid/sgid bit set.\nSet or change user passwords and password aging information.\nBeing able to use nmap and netstat to discover open ports on a system.\nSet up limits on user logins, processes and memory usage.\nDetermine which users have logged in to the system or are currently logged in.\nBasic sudo configuration and usage.\nTerms and Utilities\nfind\npasswd\nfuser\nlsof\nnmap\nchage\nnetstat\nsudo\n/etc/sudoers\nsu\nusermod\nulimit\nwho, w, last\nUsers\nsudo\nvs\nsu\nWe've used\nsudo\nand\nsu\nin practically all the chapters and now is the time to have a closer look!\nsu\nswitches you to some other account; a \"substitute user identity\". You get a new prompt with the new user account after successfully\nsu\ning to that account:\njadi@funlife ~$ whoami\njadi\njadi@funlife ~$ su -\nPassword:\nroot@funlife:~# whoami\nroot\nroot@funlife:~# su jadi -\njadi@funlife /root$ whoami\njadi\njadi@funlife /root$ exit\nexit\nroot@funlife:~# whoami\nroot\nroot@funlife:~# exit\nlogout\njadi@funlife ~$ whoami\njadi\njadi@funlife ~$\nNote that when running\nsu\nyou have to\nprovide the root password\nto become root; or any other users password to become that user!\nOn the other hand, sudo asks for your own password and runs the command you gave it, with the root privileges. So\nsudo ls\nruns the ls command with the root privileges after asking for\nyour password\n. Obviously you should have the\nsudo right\nto issue sudo. This is defined in\n/etc/sudoers\nfile:\n$ sudo cat /etc/sudoers\n#\n# This file MUST be edited with the 'visudo' command as root.\n#\n# Please consider adding local content in /etc/sudoers.d/ instead of\n# directly modifying this file.\n#\n# See the man page for details on how to write a sudoers file.\n#\nDefaults    env_reset\nDefaults    mail_badpass\nDefaults    secure_path=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\n# Host alias specification\n# User alias specification\n# Cmnd alias specification\n# User privilege specification\nroot    ALL=(ALL:ALL) ALL\n# Members of the admin group may gain root privileges\n%admin ALL=(ALL) ALL\n# Allow members of group sudo to execute any command\n%sudo    ALL=(ALL:ALL) ALL\n# See sudoers(5) for more information on \"#include\" directives:\n#includedir /etc/sudoers.d\nNote the 2 important lines:\n- How root gets the right to run all the commands:\ntxt\nroot    ALL=(ALL:ALL) ALL\n- And how the sudo and admin groups get rights to run commands as root:\n```txt\n# Members of the admin group may gain root privileges\n%admin ALL=(ALL) ALL\n# Allow members of group sudo to execute any command\n%sudo    ALL=(ALL:ALL) ALL\n```\nThe\nALL:ALL\nmeans these users can run as any user and any group. The last ALL tells the sudo that these users/groups can run ALL commands. It is possible to put\n/bin/ping\nin the last part to tell sudo that this user can run only ping as root, Like below:\ntxt\nusername ALL=(ALL) /bin/ping\nThe /etc/sudoers file is very important and breaking it will make major problems. to prevent you from adding un-interpretable lines in that file, the\nvisudo\ncommand should be used instead of\nvi /etc/sudoers\n. This tool will check your edits to make sure that sudo command can understand them.\nNow we know what\nsudo su -\nmeans. The sudo tells the system to run the\nsu -\ncommand with the root access. It asks your password and runs the\nsu -\nas the root if you have sudo access. The\nsu\ncommands changes your user to root and\n-\nswitch load the root environment variables. This way you can become root using your own password via running\nsu\nwith\nsudo\n.\nchecking the users in the system\nIf you need to check who is in your system (and to some extend what they are doing) you can use these commands:\n$  w\n22:03:37 up 3 days,  5:33, 13 users,  load average: 1.48, 1.12, 1.19\nUSER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT\njadi     tty7     :0               Wed16    3days  2:30m  1.96s /sbin/upstart --user\njadi     pts/18   :0               Wed16    3:04m  1:02   1:02  /usr/bin/python manage.py runserver 0.0.0.0:8000\njadi     pts/19   :0               Wed16    1:11m  0.35s  0.35s /bin/bash\nroot     tty2                      Wed16    3days  0.07s  0.03s -bash\njadi     pts/21   :0               08:41   45:37   0.06s  0.06s /bin/bash\njadi     pts/23   :0               Thu11   46:49   0.25s  0.23s ssh startups\njadi     pts/21   funlife          Fri22   45:37   0.06s  0.06s /bin/bash\njadi     pts/25   :0               10:17   31:37   0.07s  5.81s /usr/bin/python /usr/bin/x-terminal-emulator\njadi     pts/26   :0               21:39    0.00s  0.07s  0.00s w\njadi     pts/27   :0               21:55    8:09   0.01s  0.01s /bin/bash\nYou have a line for each logged in users (every single shell window is a separated login).\nAnother useful command is\nwho\n. Lets check it:\n$ who\njadi     tty7         2016-06-01 16:30 (:0)\njadi     pts/17       2016-06-01 16:30 (funlife)\njadi     pts/2        2016-06-01 16:32 (:0)\njadi     pts/18       2016-06-01 16:32 (:0)\njadi     pts/19       2016-06-01 16:33 (:0)\nroot     tty2         2016-06-01 16:36\njadi     pts/21       2016-06-04 08:41 (:0)\njadi     pts/22       2016-06-01 18:37 (funlife)\njadi     pts/23       2016-06-02 11:41 (:0)\njadi     pts/21       2016-06-03 22:22 (funlife)\njadi     pts/25       2016-06-04 10:17 (:0)\njadi     pts/26       2016-06-04 21:39 (:0)\njadi     pts/27       2016-06-04 21:55 (:0)\nAs you can see both these commands tell you when was the time that the user logged into the system but does not show the logged out people (because they are not on the system anymore!). If you need that data use the\nlast\ncommand:\n~$ last | head\njadi     pts/27       :0               Sat Jun  4 21:55    gone - no logout\njadi     pts/26       :0               Sat Jun  4 21:39    gone - no logout\njadi     pts/26       :0               Sat Jun  4 18:55 - 19:42  (00:46)\njadi     pts/25       :0               Sat Jun  4 10:17    gone - no logout\njadi     pts/26       :0               Sat Jun  4 09:25 - 09:26  (00:00)\njadi     pts/26       :0               Sat Jun  4 09:25 - 09:25  (00:00)\njadi     pts/25       :0               Sat Jun  4 08:52 - 09:27  (00:35)\njadi     pts/21       :0               Sat Jun  4 08:41    gone - no logout\njadi     pts/21       funlife          Fri Jun  3 22:22 - 08:41  (10:18)\njadi     pts/21       :0               Fri Jun  3 18:44 - 19:47  (01:03)\nthere is a way to check the failed logins too:\nlast -f /var/log/btmp\nPassword Management\nThe\npasswd\ncommand is used to update / change the password of the users.\n➜\npasswd\nChanging\npassword\nfor\njadi\n.\nCurrent\npassword\n:\nNew\npassword\n:\nRetype\nnew\npassword\n:\npasswd\n:\npassword\nupdated\nsuccessfully\n➜\nsudo\npasswd\njadi\nNew\npassword\n:\nBAD\nPASSWORD\n:\nThe\npassword\nis\nshorter\nthan\n8\ncharacters\nRetype\nnew\npassword\n:\npasswd\n:\npassword\nupdated\nsuccessfully\nYou can also use this command to check the status of a user:\n➜  ~ passwd -S\njadi P 2023-09-14 0 99999 7 -1\nIt says my user is jadi, I have a valid\nP\nassword (could have been\nL\nocked or\nNP\nfor no password), my last password change time, minimum and maximum age of my password, warning period before password expiry & allowed password inactivity in days. The\npasswd\ncommand can also be used to\n--lock\n(or\n-l\n) a user,\n--expire\n(or\n-e\n) a user or\n--unlock\n(or\n-u\n) a user.\nAs you've already see in the user management section, to change the user shell, home, ... you should use the\nusermod\ncommand\nBut to properly check/change the password age and configurations of users, the\nchage\nutility should be used. Run it with\n-l\nfor\nlist\n:\n➜  ~ chage -l jadi\nLast password change                    : Sep 14, 2023\nPassword expires                    : never\nPassword inactive                   : never\nAccount expires                     : never\nMinimum number of days between password change      : 0\nMaximum number of days between password change      : 99999\nNumber of days of warning before password expires   : 7\nor without any switches for interactive mode:\n➜\n~\nchage\njadi\nchage\n:\nPermission\ndenied\n.\n➜\n~\nsudo\nchage\njadi\nChanging\nthe\naging\ninformation\nfor\njadi\nEnter\nthe\nnew\nvalue\n,\nor\npress\nENTER\nfor\nthe\ndefault\nMinimum\nPassword\nAge\n[\n0\n]:\nMaximum\nPassword\nAge\n[\n99999\n]:\nLast\nPassword\nChange\n(\nYYYY\n-\nMM\n-\nDD\n)\n[\n2023\n-\n09\n-\n14\n]:\nPassword\nExpiration\nWarning\n[\n7\n]:\n3\nPassword\nInactive\n[\n-\n1\n]:\nAccount\nExpiration\nDate\n(\nYYYY\n-\nMM\n-\nDD\n)\n[\n-\n1\n]:\nYou can also use switches to directly change values. Say\n-m\nfor --mindays or\n-M\nfor --maxdays.\nsuid and guid\nWe've already covered\nsuid\n; In short, when the suid bit is set on an executable file, the user will run with the access level of the owner of the file (and not the runner). Have a look at the\nping\ncommand:\n➜\n~\ntype\npasswd\npasswd\nis\n/\nusr\n/\nbin\n/\npasswd\n➜\n~\nls\n-\nltrh\n/\nusr\n/\nbin\n/\npasswd\n-\nrwsr\n-\nxr\n-\nx\n1\nroot\nroot\n63\nK\nNov\n23\n2022\n/\nusr\n/\nbin\n/\npasswd\nThe\ns\non the access rights part, will run the file using the owners (here its root) access; regardless of whom is running it. This is needed because the\npasswd\ncommands needs to be able to change the passwords in the\nshadow\nfile even if a normal user runs it. But what happens if someone changes the suid of the vi command? let's see who owns the\nvi\n:\njadi@funlife ~$ type vi\nvi is /usr/bin/vi\njadi@funlife ~$ ls -ltrh /usr/bin/vi\nlrwxrwxrwx 1 root root 20 Jun  1 12:52 /usr/bin/vi -> /etc/alternatives/vi\nThe\nvi\nis owned by root, so if the suid bit is set, vi will always be run as root! In that case, anybody will be able to edit any file! So if you are a hacker and get a temporary root, its enough to copy vi somewhere (with a different unsuspicious name) and give it the\nsuid\naccess. Now you will be able to run it with normal users and modify system files when needed! That's why a system admin should be able to check her systems executable files with\nsuid\nbit if needed:\n$sudo find / -perm -u+s\nHere, the\n-perm -u+s\ntells\nfind\nto search for file which has\nsuid\non\nuser\n. For more info, check the\nman find\nand search for\nperm\n.\nsame applies for guid. if the guid is set, the file will be run with access of its group\nuser limits\nThe resources on a Linux machine can be managed for users by the\nulimit\ncommand. It is part of the PAM system. If you want to check the limits on the system run:\n~$ ulimit -a\ncore file size          (blocks, -c) 0\ndata seg size           (kbytes, -d) unlimited\nscheduling priority             (-e) 0\nfile size               (blocks, -f) unlimited\npending signals                 (-i) 47457\nmax locked memory       (kbytes, -l) 64\nmax memory size         (kbytes, -m) unlimited\nopen files                      (-n) 1024\npipe size            (512 bytes, -p) 8\nPOSIX message queues     (bytes, -q) 819200\nreal-time priority              (-r) 0\nstack size              (kbytes, -s) 8192\ncpu time               (seconds, -t) unlimited\nmax user processes              (-u) 47457\nvirtual memory          (kbytes, -v) unlimited\nfile locks                      (-x) unlimited\nand you can change them like this:\n$ ulimit -t 1\nThis will limit the CPU TIME of any process to 1 second. If you use more than that, the process will be killed automatically (by PAM module). Please note that your walls clock time is different than CPU time. To see how much CPU time a process uses run it like this:\n$ time firefox\nChanging the ulimit as we did is a temporary thing. It only persists in that specific shell.\nTo change the ulimits system-wide:\n$ cat /etc/security/limits.conf\n# /etc/security/limits.conf\n#\n#Each line describes a limit for a user in the form:\n#\n#<domain>        <type>  <item>  <value>\n#\n#Where:\n#<domain> can be:\n#        - a user name\n#        - a group name, with @group syntax\n#        - the wildcard *, for default entry\n#        - the wildcard %, can be also used with %group syntax,\n#                 for maxlogin limit\n#        - NOTE: group and wildcard limits are not applied to root.\n#          To apply a limit to the root user, <domain> must be\n#          the literal username root.\n#\n#<type> can have the two values:\n#        - \"soft\" for enforcing the soft limits\n#        - \"hard\" for enforcing hard limits\n#\n#<item> can be one of the following:\n#        - core - limits the core file size (KB)\n#        - data - max data size (KB)\n#        - fsize - maximum filesize (KB)\n#        - memlock - max locked-in-memory address space (KB)\n#        - nofile - max number of open files\n#        - rss - max resident set size (KB)\n#        - stack - max stack size (KB)\n#        - cpu - max CPU time (MIN)\n#        - nproc - max number of processes\n#        - as - address space limit (KB)\n#        - maxlogins - max number of logins for this user\n#        - maxsyslogins - max number of logins on the system\n#        - priority - the priority to run user process with\n#        - locks - max number of file locks the user can hold\n#        - sigpending - max number of pending signals\n#        - msgqueue - max memory used by POSIX message queues (bytes)\n#        - nice - max nice priority allowed to raise to values: [-20, 19]\n#        - rtprio - max realtime priority\n#        - chroot - change root to directory (Debian-specific)\n#\n#<domain>      <type>  <item>         <value>\n#\n#*               soft    core            0\n#root            hard    core            100000\n#*               hard    rss             10000\n#@student        hard    nproc           20\n#@faculty        soft    nproc           20\n#@faculty        hard    nproc           50\n#ftp             hard    nproc           0\n#ftp             -       chroot          /ftp\n#@student        -       maxlogins       4\n# End of file\nsoft limits can be changed by the user but hard limits are the real stop points.\nOpen Ports\nnetstat, fuser and lsof\nOn module 109.1 we talked about ports. Ports are like wholes in our systems used by programs to listen to the outside world. If I'm running a web server on my computer I should have a port open so people can ask that server \"please show me your index.html\". Many malwares open ports to let the attacker to communicate with them. It is important to check your computer for open ports time to time. The older command for this is the\nnetstat\n; using the\n-na\nor\n-ap\nor\n-tuna\nswitch.. I'm sure\ntuna\nis easy to remember if you have every enjoyed a tuna sandwich.\njadi@funlife ~$ netstat -tuna\nActive Internet connections (servers and established)\nProto Recv-Q Send-Q Local Address           Foreign Address         State\ntcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN\ntcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN\ntcp        0      0 127.0.1.1:53            0.0.0.0:*               LISTEN\ntcp        0      0 127.0.0.1:9050          0.0.0.0:*               LISTEN\ntcp       25      0 192.168.59.9:49934      192.168.59.192:139      CLOSE_WAIT\ntcp        0      0 127.0.0.1:60228         127.0.0.1:1080          ESTABLISHED\ntcp        0      0 192.168.1.35:55324      159.203.148.169:8385    ESTABLISHED\ntcp        0      0 127.0.0.1:59590         127.0.0.1:1080          ESTABLISHED\ntcp        0      0 127.0.0.1:60212         127.0.0.1:1080          ESTABLISHED\ntcp        0      0 192.168.1.35:54220      159.203.148.169:8385    ESTABLISHED\ntcp        0      0 127.0.0.1:57186         127.0.0.1:1080          ESTABLISHED\ntcp        0      0 192.168.1.35:49574      173.194.122.231:443     ESTABLISHED\ntcp        0      0 127.0.0.1:59002         127.0.0.1:1080          ESTABLISHED\nudp        0      0 0.0.0.0:54502           0.0.0.0:*\nudp        0      0 0.0.0.0:5353            0.0.0.0:*\nudp        0      0 0.0.0.0:5353            0.0.0.0:*\nAll the\nLISTEN\nports are servers; they are LISTENING for new incoming connections. The\nESTABLISHED\nconnections are the active connections between your computer and another computer. In these tables\n0.0.0.0\ndictates\nany address\nor\nany interface\n.\nOther useful tools are\nss\nfor the same purpose as you saw on chapter 109 and\nlsof\nand\nfuser\n. The\nlsof\nis already discussed in previous sections. It shows the open files on the system and having in mind that\neverything in Linux is a file or a process\nyou can conclude that this command should be able to display open connections too; and you are right:\n# lsof -i\nCOMMAND     PID       USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME\nprivoxy     806    privoxy    4u  IPv4   16130      0t0  TCP funlife:8118 (LISTEN)\ncups-brow   903       root    8u  IPv4   17477      0t0  UDP *:ipp\nmysqld      971      mysql   19u  IPv4   20875      0t0  TCP funlife:mysql (LISTEN)\ntor        1038 debian-tor    6u  IPv4   19155      0t0  TCP funlife:9050 (LISTEN)\ndnsmasq    1260     nobody   11u  IPv4 1910037      0t0  UDP *:18666\nadb        1278       jadi    5u  IPv4  579541      0t0  TCP funlife:5037 (LISTEN)\nchromium-  2891       jadi   88u  IPv4  813611      0t0  TCP 192.168.1.35:45702->do-13.lastpass.com:https (ESTABLISHED)\nchromium-  2891       jadi  126u  IPv4 1907389      0t0  TCP 192.168.1.35:50642->ntt-2.lastpass.com:https (ESTABLISHED)\nchromium-  2891       jadi  133u  IPv4 1909733      0t0  TCP 192.168.1.35:50644->ntt-2.lastpass.com:https (ESTABLISHED)\nchromium-  2891       jadi  268u  IPv4  785289      0t0  TCP 192.168.1.35:60736->lf-in-f188.1e100.net:5228 (ESTABLISHED)\npython     4925       jadi    4u  IPv4  658287      0t0  TCP funlife:8000 (LISTEN)\nTelegram   4943       jadi   39u  IPv4  773463      0t0  TCP 192.168.1.35:44732->149.154.175.50:https (ESTABLISHED)\ndhclient   9984       root    6u  IPv4  787885      0t0  UDP *:bootpc\nnginx     11095       root    6u  IPv4   17998      0t0  TCP *:http (LISTEN)\nnginx     11099   www-data    7u  IPv6   17999      0t0  TCP *:http (LISTEN)\nchrome    14264       jadi  114u  IPv4  788089      0t0  UDP *:mdns\nchrome    14264       jadi  126u  IPv4 1872872      0t0  TCP funlife:60370->funlife:socks (ESTABLISHED)\nchrome    14264       jadi  138u  IPv4 1908382      0t0  TCP funlife:60408->funlife:socks (ESTABLISHED)\nWow! This command shows the command, PID, user running it and source and destination IP and tells of if this is a LISTENING or STABLISHED connection.\nIf you want to check which process is using port 80, you can grep the output of any above commands or simply use the\nfuser\n(file user; who uses this file) command to find all the PIDs related to that specific port. A common switch is\n-v\nwhich goes verbose.\n➜  bin sudo fuser 22/tcp -v\nUSER        PID ACCESS COMMAND\n22/tcp:              root          1 F.... systemd\nnmap\nnmap\nis the one of the hackers beloved tools! You can nmap a server to find out about a lot of data about that server:\n# nmap localhost\nStarting Nmap 7.01 ( https://nmap.org ) at 2016-06-04 21:32 IRDT\nNmap scan report for localhost (127.0.0.1)\nHost is up (0.0000070s latency).\nrDNS record for 127.0.0.1: funlife\nNot shown: 995 closed ports\nPORT     STATE SERVICE\n80/tcp   open  http\n1080/tcp open  socks\n3306/tcp open  mysql\n8000/tcp open  http-alt\n9050/tcp open  tor-socks\nNmap done: 1 IP address (1 host up) scanned in 1.66 seconds\nroot@funlife:~#\nIn the most basic form, nmap checks all the open ports from 1 to 1000 and prints the results. There are a lot of switches to find other information about the hosts and they are used by every single hacker who wants to examine a servers status.\nDo a quick search for\nnmap oneliners\nand you will find dozens of cool commands and tricks for it. Its so cool that its website\nhas a section about nmap in movies\n!\n← 109.4 Configure client side DNS\nChapter List\n110.2 Setup host security →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "110.2 Setup host security",
    "url": "https://linux1st.com./1102-setup-host-security.html",
    "extracted_title": "",
    "content": "Weight: 3\nCandidates should know how to set up a basic level of host security.\nKey Knowledge Areas\nAwareness of shadow passwords and how they work.\nTurn off network services not in use.\nUnderstand the role of TCP wrappers.\nTerms and Utilities\n/etc/nologin\n/etc/passwd\n/etc/shadow\n/etc/xinetd.d/\n/etc/xinetd.conf\nsystemd.socket\n/etc/inittab\n/etc/init.d/\n/etc/hosts.allow\n/etc/hosts.deny\nshadow passwords\nThe\n/etc/passwd\nis already discussed. It contains the passwords of the users but there is a logical problem: if a user should be able to change her own password, he should have access to this file and if this is the case, he can see other people's passwords. This is not interesting even when the passwords are hashed (shown as a more complex form using a one way function).\n$ ls -ltrh /etc/passwd\n-rw-r--r-- 1 root root 2.5K Jun  5 19:14 /etc/passwd\nTo prevent this the\n/etc/shadow\nfile is introduced. In modern systems, we only show a\n*\nat the location of the password in\n/etc/passwd\nand store the real password in\n/etc/shadow\nwhich has a very limited file access:\njadi@funlife ~$ grep jadi /etc/passwd\njadi:x:1000:1000:jadi,,,:/home/jadi:/bin/bash\njadi@funlife ~$ grep jadi /etc/shadow\ngrep: /etc/shadow: Permission denied\njadi@funlife ~$ sudo grep jadi /etc/shadow\n[sudo] password for jadi:\njadi:$6$bp01DBX.$I6dt4pz8GeXJl6asgPeKhSdepf40bgepTz8zwB3HFmN56SdcsxjTETdZAmRt17biwMYOI7SoGFOXssHqeNFgw/:16963:0:99999:7:::\njadi@funlife ~$ sudo ls -ltrh /etc/shadow\n-rw-r----- 1 root shadow 1.5K Jun 11 17:36 /etc/shadow\n/etc/nologin\nThe\n/etc/nologin\nis a cool file! If you create and write something in it, the content will be shown to any person who tries to login into the system and with that file the login attempt will fail. It is useful for maintenance time. Delete this file and the users will be able to login again.\nthe root user will be able to login even in the presence of /etc/nologin\nPlease also note that there is a dummy shell called\nnologin\nand you can set it as shell for any user you want to prevent from being able to login into the system via a shell. Note that such a user still has an active account and will be able to use other services (say email or ftp) but wont be able to enter the shell.\nsudo usermod -s /sbin/nologin baduser\nsuper-servers\nA super-server or sometimes called a service dispatcher is a type of daemon running mostly on Unix-like systems for security and resource management reasons. It listens for requests its configured for and starts the target services when needed to answer the requests. This adds a layer of security to your communications and also lets some of the services to be inactive when we do not need them. You can see a super server or superdaemon as a TCP (and UDP or even ICMP) wrapper around other services.\nFew GNU/Linuxes use TCP wrappers like\nxinetd\nthese days but you might see it in some installations or traces of it in your\n/etc/xinet.d\n. If needed it is also possible to configure the\nsystemd.socket\nas a TCP wrapper for other services.\nHere is a sample\nxinetd\nconfiguration file:\nservice telnet\n{\ndisable         = no\nflags           = REUSE\nsocket_type     = stream\nwait            = no\nuser            = root\nserver          = /usr/sbin/in.telnetd\nlog_on_failure  += USERID\nno_access       = 10.0.1.0/24\nlog_on_success  += PID HOST EXIT\naccess_times    = 09:45-16:15\n}\nIf we change the\ndisable\nto\nyes\nand restart the xinetd, the telnet daemon will start running. There are a few files to control xinetd related files.\nAs mentioned,\nxinetd\nis replaced by the\nsystemd.socket\nunits. Some services like\nssh\nand\ncups\nmight have a socket unit alongside the service unit in your distribution. In this case its enough to stop & disable the\nssh.service\nand start the\nssh.docekt\ninstead. Now the\nsystemd.socekt\nis acting as a wrapper around the port 22 and IF someones needs the service, starts the ssh server to answer.\n/etc/hosts.allow\n&\n/etc/hosts.deny\nThese two files will allow or deny access from specific hosts. Its logic is like cron.deny and cron.allow. If something is allowed, everything else is denied but if you add something to the\n/etc/hosts.deny\n, only that specific thing is denied (and every other thing is allowed).\njadi@funlife ~$ cat /etc/hosts.allow\n# /etc/hosts.allow: list of hosts that are allowed to access the system.\n#                   See the manual pages hosts_access(5) and hosts_options(5).\n#\n# Example:    ALL: LOCAL @some_netgroup\n#             ALL: .foobar.edu EXCEPT terminalserver.foobar.edu\n#\n# If you're going to protect the portmapper use the name \"rpcbind\" for the\n# daemon name. See rpcbind(8) and rpc.mountd(8) for further information.\n#\nvsftpd: 10.10.100.\nHow the\nvsftpd\nknows about this file? Because it uses the\nlibwrap\nlibrary in its source and the libwrap understands the wrapper tools. You can check this claim by searching for\nlibwrap\nin the list of libraries\nvsftpd\nuses:\n➜  ~ ldd /usr/sbin/vsftpd | grep libwrap\nlibwrap.so.0 => /lib/x86_64-linux-gnu/libwrap.so.0 (0x00007fb293921000)\nHere the\nvsftpd\nservice is only allowed from 10.10.100.* . It is possible to use\nALL\nas the service name to allow or deny ALL services.\nafter changing this file, xinetd should be restarted\nAs mentioned, super servers are not being used anymore and most distributions use standalone services.\nRemoving unused services\nBased on your distribution, you can check the running services using the\nservice\nor\nsystemctl\ncommand. If you are using the SysV init system (older distros mainly) or you have the compatibility tools installed, do as follow:\n~ sudo service --status-all\n[ - ]  alsa-utils\n....\n[ + ]  ufw\n[ + ]  unattended-upgrades\n[ + ]  uuidd\n[ + ]  vpn-unlimited-daemon\n[ + ]  vsftpd\n[ - ]  whoopsie\n[ - ]  x11-common\nOn a RedHat based machine, you can stop a service via:\nsudo chkconfig vsfptd off\nand On debian machines:\nsudo update-rc.d vsftpd remove\nIf you are using the systemd, do as follow to check and stop / disable a service:\nsystemctl\nlist\n-\nunits\n--\nstate\nactive\n--\ntype\nservice\nsystemctl\nstatus\nsystemctl\ndisable\nvsftpd\n.\nservice\n--\nnow\nPlease also remember that on older systems, we used to have all the Init scripts in\n/etc/init.d\nand\n/etc/rcX.d\nfolders. There were also a\n/etc/inittab\nfile which was a configuration file for initializing a Linux system using SysV . It contains lines in this format:\nThis would tell the init system to do\nactions\non the\nprocess\non a specific\nrunlevel\n. For example:\nid\n:\nrunlevel\n:\naction\n:\nprocess\nIt tells the init to start (and respawn if killed), the\nmingetty tty1\ncommand on runlevels\n2\n,\n3\n,\n4\n, &\n5\n.\n1\n:\n2345\n:\nrespawn\n:/\nsbin\n/\nmingetty\ntty1\nAs the final note, this was the most important line in the\ninittab\nfile because it tells the init to start in run level 3.\nid\n:\n3\n:\ninitdefault\n:\nFor more information about\nrunlevels\n, please refer to\nChapter 101.3\n.\n← 110.1 Perform security administration tasks\nChapter List\n110.3 Securing data with encryption →\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  },
  {
    "title": "110.3 Securing data with encryption",
    "url": "https://linux1st.com./1103-securing-data-with-encryption.html",
    "extracted_title": "",
    "content": "Weight: 4\nThe candidate should be able to use public key techniques to secure data and communication.\nKey Knowledge Areas\nPerform basic OpenSSH 2 client configuration and usage.\nUnderstand the role of OpenSSH 2 server host keys.\nPerform basic GnuPG configuration, usage and revocation.\nUse GPG to encrypt, decrypt, sign and verify files.\nUnderstand SSH port tunnels (including X11 tunnels).\nTerms and Utilities\nssh\nssh-keygen\nssh-agent\nssh-add\n~/.ssh/id_rsa and id_rsa.pub\n~/.ssh/id_dsa and id_dsa.pub\n~/.ssh/id_ecdsa and id_ecdsa.pub\n~/.ssh/id_ed25519 and id_ed25519.pub\n/etc/ssh/ssh_host_rsa_key and ssh_host_rsa_key.pub\n/etc/ssh/ssh_host_dsa_key and ssh_host_dsa_key.pub\n/etc/ssh/ssh_host_ecdsa_key and ssh_host_ecdsa_key.pub\n/etc/ssh/ssh_host_ed25519_key and ssh_host_ed25519_key.pub\n~/.ssh/authorized_keys\nssh_known_hosts\ngpg\ngpg-agent\n~/.gnupg/\nKey Pairs\nIn traditional cryptography, the symmetric keys were used: both parties had a shared password. The data were encrypted with that password and then decrypted using the same password. But in 1976, a new idea came into the view: what if we create 2 keys (lets call them the Private Key and the Public Key) in a way that only people who has the Public Key, be able to open whatever which is encrypted with the Private key? The scientists made this a reality and nowawayds, most of our encryptions are being done via these\nKey Pair\ns. When generating a key pair, we generate two keys using a computer algorithm in the way that any message which is encrypted using one, can be opened only using the other. These are called Public & Private key. You publish the public key to your friends or even publicly on the net and if someone wants to send you an encrypted message, she encrypts it using your public key and send it to you with any means (or published the encoded message on the intneret) and only and only you will be able to open it, because you are the one who has the Private key!\ngreat point about Public / Private key is that the data can be transmitted over the internet with no fear of hackers or governments. You are publishing your key to the world, some one picks it and uses it to encrypt some data and sent the result to you. People can see that you are receiving \"some data\" but they can not encrypt it because they do not have the private key needed to decrypt it.\nssh keys\nThe same technology (Public key cryptography or asymetric cryptography) can be used in most of the network communications too. In fact the very\nssh\nworks based on this concept. It is used to authenticate hosts and secure the traffic.\n➜\n~\nssh\n192.168.70.2\nThe\nauthenticity\nof\nhost\n'\n192.168.70.2\n(\n192.168.70.2\n)\n'\ncan\n'\nt\nbe\nestablished\n.\nED25519\nkey\nfingerprint\nis\nSHA256\n:\n4\nWp2zz6sgPAhnbqhkNjOd6QDpNQ4jvjX7qAzslPX09U\n.\nThis\nkey\nis\nnot\nknown\nby\nany\nother\nnames\nAre\nyou\nsure\nyou\nwant\nto\ncontinue\nconnecting\n(\nyes\n/\nno\n/\n[\nfingerprint\n])\n?\ny\nPlease\ntype\n'\nyes\n'\n,\n'\nno\n'\nor\nthe\nfingerprint\n:\nyes\nWarning\n:\nPermanently\nadded\n'\n192.168.70.2\n'\n(\nED25519\n)\nto\nthe\nlist\nof\nknown\nhosts\n.\njadi\n@192.168.70.2\n'\ns\npassword\n:\nLinux\ndebian\n6.4.0\n-2\n-\narm64\n#\n1\nSMP\nDebian\n6.4.4\n-3\n(\n2023-08-08\n)\naarch64\nThe\nprograms\nincluded\nwith\nthe\nDebian\nGNU\n/\nLinux\nsystem\nare\nfree\nsoftware\n;\nthe\nexact\ndistribution\nterms\nfor\neach\nprogram\nare\ndescribed\nin\nthe\nindividual\nfiles\nin\n/\nusr\n/\nshare\n/\ndoc\n/*/copyright.\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nYou have no mail.\nLast login: Sun Sep 17 04:43:18 2023 from 192.168.70.1\njadi@debian:~$\nAbove the server is showing us the fingerprint of its ED25519 key and asking us to approve it. From now on, our system wont warn us for the same key with the same server. BUT if the fingerprint (so the key) of the same server is changed, that will be considered a serious case:\n➜  ~ ssh 192.168.70.2\nHost key verification failed.\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nIT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!\nSomeone could be eavesdropping on you right now (man-in-the-middle attack)!\nIt is also possible that a host key has just been changed.\nThe fingerprint for the ED25519 key sent by the remote host is\nSHA256:4Wp2zz6sgPAhnbqhkNjOd6QDpNQ4jvjX7qAzslPX09U.\nPlease contact your system administrator.\nAdd correct host key in /Users/jadi/.ssh/known_hosts to get rid of this message.\nOffending RSA key in /Users/jadi/.ssh/known_hosts:548\nHost key for 192.168.70.2 has changed and you have requested strict checking.\nIf you want to solve this - after making sure that this is not an attack - you have to remove the data of 192.168.70.2 from the\n.ssh/known_hosts\nfile. Fortunately you do not need to directly edit the file. Its enough to use the\nssh-keygen\ncommand:\n➜  ~ ssh-keygen -R 192.168.70.2\n#\nHost 192.168.70.2 found: line 547\n#\nHost 192.168.70.2 found: line 548\n#\nHost 192.168.70.2 found: line 549\n/Users/jadi/.ssh/known_hosts updated.\nOriginal contents retained as /Users/jadi/.ssh/known_hosts.old\ncreating your own key pairs\nYou can easily create as many key pairs want; Even with different algorithms (defined by\n-t\nswitch and including dsa, ecdsa, ecdsa-sk, ed25519, ed25519-sk, rsa). Common choices are\nrsa\nwhich is the default and\necdsa\nwhich is used by bitcoin!\nLets create an ecdsa key pair on our machine. We can use this to login into the servers without providing a password or sign/encrypt messages.\njadi\n@debian\n:\n~\n$\nssh\n-\nkeygen\n-\nt\necdsa\nGenerating\npublic\n/\nprivate\necdsa\nkey\npair\n.\nEnter\nfile\nin\nwhich\nto\nsave\nthe\nkey\n(\n/\nhome\n/\njadi\n/\n.\nssh\n/\nid_ecdsa\n)\n:\n/\nhome\n/\njadi\n/\n.\nssh\n/\nid_ecdsa\nalready\nexists\n.\nOverwrite\n(\ny\n/\nn\n)\n?\ny\nEnter\npassphrase\n(\nempty\nfor\nno\npassphrase\n)\n:\nEnter\nsame\npassphrase\nagain\n:\nYour\nidentification\nhas\nbeen\nsaved\nin\n/\nhome\n/\njadi\n/\n.\nssh\n/\nid_ecdsa\nYour\npublic\nkey\nhas\nbeen\nsaved\nin\n/\nhome\n/\njadi\n/\n.\nssh\n/\nid_ecdsa\n.\npub\nThe\nkey\nfingerprint\nis\n:\nSHA256\n:\nWvJu5D7ns0a2z0sB6l8ZrCXnAgxSmb2kSwgo\n/\nlK0QYA\njadi\n@debian\nThe\nkey\n'\ns\nrandomart\nimage\nis\n:\n+---[\nECDSA 256\n]---+\n|\n.\noo\n.\n.\n+\n|\n|\nE\n.\no\n.\no\no\n|\n|\no\n..\n+\n..\no\n..\n|\n|\n.\no\n..\noo\n..\no\n|\n|\no\n...\nS\n.\n*\n|\n|\n.\n.\n.\n*\n..\no\n*\n+\n|\n|\n.\n.\noooo\n.\n=\n|\n|\n.\n+\n.\n==\n|\n|\noo\n=+++\n.\n|\n+\n----[SHA256]-----+\nand since its free, lets create an rsa key too:\njadi\n@debian\n:\n~\n$\nssh\n-\nkeygen\nGenerating\npublic\n/\nprivate\nrsa\nkey\npair\n.\nEnter\nfile\nin\nwhich\nto\nsave\nthe\nkey\n(\n/\nhome\n/\njadi\n/\n.\nssh\n/\nid_rsa\n)\n:\n/\nhome\n/\njadi\n/\n.\nssh\n/\nid_rsa\nalready\nexists\n.\nOverwrite\n(\ny\n/\nn\n)\n?\ny\nEnter\npassphrase\n(\nempty\nfor\nno\npassphrase\n)\n:\nEnter\nsame\npassphrase\nagain\n:\nYour\nidentification\nhas\nbeen\nsaved\nin\n/\nhome\n/\njadi\n/\n.\nssh\n/\nid_rsa\nYour\npublic\nkey\nhas\nbeen\nsaved\nin\n/\nhome\n/\njadi\n/\n.\nssh\n/\nid_rsa\n.\npub\nThe\nkey\nfingerprint\nis\n:\nSHA256\n:\nQ67Ob1DOfmF3gG449OfNLHXxE5QEH4B\n/\nUzHR8ycAHao\njadi\n@debian\nThe\nkey\n'\ns\nrandomart\nimage\nis\n:\n+---[\nRSA 3072\n]----+\n|\n.\noo\n++*=|\n|\noo\n.\n+=|\n|\n.\n......\n+|\n|\noo\n..\n...\n=\no\n|\n|\n=\nE\n+\n...\n*|\n|\n..\n=\n.\n*\no\no\n.\no\n|\n|\n.\no\n+\n=\n*\n..\n|\n|\no\no\n.\no\n+\n|\n|\noo\n..\n.\n|\n+\n----[SHA256]-----+\nThat fun\nImage\nis what you can show your friends so they can make sure that they are using the correct key.\nAbove, I did not set a password for the keys. If I did, I had to provide that password everytime I wanted to use that key\nThese keys are saved in users\n~/.ssh\ndirectory. As you can guess, the system wide keys used for ssh server are located at\n/etc/ssh\n.\nKey based / Password less login\nThe ssh server can be configured to check your identity using your keys. Its enough to save your public-key on the server's user account and tell the server to check for key-based logins too. In this case, your ssh client will provide your private key to the ssh server as a proof of identity and you will be able to enter the user without providing passwords.\nFirst copy your\npublic\nkey and login into the server. Open the\n~/.ssh/authorized_keys\nfile and add yours. Also make sure that the\n/etc/ssh/sshd_config\ncontains the\nPubkeyAuthentication yes\n. Now log out and on the next login you should be able to login without password! This is super userful when you are managing many servers or want to automate\nscp\ncopies and other stuff. Its also more secure from the sysadmin point of view because if I need to let a new user to login into my system, I do not need to share the password or communicate the password on any channel. Its enough to ask the person for his\npublic key\nand add it to the users\n.ssh/authorized_keys\nfile.\nOh! and you do not need to do the\nkey copying\nmanually; just use the\nssh-copy-id\ncommand:\n➜\n~\nssh\n-\ncopy\n-\nid\n192.168.70.2\n/\nusr\n/\nbin\n/\nssh\n-\ncopy\n-\nid\n:\nINFO\n:\nSource\nof\nkey\n(\ns\n)\nto\nbe\ninstalled\n:\n\"/Users/jadi/.ssh/id_dsa.pub\"\n/\nusr\n/\nbin\n/\nssh\n-\ncopy\n-\nid\n:\nINFO\n:\nattempting\nto\nlog\nin\nwith\nthe\nnew\nkey\n(\ns\n),\nto\nfilter\nout\nany\nthat\nare\nalready\ninstalled\n/\nusr\n/\nbin\n/\nssh\n-\ncopy\n-\nid\n:\nINFO\n:\n1\nkey\n(\ns\n)\nremain\nto\nbe\ninstalled\n--\nif\nyou\nare\nprompted\nnow\nit\nis\nto\ninstall\nthe\nnew\nkeys\njadi\n@192.168.70.2\n'\ns\npassword\n:\nNumber\nof\nkey\n(\ns\n)\nadded\n:\n1\nNow\ntry\nlogging\ninto\nthe\nmachine\n,\nwith\n:\n\"ssh '192.168.70.2'\"\nand\ncheck\nto\nmake\nsure\nthat\nonly\nthe\nkey\n(\ns\n)\nyou\nwanted\nwere\nadded\n.\nssh-agent\nThe\nssh-agent\nworks like a key manager for your ssh keys. It keeps your private keys in memory and provides them when needed. For example if you have set a password on your key, you have to type the password every single time you are going to use that key. To make this easier using ssh-agent, you have to rush a shell with ssh-agent and add all your key to the agent:\njadi\n@debian\n:\n~\n$\nssh\n-\nagent\n/\nbin\n/\nbash\njadi\n@debian\n:\n~\n$\nssh\n-\nadd\nIdentity\nadded\n:\n/\nhome\n/\njadi\n/\n.\nssh\n/\nid_rsa\n(\njadi\n@debian\n)\nIdentity\nadded\n:\n/\nhome\n/\njadi\n/\n.\nssh\n/\nid_ecdsa\n(\njadi\n@debian\n)\nIdentity\nadded\n:\n/\nhome\n/\njadi\n/\n.\nssh\n/\nid_dsa\n(\n/\nhome\n/\njadi\n/\n.\nssh\n/\nid_dsa\n)\nNow, the agent knows about your keys and wont ask for the passwords anymore.\nssh-agent\ncan also\ntransfer\nyour keys safely in memory to other servers. Say you need to ssh to server A and while on server A, use your key to ssh to server B (or do a git pull using your private keys). The keys are on server A and its not safe to actually and physically copy them to server B. In this case you cal run\nssh-agent\nand have your keys even when you are on server B.\nssh tunnels\nThe ssh can also be used for\ntunnelling\n. Its a very fun concept and a super userful tool in the hands of a network Ninja! Honestly we use it all the time to solve complicated problems.\nAs the name sggests, ssh tunelling\ntunnels\nthe data between machines. Look at this example:\nssh\n-\nL\n9000\n:\nhckrnews\n.\ncom\n:\n80\nroot\n@5.161.197.79\nHere I'm telling my computer to ssh using user\nroot\n(which is not a great idea) to the\n5.161.197.79\nserver; AND create a\nlocal tunnel\n(\n-L\n) from on my machine toward the\nhckrnews.com\nport\n80\nthrough that machine. Now if I connect to\nlocalhost:9000\non my machine\n, the request will be tunnels through\n5.161.197.79\ntoward hckrnews.com port 80. You can try it with\ncurl localhost:9000\n.\nWhy this is useful? Say you have a program on your server which only answers back to the local requests (and not the internet). Using local forwarding you can forward a port on your computer to port which programs works on and use the program on your own machine!\nThere is also the concept of\nRemote Forwarding\n. In this case, you connect a port from a remote server to another server (mostly your own computer). Using this, you can expose a webserver from your own computer on the Internet:\n$\nssh\n-\nR\n8000\n:\nlocalhost\n:\n80\nroot\n@5.161.197.79\nIn the above example, I'm telling the ssh to create a\nRemote\ntunnel. After this any request on port 8000 from the 5.161.197.79 computer will reach to localhost (my machine) port 80!\nYou can even ask the remote machine to start listening on a specific port on all of its interfaces (open up to the network and not only localhost):\nssh -R 0.0.0.0:8000:localhost:7777 192.168.70.2\nAbove, I'm telling the 192.168.70.2 machine to open port 8000 to ALL interfaces and forward whatever it got to my machiens 7777 port.\nto let clients to\nbind\nlistening ports to anything other than localhost, the\nGatewayPorts clientspecified\nconfigu should be set in the ssh server's config file.\nThere are even more use caases. For example you use the -D switch for a\ndynamic\napplication level port forarding. It works like a proxy / anti censorship. If I do\nssh -D 1080 192.168.70.2\nThe 1080 port will work ask a\nsocks\nproxy on my machine and forward whatever request reaches it to the 192.168.70.2 machine and returns back the answers. Now I can configure my applications to use the localhost:1080 as their socks proxy and the 192.168.70.2 will work as a proxy here. This is useful when you do not have internet on your localhost, but 192.168.70.2 has it.\nX Forwarding\nThe last concept I want to talk about in forwarding section, is the X forwarding. As you already know from\nModule 106\n, linux graphical applications use X as their graphical host. This X can also be forwarded on the network as any other network based communication. Its even has its own switch on the ssh program. To forward the X, its enough to add a\n-X\nto your ssh. Please note that the\nX11Forwarding yes\nconfiguration should be present in your sshd_config file.\nTo activate the X11 forwarding in a ssh session, simply add\n-X\nto your ssh:\nssh -X 192.168.70.2\nand then you can run graphical programs (say\nxeyes\nfor fun) on the remote machine and see the graphical part on your own X server!\nIf you are not on a GNU/Linux machine with an X11 server, you need to install it (for example XQuartz on Mac)\nThis is very useful when you want to run a program on a resourceful server or work from home whiel your graphical applications are at the office ;)\necnrypt and sign using gpg\nAs described in previous section, a public and private key pair can be used to encrypt or sign messages. There is an implementation of this method called\ngpg\nwhich can be used on Linux (and other machiens) to perform these tasks. First you need to generate a key:\njadi@debian:~$ gpg --gen-key\ngpg (GnuPG) 2.2.40; Copyright (C) 2022 g10 Code GmbH\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\ngpg: directory '/home/jadi/.gnupg' created\ngpg: keybox '/home/jadi/.gnupg/pubring.kbx' created\nNote: Use \"gpg --full-generate-key\" for a full featured key generation dialog.\nGnuPG needs to construct a user ID to identify your key.\nReal name: Jadi\nName must be at least 5 characters long\nReal name: Jadi M\nEmail address:\n[email protected]\nYou selected this USER-ID:\n\"Jadi M <\n[email protected]\n>\"\nChange (N)ame, (E)mail, or (O)kay/(Q)uit?\nChange (N)ame, (E)mail, or (O)kay/(Q)uit? O\nWe need to generate a lot of random bytes. It is a good idea to perform\nsome other action (type on the keyboard, move the mouse, utilize the\ndisks) during the prime generation; this gives the random number\ngenerator a better chance to gain enough entropy.\nWe need to generate a lot of random bytes. It is a good idea to perform\nsome other action (type on the keyboard, move the mouse, utilize the\ndisks) during the prime generation; this gives the random number\ngenerator a better chance to gain enough entropy.\ngpg: /home/jadi/.gnupg/trustdb.gpg: trustdb created\ngpg: directory '/home/jadi/.gnupg/openpgp-revocs.d' created\ngpg: revocation certificate stored as '/home/jadi/.gnupg/openpgp-revocs.d/E279681DC09318AB5B23D359C9063DD26365986A.rev'\npublic and secret key created and signed.\npub   rsa3072 2023-09-17 [SC] [expires: 2025-09-16]\nE279681DC09318AB5B23D359C9063DD26365986A\nuid                      Jadi M <\n[email protected]\n>\nsub   rsa3072 2023-09-17 [E] [expires: 2025-09-16]\nNow the key is created in the\n~/.gnupg\ndirectory and we can share our public key with others:\njadi@debian:~$ gpg --list-keys\n/home/jadi/.gnupg/pubring.kbx\n-----------------------------\npub   rsa3072 2023-09-17 [SC] [expires: 2025-09-16]\nE279681DC09318AB5B23D359C9063DD26365986A\nuid           [ultimate] Jadi M <\n[email protected]\n>\nsub   rsa3072 2023-09-17 [E] [expires: 2025-09-16]\njadi@debian:~$ gpg --export jadi > jadi.pub.key\njadi@debian:~$ file jadi.pub.key\njadi.pub.key: OpenPGP Public Key Version 4, Created Sun Sep 17 12:39:19 2023, RSA (Encrypt or Sign, 3072 bits); User ID; Signature; OpenPGP Certificate\nthe exported key is in binary format, add\n-a\nto armor it in ascii\nNow you have to distribute this key to others. You can upload it somewhere, email it, put it on your website or use some of the public key stores to share it with other. If anyone recives it, she can import it into her key store using the following command:\ngpg --import jadi.pub.key\nOh! and what happens if you feel that your key is compromised!? In this case you have to create a\nrevoke\nfile and share it with other to tell them that your key is not valid anymore:\ngpg --output jadi.revoke.asc --gen-revoke\n[email protected]\nThis tells gpg to create a revoke file called jadi.revoke.asc for the identity\n[email protected]\n. If\n[email protected]\nneeds to invalidate his public key, he has to publish this file to the Internet or key servers and others will know that the previous public key is not valid anymore.\nEncrypt / Decrypt files\nAt this stage, I have a key and my friends do have my public key imported in their machine. If any of them wants to send my an encrypted message, they can do the following:\necho\n\"I Loved your course! I'll tell all my friends about it.\"\n>\nfile\n.\ntxt\ngpg\n--out file.txt.encrypted --recipient\n[email protected]\n--encrypt file.txt\nNow its enough for them to send me this file. Even using unsecure channels because its encrypted by the top notch tools. Every one can download this file but ONLY I will be able to decypt it; because only I have the\nPrivate key\nof\n[email protected]\n.\ngpg --out out.txt --decrypt file.txt.encrypted\nIf you liked this course, no need to encrypt the message, just share the\nlinux1st.com\non the internet!\nSigning and verifying files\nIn the previous section, we used gpg to encrypt the data. We used someone's Public key to encrypt and then used our own Private Key to decrypt the data. But what happens if I use my Private key on my side and let other use my Public key to\nopen\nthe data? That is called *\nsigning\n.\nPlease remember that only I have access to my private key. So if I apply it to a file, every one:\nwill be able to open the file using my Public Key\nWill be sure that\nI\nhave signed this because only\nI\nhas access to the private key of the public key they used to open the file.\nLets sign a message:\n$\necho\n\"I'm Jadi and I'm glad that you reached to the end of your LPIC study\"\n>\nmessage-jadi.txt\n$\ngpg\n--output\nmessage-jadi.sig\n--sign\nmessage-jadi.txt\nNow its enough for me to publish the\nmessage-jadi.sig\nto the Internet or send it to someone. If they want to make sure that it is truely comming from me, its enough for them to check my signature (obviously after importing my public key):\njadi\n@debian\n:\n~\n$\ngpg\n--\nverify\nmessage\n-\njadi\n.\nsig\ngpg\n:\nSignature\nmade\nSun\n17\nSep\n2023\n09\n:\n26\n:\n15\nAM\nEDT\ngpg\n:\nusing\nRSA\nkey\nE279681DC09318AB5B23D359C9063DD26365986A\ngpg\n:\nGood\nsignature\nfrom\n\"Jadi M <\n[email protected]\n>\"\n[\nultimate\n]\nThis only checked the signature, if they also needed to decrypt the message they had to as follow:\njadi\n@debian\n:\n~\n$\ngpg\n--\noutput\nmessage\n.\njadi\n--\ndecrypt\nmessage\n-\njadi\n.\nsig\ngpg\n:\nSignature\nmade\nSun\n17\nSep\n2023\n09\n:\n26\n:\n15\nAM\nEDT\ngpg\n:\nusing\nRSA\nkey\nE279681DC09318AB5B23D359C9063DD26365986A\ngpg\n:\nGood\nsignature\nfrom\n\"Jadi M <\n[email protected]\n>\"\n[\nultimate\n]\njadi\n@debian\n:\n~\n$\ncat\nmessage\n.\njadi\nI\n'm Jadi and I'\nm\nglad\nthat\nyou\nreached\nto\nthe\nend\nof\nyour\nLPIC\nstudy\nPlease also note the\n--clearsign\noption. This option will create a file ending in\n.asc\nwhich containt the original un-encrypted (clear text) message alongside the signature. This way non-tech-savy people will be able to read the message too and only if someone wants, she can\n--verify\nthe signature.\njadi@debian:~$ cat message-jadi.txt\nI'm Jadi and I'm glad that you reached to the end of your LPIC study\njadi@debian:~$ gpg --clearsign message-jadi.txt\njadi@debian:~$ ls -ltrh\ntotal 16M\ndrwxr-xr-x 27 jadi jadi 4.0K Jun 15 09:00 rust-for-linux\ndrwxr-xr-x  2 jadi jadi 4.0K Jun 15 09:09 Downloads\ndrwx------  2 jadi jadi 4.0K Jul 17 10:53 BRF\n-rw-r--r--  1 jadi jadi    6 Jul 17 10:57 myfile\ndrwxr-xr-x  5 jadi jadi 4.0K Jul 25 13:34 nltk_data\ndrwxr-xr-x  4 jadi jadi 4.0K Aug 13 07:29 w\n-rw-r--r--  1 jadi jadi  16M Aug 24 01:15 nvim-linux64.tar.gz\ndrwxr-xr-x  6 jadi jadi 4.0K Aug 24 05:38 nvim-linux64\n-rw-r--r--  1 jadi jadi 3.8K Aug 27 15:49 report.xml\n-rw-r--r--  1 jadi jadi 1.8K Sep 17 08:50 jadi.pub.key\n-rw-r--r--  1 jadi jadi   69 Sep 17 09:26 message-jadi.txt\n-rw-r--r--  1 jadi jadi  549 Sep 17 09:26 message-jadi.sig\n-rw-r--r--  1 jadi jadi   69 Sep 17 09:27 message.jadi\n-rw-r--r--  1 jadi jadi  777 Sep 17 09:28 message-jadi.txt.asc\njadi@debian:~$ cat message-jadi.txt.asc\n-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\nI'm Jadi and I'm glad that you reached to the end of your LPIC study\n-----BEGIN PGP SIGNATURE-----\niQGzBAEBCgAdFiEE4nloHcCTGKtbI9NZyQY90mNlmGoFAmUG/xYACgkQyQY90mNl\nmGqpXQv/QNv0NlCR+S7HJhxiOZcKXE3RB1sx4jRVrOtMd6ZoXYLb28Zz4xN/Lzh2\nsipohDbNttr1ovNZvMMu83bbuSeViY9L7nvjNjKsY50u5V1KnrMJPHRaGV8g/0p2\nt5zFJuzSFWXQczIjjXMpoLVH8jK3mJuBOmVFwLuBqUoW8827tCLIdr1DNyHXBW47\nfcLK5/bO/ljdwGnAX46d+Prg0TIfMLjPpb7uFXVkRBo+zMtCEVDGObaVHQ3J8t6w\n8i2YgMrmA3h9h4Gy/yM9Agb2kPeKl6iToeCfQ0EwTcnPF1TN0KZ1PS8Pr3Jp3LcS\nA+p32zj7YTzTeE1uBAb7/BorBqaArX8HtLe15yFkNKhPluXya9GG4/Nsxk33Qpd3\nc1KiLK9YhTFy7u+Q6tbTKG+uuGj71wANhkqRP30iMjLcBQ7aAO3ehVSYZFyZ7dbL\nSJollwyG1sf4zH0g5SQZOxpjyz874IrlFc7GldDCr5jXZw6H+4NuY2yiVWKAcOcU\nQv23xWL2\n=q81y\n-----END PGP SIGNATURE-----\njadi@debian:~$ gpg --verify message-jadi.txt.asc\ngpg: Signature made Sun 17 Sep 2023 09:28:54 AM EDT\ngpg:                using RSA key E279681DC09318AB5B23D359C9063DD26365986A\ngpg: Good signature from \"Jadi M <\n[email protected]\n>\" [ultimate]\ngpg: WARNING: not a detached signature; file 'message-jadi.txt' was NOT verified!\nhere the --clearsign tells the gpg to include the clear text message in the output file too. The output file will be originalfile.asc\nand another one to verify that a document is singed correctly:\ngpg --verify recievedfile\ngpg-agent\nJust like the\nssh-agent\n,\ngpg-agent\nis a tool which acts like a password manager for you gpg keys. It keeps the keys in the memory so you wont need to provide password on every single use.\n← 110.2 Setup host security\nChapter List\nCategory\nLPIC1\nTags\n102\n20\nLPIC1\n42\nLPIC1-102-500\n20\nContact"
  }
]